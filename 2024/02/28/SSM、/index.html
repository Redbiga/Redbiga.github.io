<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>SSM学习总结 | 山麋一笑</title><meta name="author" content="山麋一笑"><meta name="copyright" content="山麋一笑"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="Mybits: mybits核心配置文件： 用于配置 MyBatis 的各种参数和属性，以及引入映射文件（Mapper）。 12345678910111213141516171819202122232425262728293031323334353637383940&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot; ?&gt;">
<meta property="og:type" content="article">
<meta property="og:title" content="SSM学习总结">
<meta property="og:url" content="http://www.bojiboqi.fun/2024/02/28/SSM%E3%80%81/index.html">
<meta property="og:site_name" content="山麋一笑">
<meta property="og:description" content="Mybits: mybits核心配置文件： 用于配置 MyBatis 的各种参数和属性，以及引入映射文件（Mapper）。 12345678910111213141516171819202122232425262728293031323334353637383940&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot; ?&gt;">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://www.bojiboqi.fun/images/default.webp">
<meta property="article:published_time" content="2024-02-28T13:02:28.474Z">
<meta property="article:modified_time" content="2024-09-24T16:17:59.217Z">
<meta property="article:author" content="山麋一笑">
<meta property="article:tag" content="ssm">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.bojiboqi.fun/images/default.webp"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://www.bojiboqi.fun/2024/02/28/SSM%E3%80%81/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta/><link rel="stylesheet" href="/css/index.css?v=4.12.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.32/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'SSM学习总结',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-09-25 00:17:59'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/transpancy.css"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="山麋一笑" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (true) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "/images/1.webp" data-lazy-src="/img/favicon.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">124</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">58</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">23</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/photo/"><i class="fa-fw fas fa-list"></i><span> 图库</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/images/default.webp')"><nav id="nav"><span id="blog-info"><a href="/" title="山麋一笑"><span class="site-name">山麋一笑</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/photo/"><i class="fa-fw fas fa-list"></i><span> 图库</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">SSM学习总结</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-02-28T13:02:28.474Z" title="发表于 2024-02-28 21:02:28">2024-02-28</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-09-24T16:17:59.217Z" title="更新于 2024-09-25 00:17:59">2024-09-25</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/spring/">spring</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">32.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>129分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="SSM学习总结"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"> <meta name="referrer" content="no-referrer">
<h1>Mybits:</h1>
<h4 id="mybits核心配置文件：">mybits核心配置文件：</h4>
<p>用于配置 MyBatis 的各种参数和属性，以及引入映射文件（Mapper）。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!--&lt;!DOCTYPE&gt; 标签：声明了XML文档类型的声明，指定了使用的DTD(文档类型定义）文件的路径和版本。--&gt;</span><br><span class="line">&lt;!DOCTYPE configuration</span><br><span class="line">        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span><br><span class="line">        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span><br><span class="line">&lt;!--configuration 标签：MyBatis的配置文件必须以这个标签作为根标签，包含了所有的配置信息。--&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;!--设置连接数据库的环境--&gt;</span><br><span class="line">&lt;!--environments 标签：用于配置 MyBatis 的环境，通过 default 属性指定默认的环境。</span><br><span class="line">environment 标签：定义了一个具体的环境，通过 id 属性指定环境的名称，id=test是测试环境，id是</span><br><span class="line">唯一标识不能重复				。</span><br><span class="line">environments是一个复数标签，里面可以存放很多environment标签--&gt;</span><br><span class="line">    &lt;environments default=&quot;development&quot;&gt;</span><br><span class="line">        &lt;environment id=&quot;development&quot;&gt;</span><br><span class="line">&lt;!--transactionManager 标签：用于配置事务管理器（数据库操作的管理和实现，</span><br><span class="line">数据库领域，事务管理器通常是由数据库管理系统（DBMS）提供的服务，</span><br><span class="line">用于确保数据库操作的原子性、一致性、隔离性和持久性（ACID）。</span><br><span class="line">事务管理器提供了一种机制，使得多个数据库操作可以作为一个整体执行，</span><br><span class="line">而不是独立的操作，从而避免了数据不一致和丢失的问题。），这里使用的是 JDBC 事务管理器。--&gt;</span><br><span class="line">            &lt;transactionManager type=&quot;JDBC&quot;/&gt;</span><br><span class="line">            &lt;!--设置数据库连接--&gt;</span><br><span class="line">&lt;!--dataSource 标签：用于配置数据库连接池，这里使用的是 POOLED (mybits提供是数据池连接技术）</span><br><span class="line">数据源类型。--&gt;</span><br><span class="line">            &lt;dataSource type=&quot;POOLED&quot;&gt;</span><br><span class="line">&lt;!--property 标签：用于设置数据源的属性，包括数据库驱动、URL、用户名和密码等。--&gt;</span><br><span class="line">                &lt;property name=&quot;driver&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;</span><br><span class="line">                &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/myemployees?</span><br><span class="line">serverTimezone=UTC&quot;/&gt;</span><br><span class="line">                &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;</span><br><span class="line">                &lt;property name=&quot;password&quot; value=&quot;A86789234&quot;/&gt;</span><br><span class="line">            &lt;/dataSource&gt;</span><br><span class="line">        &lt;/environment&gt;</span><br><span class="line">    &lt;/environments&gt;</span><br><span class="line">   &lt;!--引入映射文件--&gt;</span><br><span class="line">    &lt;mappers&gt;</span><br><span class="line">        &lt;!--本配置文件和mappers文件是平行的，默认的当前目录下的mappers下的UserMapper--&gt;</span><br><span class="line">        &lt;mapper  resource=&quot;mappers/UserMapper.xml&quot;/&gt;</span><br><span class="line">    &lt;/mappers&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>
<h4 id="mapper映射文件：">mapper映射文件：</h4>
<p>用于定义与用户（User）相关的数据库操作。这个映射文件使用了 MyBatis 的 XML 映射语言来定义 SQL 语句和数据库操作方法。映射文件写好后要和mybits的核心配置文件关联，通过<mapper>标签关联。当我们对数据库进行操作的时候，通过调用相关的mapper接口（与xml文件映射关联了的）中的方法，其中的方法通过xml映射文件关联，然后通过映射文件完成数据库的操作。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper</span><br><span class="line">        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span><br><span class="line">        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span><br><span class="line">&lt;!--mapper 标签：MyBatis的映射文件必须以这个标签作为根标签，包含了所有的映射信息。</span><br><span class="line">namespace 属性：指定了映射器的命名空间，用于与其他映射器区分开来。--&gt;</span><br><span class="line">&lt;!--映射器：映射器（Mapper）是 MyBatis 框架中的一个组件，用于定义数据库操作和 SQL 语句与 Java 方法之间的映射关系。</span><br><span class="line">映射器将 Java 对象和数据库表之间的数据映射起来，将数据库操作封装成一个个方法，使得 Java 开发人员可以使用面向对象的方式操作数据库，</span><br><span class="line">而不需要编写大量的 SQL 语句。</span><br><span class="line">在 MyBatis 中，映射器通常是一个接口，其中的方法定义了对数据库的操作。映射器的具体实现由 MyBatis 框架自动生成，</span><br><span class="line">可以使用 XML 或者注解的方式来描述 SQL 语句以及与 Java 方法之间的映射关系--&gt;</span><br><span class="line">        &lt;mapper namespace=&quot;com.example.demo.mapper.UserMapper&quot;&gt;</span><br><span class="line">       &lt;!--int insertUser();insert 标签：定义了一个插入（Insert）操作的 SQL 语句，通过 id 属性指定操作的名称。--&gt;</span><br><span class="line">        &lt;insert id=&quot;InsertUser&quot;&gt;</span><br><span class="line">         insert into t_user values(&#x27;admin&#x27;,&#x27;123456&#x27;)</span><br><span class="line">      &lt;/insert&gt;</span><br><span class="line">        &lt;/mapper&gt;</span><br></pre></td></tr></table></figure>
<h4 id="测试数据库添加数据操作：在test文件中建立测试类">测试数据库添加数据操作：在test文件中建立测试类</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">//读取MyBatis的核心配置文件</span><br><span class="line">InputStream is = Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;); </span><br><span class="line">//创建SqlSessionFactoryBuilder对象</span><br><span class="line">SqlSessionFactoryBuilder sqlSessionFactoryBuilder = new </span><br><span class="line">SqlSessionFactoryBuilder();</span><br><span class="line">//通过核心配置文件所对应的字节输入流创建工厂类SqlSessionFactory，生产SqlSession对象 </span><br><span class="line">SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.build(is); </span><br><span class="line">//创建SqlSession对象，此时通过SqlSession对象所操作的sql都必须手动提交或回滚事务 </span><br><span class="line">//SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">//创建SqlSession对象，此时通过SqlSession对象所操作的sql都会自动提交 </span><br><span class="line">SqlSession sqlSession = sqlSessionFactory.openSession(true); </span><br><span class="line">//通过代理模式创建UserMapper接口的代理实现类对象</span><br><span class="line">UserMapper userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">//调用UserMapper接口中的方法，就可以根据UserMapper的全类名匹配元素文件，通过调用的方法名匹配 </span><br><span class="line">映射文件中的SQL标签，并执行标签中的SQL语句</span><br><span class="line">int result = userMapper.insertUser(); </span><br><span class="line">//上面可以不通过创建类来实现对sql的操作：</span><br><span class="line">// int result = sqlSession.insert(&quot;com.example.demo.mapper.UserMapper.InsertUser&quot;);</span><br><span class="line">sqlSession.commit();</span><br><span class="line">System.out.println(&quot;结果：&quot;+result);</span><br></pre></td></tr></table></figure>
<h4 id="添加日志功能：log4j4日志框架">添加日志功能：log4j4日志框架</h4>
<p>1.在pom文件中添加相关的依赖：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">   &lt;groupId&gt;log4j&lt;/groupId&gt;</span><br><span class="line">   &lt;artifactId&gt;log4j&lt;/artifactId&gt; </span><br><span class="line">   &lt;version&gt;1.2.17&lt;/version&gt; </span><br><span class="line">&lt;/dependency</span><br></pre></td></tr></table></figure>
<p>选择的日志级别打印出来的是大于等于当前日志级别的信息。</p>
<h4 id="查询操作：">查询操作：</h4>
<p>设置程序的测试程序</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">  public  void  selectUser() throws IOException &#123;</span><br><span class="line">    InputStream is =  Resources.getResourceAsStream(&quot;mybatis.config.xml&quot;);</span><br><span class="line">    SqlSessionFactoryBuilder sqlSessionFactoryBuilder = new</span><br><span class="line">            SqlSessionFactoryBuilder();</span><br><span class="line">    SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.build(is);</span><br><span class="line">    SqlSession sqlSession = sqlSessionFactory.openSession(true);</span><br><span class="line">    UserMapper userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    User user = userMapper.getUserById();</span><br><span class="line">    System.out.println(user);</span><br><span class="line">    sqlSession.close(); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>修改UserMapper.xml文件<br>
添加：查询的结果放在List<user>的时候其中的resultType不变。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;getUserById&quot; resultType=&quot;com.example.demo.object.User&quot;&gt;</span><br><span class="line">        select  *from user where  id = 1</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;!--resultType:设置结果类型，即是查询结果的类型；resultMap：自定义映射，</span><br><span class="line">处理多对1或者1对多的映射关系--&gt;</span><br></pre></td></tr></table></figure>
<h4 id="获取参数的情况：">获取参数的情况：</h4>
<p><img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688218734317-c8b32cba-caba-4a3e-85ec-135be182b45d.png#averageHue=%23efecde&amp;clientId=ub061bfe9-9d20-4&amp;from=paste&amp;height=73&amp;id=ua6f05f43&amp;originHeight=91&amp;originWidth=625&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=62494&amp;status=done&amp;style=none&amp;taskId=uddfba630-ba37-43b5-ba9b-b25b221df27&amp;title=&amp;width=500" alt="image.png"><br>
<img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688219517886-1a40d78f-68af-4464-9413-c21f9674d09c.png#averageHue=%23ede9db&amp;clientId=ub061bfe9-9d20-4&amp;from=paste&amp;height=85&amp;id=u084a63b8&amp;originHeight=106&amp;originWidth=662&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=64138&amp;status=done&amp;style=none&amp;taskId=uac3440e7-d8c8-46d1-8d53-1473464335e&amp;title=&amp;width=529.6" alt="image.png"><br>
之所以用arg0和arg1是因为当有多个参数的时候，底层会把参数储存到一个map集合中的，arg0和arg1分别对应传递过来的第一个参数和第二个参数。<br>
<img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688220154533-ffb0cb74-c2c9-46c7-bdd9-b1cf09d7938d.png#averageHue=%23efebdd&amp;clientId=ub061bfe9-9d20-4&amp;from=paste&amp;height=42&amp;id=ub2775b52&amp;originHeight=53&amp;originWidth=647&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=38063&amp;status=done&amp;style=none&amp;taskId=u5c80b38c-1536-48b6-85e3-68a114f8414&amp;title=&amp;width=517.6" alt="image.png"><br>
相当于自己手动把数值放在map集合中了，访问的时候就用自己设置的键访问即可<br>
<img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688220822207-5ee1466f-9eef-479a-9975-3a0000d923f7.png#averageHue=%23efece0&amp;clientId=ub061bfe9-9d20-4&amp;from=paste&amp;height=42&amp;id=u1fafbb68&amp;originHeight=52&amp;originWidth=718&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=47270&amp;status=done&amp;style=none&amp;taskId=ueac6e9f7-f54a-492d-8ff9-a22dd37c639&amp;title=&amp;width=574.4" alt="image.png"><br>
因为底层将属性（get和set方法去掉get和set后的字符转小写组成的，当成员变量没有get和set方法的时候，不能当作属性）名和属性值通过map映射的，与上面的访问类似，直接在#{}括号中添加属性名即可。<br>
<img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688221370849-9b9d27ff-7562-4e22-8b11-a47007648023.png#averageHue=%23e5e4df&amp;clientId=ub061bfe9-9d20-4&amp;from=paste&amp;height=73&amp;id=ue4c60bfc&amp;originHeight=91&amp;originWidth=484&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=46966&amp;status=done&amp;style=none&amp;taskId=uac55351b-f70b-4405-8fe2-9f6dd41400a&amp;title=&amp;width=387.2" alt="image.png">相当于在底层的map中的键是直接设置Param注解的参数绑定的</p>
<h4 id="mybatis的查询：">mybatis的查询：</h4>
<p><img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688226051068-fa423388-0538-4c3f-9bae-d6573c8b6f69.png#averageHue=%23f6f4eb&amp;clientId=ub061bfe9-9d20-4&amp;from=paste&amp;height=48&amp;id=u57b2519a&amp;originHeight=60&amp;originWidth=535&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=31220&amp;status=done&amp;style=none&amp;taskId=u3f373f8b-4593-4011-bc06-b4c795ebc60&amp;title=&amp;width=428" alt="image.png"><br>
select count(age) user:查询的时候会把age列为null的值不算入count中。<br>
<img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688226539314-0e2239b3-1ea3-4496-85a8-b35048a4b1d1.png#averageHue=%23588988&amp;clientId=ub061bfe9-9d20-4&amp;from=paste&amp;height=84&amp;id=u498bfa18&amp;originHeight=105&amp;originWidth=498&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=13606&amp;status=done&amp;style=none&amp;taskId=u034aeca4-53cc-4b04-88c9-5e57462e5d5&amp;title=&amp;width=398.4" alt="image.png">这里的resultType实际上是别名是不区分大小写的，mybatis已经设置了常见类型的别名，这里的int和interger都可以而且不区分大小写。<br>
<img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688226653051-0e5fcb54-3b4d-41b0-9206-7f28f9329264.png#averageHue=%23fbfaf6&amp;clientId=ub061bfe9-9d20-4&amp;from=paste&amp;height=106&amp;id=uf1224bc8&amp;originHeight=132&amp;originWidth=400&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=26785&amp;status=done&amp;style=none&amp;taskId=u923a0bd8-64cc-4e12-ac29-0b5301ae0f3&amp;title=&amp;width=320" alt="image.png"><br>
<img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688227493245-b069a3f0-4244-4ba8-b8a6-8af90d7f36a7.png#averageHue=%23f7f6f4&amp;clientId=ub061bfe9-9d20-4&amp;from=paste&amp;height=179&amp;id=uaee9cf78&amp;originHeight=224&amp;originWidth=657&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=97741&amp;status=done&amp;style=none&amp;taskId=uf5ac061a-d8b2-444d-86c2-809e13ebc23&amp;title=&amp;width=525.6" alt="image.png"><br>
@MapKey(“id”)<br>
以id为返回map的键，其中值为查询结果（通常用在有多个返回结果的查询中），如果有多个结果就返回最后一个结果。其中的id如果无法识别就用null代替，@MapKey(“id”) 注解中的 id 表示一个属性名，表示返回结果集中以哪个属性的值作为 Map 的键。</p>
<h4 id="特殊sql">特殊sql:</h4>
<p>模糊查询：<br>
<img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688255363510-f86f1244-96dd-4d98-9027-0145bc8a7f47.png#averageHue=%23ebf0e6&amp;clientId=ub061bfe9-9d20-4&amp;from=paste&amp;height=103&amp;id=u51962662&amp;originHeight=129&amp;originWidth=630&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=83538&amp;status=done&amp;style=none&amp;taskId=ucfe563e8-86a4-4fdc-aa5f-be8c1cc360d&amp;title=&amp;width=504" alt="image.png"><br>
批量删除：<br>
动态设置表名：<br>
<img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688256223477-294241c0-f767-4832-92f4-e978ccac4762.png#averageHue=%231e6123&amp;clientId=ub061bfe9-9d20-4&amp;from=paste&amp;height=47&amp;id=u59acb7a9&amp;originHeight=59&amp;originWidth=845&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=12730&amp;status=done&amp;style=none&amp;taskId=u8ddcbc86-9942-4a7a-b93c-affdfac9470&amp;title=&amp;width=676" alt="image.png">这里不能用#{}是因为#{}在拼接sql语句的时候自动添加了引发。</p>
<h4 id="处理多对1映射：注意在映射为实体类的时候，实体类中必须要有无参构造器">处理多对1映射：注意在映射为实体类的时候，实体类中必须要有无参构造器</h4>
<p>1.级联:<br>
在核心配置文件<mapper>中添加内容为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;resultMap id=&quot;empDeptMap&quot; type=&quot;com.example.demo.object.Emp&quot;&gt;</span><br><span class="line">       &lt;id column=&quot;emp_id&quot; property=&quot;empId&quot;&gt;&lt;/id&gt;</span><br><span class="line">       &lt;result column=&quot;emp_name&quot; property=&quot;empName&quot;&gt;&lt;/result&gt;</span><br><span class="line">     &lt;result column=&quot;age&quot; property=&quot;age&quot;&gt;&lt;/result&gt;</span><br><span class="line">      &lt;result column=&quot;gender&quot; property=&quot;gender&quot;&gt;&lt;/result&gt;</span><br><span class="line">       &lt;result column=&quot;dept_id&quot; property=&quot;dept.id&quot;&gt;&lt;/result&gt;</span><br><span class="line">       &lt;result column=&quot;dept_name&quot; property=&quot;dept.name&quot;&gt;&lt;/result&gt;</span><br><span class="line">   &lt;/resultMap&gt;</span><br><span class="line">   &lt;select id=&quot;getEmpById&quot; resultMap=&quot;empDeptMap&quot;&gt;</span><br><span class="line">    select  *from  t_emp left join  t_dept on t_emp.dept_id=t_dept.dept_id where  t_emp.emp_id = #&#123;empId&#125;</span><br><span class="line">   &lt;/select&gt;</span><br></pre></td></tr></table></figure>
 <resultMap>
<resultMap>元素可以包含多个<result>子元素，每个<result>子元素定义了如何将查询结果中的一列映射到Java对象的一个属性中。<result>子元素通常包含以下属性：
<ul>
<li>column：指定要映射的查询结果列的名称或别名。</li>
<li>property：指定要映射到Java对象的属性的名称。</li>
<li>jdbcType：指定查询结果列的JDBC类型。</li>
<li>javaType：指定要映射到Java对象属性的类型。</li>
<li>typeHandler：指定要使用的类型处理器，用于在Java对象和数据库类型之间进行转换。<id>子元素用于定义主键的映射，<result>子元素用于定义其他属性的映射。一旦你定义了<resultMap>元素，你可以在<select>或<selectKey>元素中使用它来指定查询结果的映射方式。</li>
<li>java中的无参构造器在Java中，无参构造器是指一个没有参数的构造器方法。如果你在一个Java类中没有显式地定义构造器，则编译器会自动为该类生成一个无参构造器。如果你显式地定义了一个构造器方法，但没有为其指定参数，则也会生成一个无参构造器。无参构造器通常用于创建一个新的对象实例，并初始化其状态。当你创建一个Java对象时，Java编译器会自动调用该对象的无参构造器，以便初始化对象的状态。如果你要创建一个对象，并使用默认值初始化其属性，则通常可以使用无参构造器。如果你显式地定义了一个有参数的构造器，则编译器不会自动为该类生成无参构造器。如果你需要一个无参构造器，你需要显式地定义一个。</li>
</ul>
<p>2.使用<association>标签：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;resultMap id=&quot;empDeptMap&quot; type=&quot;com.example.demo.object.Emp&quot;&gt;</span><br><span class="line">    &lt;id column=&quot;emp_id&quot; property=&quot;empId&quot;&gt;&lt;/id&gt;</span><br><span class="line">    &lt;result column=&quot;emp_name&quot; property=&quot;empName&quot;&gt;&lt;/result&gt;</span><br><span class="line">  &lt;result column=&quot;age&quot; property=&quot;age&quot;&gt;&lt;/result&gt;</span><br><span class="line">   &lt;result column=&quot;gender&quot; property=&quot;gender&quot;&gt;&lt;/result&gt;</span><br><span class="line">    &lt;association property=&quot;dept&quot; javaType=&quot;com.example.demo.object.Dept&quot;&gt;</span><br><span class="line">    &lt;id column=&quot;dept_id&quot; property=&quot;id&quot;&gt;&lt;/id&gt;</span><br><span class="line">    &lt;result column=&quot;dept_name&quot; property=&quot;name&quot;&gt;&lt;/result&gt;</span><br><span class="line">     &lt;/association&gt;</span><br><span class="line">&lt;/resultMap&gt;</span><br><span class="line">&lt;select id=&quot;getEmpById&quot; resultMap=&quot;empDeptMap&quot;&gt;</span><br><span class="line"> select  *from  t_emp left join  t_dept on t_emp.dept_id=t_dept.dept_id where  t_emp.emp_id = #&#123;empId&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<p><association>元素用于将两个对象之间的关联关系映射到查询结果中。</p>
<ul>
<li>property：指定要映射到Java对象的属性的名称。</li>
<li>javaType：指定要映射到Java对象的类型。（别名或者全类名）</li>
<li>select：指定关联查询的语句ID，用于查询关联对象的详细信息。</li>
</ul>
<p>4.分步查询：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;resultMap id=&quot;EmpAndDepByStep&quot; type=&quot;com.example.demo.object.Emp&quot;&gt;</span><br><span class="line">     &lt;id column=&quot;emp_id&quot; property=&quot;empId&quot;&gt;&lt;/id&gt;</span><br><span class="line">     &lt;result column=&quot;emp_name&quot; property=&quot;empName&quot;&gt;&lt;/result&gt;</span><br><span class="line">     &lt;result column=&quot;age&quot; property=&quot;age&quot;&gt;&lt;/result&gt;</span><br><span class="line">     &lt;result column=&quot;gender&quot; property=&quot;gender&quot;&gt;&lt;/result&gt;</span><br><span class="line">     &lt;association property=&quot;dept&quot;</span><br><span class="line">            select=&quot;com.example.demo.mapper.DepMapper.getEmpTwoStep&quot;</span><br><span class="line">                  column=&quot;dept_id&quot;&gt;</span><br><span class="line">     &lt;/association&gt;</span><br><span class="line"> &lt;/resultMap&gt;</span><br><span class="line"> &lt;select id=&quot;getEmpAndDepByStep&quot; resultMap=&quot;EmpAndDepByStep&quot;&gt;</span><br><span class="line">     select *from t_emp where  emp_id = #&#123;empid&#125;</span><br><span class="line"> &lt;/select&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>select属性指定了一个名为com.example.demo.mapper.DepMapper.getEmpTwoStep的映射语句，该语句用于查询当前员工所属的部门对象。column属性指定了查询结果中用于关联的列名（即部门ID列）。注意这里的select语句指明的映射语句后的函数没有小括号。<br>
如果分步查询中的Dep类的属性和表中的属性不一致的时候，可能会导致查询的dept为null这个时候使用resultMap将属性和列名重写映射就可以了。</p>
<h4 id="延迟加载：">延迟加载：</h4>
<p>延迟加载是一种优化数据库访问的方式，可以提高系统性能和响应速度。在MyBatis中，延迟加载主要通过基于代理的方式实现。<br>
基于代理的延迟加载是指，MyBatis在查询关联对象时，不会立即查询所有关联对象的数据，而是创建一个代理对象代替关联对象，在需要访问关联对象时，再实际访问数据库加载数据。这样可以避免不必要的数据库查询，提高系统性能和响应速度。<br>
例如，假设你有两个实体类Emp和Dept，其中Emp类包含一个dept属性，表示员工所在的部门：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public class Emp &#123;</span><br><span class="line">    private Integer empId;</span><br><span class="line">    private String empName;</span><br><span class="line">    private Integer age;</span><br><span class="line">    private String gender;</span><br><span class="line">    private Dept dept;</span><br><span class="line"></span><br><span class="line">    // getter和setter方法</span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class Dept &#123;</span><br><span class="line">    private Integer deptId;</span><br><span class="line">    private String deptName;</span><br><span class="line"></span><br><span class="line">    // getter和setter方法</span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果你使用MyBatis查询Emp对象，并同时查询dept对象，可以使用以下的XML配置文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;getEmpAndDepByStep&quot; resultMap=&quot;empResult&quot;&gt;</span><br><span class="line">  select e.emp_id, e.emp_name, e.age, e.gender, d.dept_id, d.dept_name</span><br><span class="line">  from t_emp e</span><br><span class="line">  inner join t_dept d on e.dept_id = d.dept_id</span><br><span class="line">  where e.emp_id = #&#123;empId&#125;</span><br><span class="line">&lt;/select&gt;</span><br><span class="line"></span><br><span class="line">&lt;resultMap id=&quot;empResult&quot; type=&quot;Emp&quot;&gt;</span><br><span class="line">  &lt;id property=&quot;empId&quot; column=&quot;emp_id&quot;/&gt;</span><br><span class="line">  &lt;result property=&quot;empName&quot; column=&quot;emp_name&quot;/&gt;</span><br><span class="line">  &lt;result property=&quot;age&quot; column=&quot;age&quot;/&gt;</span><br><span class="line">  &lt;result property=&quot;gender&quot; column=&quot;gender&quot;/&gt;</span><br><span class="line">  &lt;association property=&quot;dept&quot; javaType=&quot;Dept&quot;&gt;</span><br><span class="line">    &lt;id property=&quot;deptId&quot; column=&quot;dept_id&quot;/&gt;</span><br><span class="line">    &lt;result property=&quot;deptName&quot; column=&quot;dept_name&quot;/&gt;</span><br><span class="line">  &lt;/association&gt;</span><br><span class="line">&lt;/resultMap&gt;</span><br></pre></td></tr></table></figure>
<p>在上述配置中，association标签用于配置dept属性，resultMap属性用于指定empResult结果映射。这样，当你查询Emp对象时，MyBatis会自动查询关联的Dept对象，并将查询结果封装到Emp对象中的dept属性中。<br>
如果你使用基于代理的延迟加载方式，可以在查询Emp对象时，不立即查询关联的Dept对象，而是创建一个代理对象代替Dept对象。这样，在访问dept属性时，MyBatis会自动触发查询操作，并将查询结果封装到代理对象中。<br>
例如，你可以使用以下的XML配置文件启用基于代理的延迟加载：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;getEmpAndDepByStep&quot; resultMap=&quot;empResult&quot;&gt;</span><br><span class="line">  select e.emp_id, e.emp_name, e.age, e.gender, e.dept_id</span><br><span class="line">  from t_emp e</span><br><span class="line">  where e.emp_id = #&#123;empId&#125;</span><br><span class="line">&lt;/select&gt;</span><br><span class="line"></span><br><span class="line">&lt;resultMap id=&quot;empResult&quot; type=&quot;Emp&quot;&gt;</span><br><span class="line">  &lt;id property=&quot;empId&quot; column=&quot;emp_id&quot;/&gt;</span><br><span class="line">  &lt;result property=&quot;empName&quot; column=&quot;emp_name&quot;/&gt;</span><br><span class="line">  &lt;result property=&quot;age&quot; column=&quot;age&quot;/&gt;</span><br><span class="line">  &lt;result property=&quot;gender&quot; column=&quot;gender&quot;/&gt;</span><br><span class="line">  &lt;association property=&quot;dept&quot; javaType=&quot;Dept&quot; select=&quot;getDeptById&quot;&gt;</span><br><span class="line">  &lt;/association&gt;</span><br><span class="line">&lt;/resultMap&gt;</span><br><span class="line"></span><br><span class="line">&lt;select id=&quot;getDeptById&quot; resultType=&quot;Dept&quot;&gt;</span><br><span class="line">  select dept_id, dept_name</span><br><span class="line">  from t_dept</span><br><span class="line">  where dept_id = #&#123;deptId&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<p>在上述配置中，association标签用于配置dept属性，select属性用于指定查询关联对象的SQL语句，getDeptById为查询关联对象的ID。这样，在查询Emp对象时，MyBatis会创建一个代理对象代替Dept对象，当你访问dept属性时，MyBatis会自动触发查询操作，并将查询结果封装到代理对象中。<br>
需要注意的是，使用基于代理的延迟加载方式时，需要在查询结束后手动访问关联对象的属性，以触发数据加载。例如，在上述配置中，你需要手动访问Emp对象的dept属性，以触发关联对象的查询操作，代码示例如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Emp emp = sqlSession.selectOne(&quot;getEmpAndDepByStep&quot;, empId);</span><br><span class="line">System.out.println(emp.getEmpName()); // 访问Emp对象的属性，不会触发关联对象的查询操作</span><br><span class="line">System.out.println(emp.getDept().getDeptName()); // 访问关联对象的属性，会触发关联对象的查询操作</span><br></pre></td></tr></table></figure>
<p>在上述代码中，你需要先访问Emp对象的属性，例如empName，以确保Emp对象已经被查询出来。然后再访问dept属性，以触发关联对象的查询操作。<br>
如果你使用基于XML配置的延迟加载方式，可以在查询Emp对象时，不立即查询关联的Dept对象，而是将查询操作延迟到访问dept属性时。这样，MyBatis会自动创建代理对象，并在访问dept属性时，触发查询操作，并将查询结果封装到代理对象中。<br>
例如，你可以使用以下的XML配置文件启用基于XML配置的延迟加载：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;getEmpAndDepByLazyLoading&quot; resultMap=&quot;empResult&quot;&gt;</span><br><span class="line">  select e.emp_id, e.emp_name, e.age, e.gender, e.dept_id</span><br><span class="line">  from t_emp e</span><br><span class="line">  where e.emp_id = #&#123;empId&#125;</span><br><span class="line">&lt;/select&gt;</span><br><span class="line"></span><br><span class="line">&lt;resultMap id=&quot;empResult&quot; type=&quot;Emp&quot;&gt;</span><br><span class="line">  &lt;id property=&quot;empId&quot; column=&quot;emp_id&quot;/&gt;</span><br><span class="line">  &lt;result property=&quot;empName&quot; column=&quot;emp_name&quot;/&gt;</span><br><span class="line">  &lt;result property=&quot;age&quot; column=&quot;age&quot;/&gt;</span><br><span class="line">  &lt;result property=&quot;gender&quot; column=&quot;gender&quot;/&gt;</span><br><span class="line">  &lt;association property=&quot;dept&quot; javaType=&quot;Dept&quot; select=&quot;getDeptById&quot; lazyLoadingEnabled=&quot;true&quot;&gt;</span><br><span class="line">  &lt;/association&gt;</span><br><span class="line">&lt;/resultMap&gt;</span><br><span class="line"></span><br><span class="line">&lt;select id=&quot;getDeptById&quot; resultType=&quot;Dept&quot;&gt;</span><br><span class="line">  select dept_id, dept_name</span><br><span class="line">  from t_dept</span><br><span class="line">  where dept_id = #&#123;deptId&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<p>在上述配置中，lazyLoadingEnabled属性用于启用基于XML配置的延迟加载。这样，在访问dept属性时，MyBatis会自动创建代理对象，并触发查询操作。<br>
需要注意的是，使用基于XML配置的延迟加载方式时，需要确保在访问关联对象的属性时，MyBatis会自动触发查询操作。如果你手动访问关联对象的属性，而没有启用基于XML配置的延迟加载，那么查询操作会立即执行，而不是延迟加载。所以，建议在使用基于XML配置的延迟加载时，不要手动访问关联对象的属性，以便MyBatis可以自动触发查询操作。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;setting name=&quot;lazyLoadingEnabled&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">        &lt;setting name=&quot;aggressiveLazyLoading&quot; value=&quot;true&quot;/&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>这两个设置都与MyBatis的延迟加载相关。<br>
lazyLoadingEnabled设置决定是否启用延迟加载。如果设置为true，则启用延迟加载；如果设置为false，则禁用延迟加载。启用延迟加载后，MyBatis将会创建代理对象代替关联对象，在需要访问关联对象时，再实际访问数据库加载数据。这样可以减少不必要的数据库访问，提高系统性能和响应速度。<br>
aggressiveLazyLoading设置决定是否启用积极的延迟加载。如果设置为true，则启用积极的延迟加载；如果设置为false，则禁用积极的延迟加载。启用积极的延迟加载后，MyBatis将会尽可能多地延迟加载关联对象的数据，包括嵌套的关联对象。这样可以进一步减少不必要的数据库访问，提高系统性能和响应速度。但需要注意，启用积极的延迟加载可能会导致一些副作用，例如N+1查询问题等。<br>
一般来说，启用延迟加载可以提高系统性能和响应速度，但需要根据具体的场景和需求做出权衡和选择。如果你的数据量较小，或者关联对象的数据量较少，可以考虑禁用延迟加载，直接一次性查询所有关联对象的数据。而如果你的数据量较大，或者关联对象的数据量较大，可以考虑启用延迟加载，以减少不必要的数据库访问。<br>
需要注意的是，启用延迟加载后，需要在访问关联对象的属性时，才会触发数据库查询操作。因此，如果你需要使用关联对象的数据，建议在查询时同时查询关联对象的数据，以避免不必要的延迟加载操作。另外，如果你使用了基于代理的延迟加载方式，需要在访问关联对象的属性时，手动触发数据加载操作，以确保关联对象的数据已经被加载到代理对象中。</p>
<h4 id="通过collection处理一对多映射关系：">通过collection处理一对多映射关系：</h4>
<p><img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688284752974-610d453d-40df-4cf7-a210-545e1ec8fd48.png#averageHue=%23fbf9f2&amp;clientId=ub061bfe9-9d20-4&amp;from=paste&amp;height=59&amp;id=u5ad784bd&amp;originHeight=74&amp;originWidth=316&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=11977&amp;status=done&amp;style=none&amp;taskId=u00797a95-d021-4a47-9b35-71f49b75973&amp;title=&amp;width=252.8" alt="image.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;collection property=&quot;emps&quot; ofType=&quot;com.example.demo.object.Emp&quot;&gt;</span><br><span class="line">            &lt;id column=&quot;emp_id&quot; property=&quot;empId&quot;&gt;&lt;/id&gt;</span><br><span class="line">            &lt;result column=&quot;emp_name&quot; property=&quot;empName&quot;&gt;&lt;/result&gt;</span><br><span class="line">            &lt;result column=&quot;age&quot; property=&quot;age&quot;&gt;&lt;/result&gt;</span><br><span class="line">            &lt;result column=&quot;gender&quot; property=&quot;gender&quot;&gt;&lt;/result&gt;</span><br><span class="line">        &lt;/collection&gt;</span><br></pre></td></tr></table></figure>
<p>这段XML配置代码用于配置一个集合类型的结果映射。<br>
<collection>标签用于指定集合属性的结果映射。其中，property属性指定集合属性的名称，ofType属性指定集合元素的类型。<br>
在<collection>标签中，可以使用<id>标签和<result>标签配置集合元素的属性。<id>标签用于指定集合元素的主键属性，column属性指定数据库表中的主键列名，property属性指定Java对象中的属性名。<result>标签用于指定集合元素的普通属性，column属性指定数据库表中的列名，property属性指定Java对象中的属性名。<br>
例如，上述XML配置代码中，<collection>标签配置了一个名为emps的集合属性，元素类型为com.example.demo.object.Emp。<id>标签指定了集合元素的主键属性为empId，<result>标签指定了集合元素的普通属性为empName、age和gender。当MyBatis查询结果包含多个Emp对象时，会自动将这些对象封装到emps集合中，其中每个Emp对象的属性值根据XML配置进行映射。<br>
需要注意的是，如果你在查询结果中包含了集合类型的属性，需要使用<collection>标签进行结果映射。另外，如果你使用了基于代理的延迟加载方式，需要在访问集合属性时，手动触发数据加载操作，以确保集合元素的数据已经被加载到代理对象中。</p>
<h4 id="分步查询处理一对多的关系：">分步查询处理一对多的关系：</h4>
<p>depMapper中的内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;/select&gt;</span><br><span class="line">  &lt;resultMap id=&quot;DeptAndEmpStepOne&quot; type=&quot;com.example.demo.object.Dept&quot;&gt;</span><br><span class="line">      &lt;id column=&quot;dept_id&quot; property=&quot;Id&quot;&gt;&lt;/id&gt;</span><br><span class="line">      &lt;result column=&quot;dept_name&quot; property=&quot;name&quot;&gt;&lt;/result&gt;</span><br><span class="line">      &lt;collection property=&quot;emps&quot;</span><br><span class="line">                  select=&quot;com.example.demo.mapper.EmpMapper.DeptAndDeptTwo&quot;</span><br><span class="line">                  column=&quot;dept_id&quot;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;/collection&gt;</span><br><span class="line">  &lt;/resultMap&gt;</span><br><span class="line">  &lt;select id=&quot;getDeptAndEmpStepOne&quot; resultMap=&quot;DeptAndEmpStepOne&quot;&gt;</span><br><span class="line">      select *from  t_dept where  dept_id = #&#123;deptId&#125;</span><br><span class="line">  &lt;/select&gt;</span><br></pre></td></tr></table></figure>
<p>employees中：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">q &lt;select id=&quot;DeptAndDeptTwo&quot; resultType=&quot;com.example.demo.object.Emp&quot;&gt;</span><br><span class="line">        select  *from  t_emp where  dept_id=#&#123;deptId&#125;</span><br><span class="line">    &lt;/select&gt;</span><br></pre></td></tr></table></figure>
<h4 id="动态sql">动态sql:</h4>
<p>前段没有传递某些参数，而服务器获取这些参数，器结果为null；如果前端传来的表单文本框内容没有填写，后端获取的就是空字符串。</p>
<h6 id="if标签：">if标签：</h6>
<p>下面（代码2）是根据empName和age,gender来查找的，但是当empName为null或者空字符串的时候，会报sql语法错误（原因是拼接的时候empName那个sql片段没有拼接进去，可能拼接了后面的sql片段对了and)解决方法在在第一个if标签前面添加一个恒成立条件：方法2是用where标签</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select  *from  t_emp where  1 = 1 &lt;if test = &quot;emp.empName != null and emp.empName != &#x27;&#x27;&quot;&gt;</span><br><span class="line">    and emp_name = #&#123;emp.empName&#125;</span><br><span class="line"></span><br><span class="line">&lt;/if&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;getEmpsByCondition&quot; resultType=&quot;com.example.demo.object.Emp&quot;&gt;</span><br><span class="line">select  *from  t_emp where  &lt;if test = &quot;emp.empName != null and emp.empName != &#x27;&#x27;&quot;&gt;</span><br><span class="line">    emp_name = #&#123;emp.empName&#125;</span><br><span class="line"></span><br><span class="line">&lt;/if&gt;</span><br><span class="line">&lt;if test=&quot;emp.age !=null and emp.age != &#x27;&#x27;&quot; &gt;</span><br><span class="line">    and age = #&#123;emp.age&#125;</span><br><span class="line">&lt;/if&gt;</span><br><span class="line">&lt;if test=&quot;emp.gender != null and emp.gender!=&#x27;&#x27;&quot;&gt;</span><br><span class="line">    and gender = #&#123;emp.gender&#125;</span><br><span class="line">&lt;/if&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<p>注意上面的if标签中的属性要添加变量名，不然会报找不到empName的错误。<br>
<if test = "empName != null and empName != ''"><br>
emp_name = #{empName}<br>
</if>（这个会报错的）</p>
<h6 id="where">where:</h6>
<p><img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688383957268-bb9ca8b7-ef7c-438d-b045-e1745a67f96f.png#averageHue=%23f7f6f3&amp;clientId=u8aa2d897-50f1-4&amp;from=paste&amp;height=108&amp;id=u55e2024c&amp;originHeight=135&amp;originWidth=673&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=70114&amp;status=done&amp;style=none&amp;taskId=ua3be383d-c361-4141-b8dd-b3becf137d8&amp;title=&amp;width=538.4" alt="image.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;/select&gt;</span><br><span class="line">    &lt;select id=&quot;getEmpsByConditionWhere&quot; resultType=&quot;com.example.demo.object.Emp&quot;&gt;</span><br><span class="line">        select  *from  t_emp</span><br><span class="line">        &lt;where&gt;</span><br><span class="line">            &lt;if test = &quot;emp.empName != null and emp.empName != &#x27;&#x27;&quot;&gt;</span><br><span class="line">                and emp_name = #&#123;emp.empName&#125;</span><br><span class="line"></span><br><span class="line">            &lt;/if&gt;</span><br><span class="line">            &lt;if test=&quot;emp.age !=null and emp.age != &#x27;&#x27;&quot; &gt;</span><br><span class="line">                and age = #&#123;emp.age&#125;</span><br><span class="line">            &lt;/if&gt;</span><br><span class="line">            &lt;if test=&quot;emp.gender != null and emp.gender!=&#x27;&#x27;&quot;&gt;</span><br><span class="line">                and gender = #&#123;emp.gender&#125;</span><br><span class="line">            &lt;/if&gt;</span><br><span class="line">        &lt;/where&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/select&gt;</span><br></pre></td></tr></table></figure>
<h6 id="trim标签：">trim标签：</h6>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;/select&gt;</span><br><span class="line">   &lt;select id=&quot;getEmpsByConditionTrim&quot; resultType=&quot;com.example.demo.object.Emp&quot;&gt;</span><br><span class="line">       select  *from  t_emp</span><br><span class="line">       &lt;trim prefix=&quot;where&quot;  suffixOverrides=&quot;and&quot;&gt;</span><br><span class="line">           &lt;if test = &quot;emp.empName != null and emp.empName != &#x27;&#x27;&quot;&gt;</span><br><span class="line">                emp_name = #&#123;emp.empName&#125; and</span><br><span class="line"></span><br><span class="line">           &lt;/if&gt;</span><br><span class="line">           &lt;if test=&quot;emp.age !=null and emp.age != &#x27;&#x27;&quot; &gt;</span><br><span class="line">                age = #&#123;emp.age&#125; and</span><br><span class="line">           &lt;/if&gt;</span><br><span class="line">           &lt;if test=&quot;emp.gender != null and emp.gender!=&#x27;&#x27;&quot;&gt;</span><br><span class="line">                gender = #&#123;emp.gender&#125;</span><br><span class="line">           &lt;/if&gt;</span><br><span class="line">       &lt;/trim&gt;</span><br><span class="line"></span><br><span class="line">   &lt;/select&gt;</span><br></pre></td></tr></table></figure>
<p><trim> 标签是 MyBatis 中用于生成动态 SQL 的标签之一，它可以用于去除 SQL 语句中不必要的逗号、AND 或者 OR 等关键字，从而生成更加紧凑的 SQL 语句。<br>
<trim> 标签有以下属性：</p>
<ul>
<li>prefix：在 SQL 语句开头添加的字符串。</li>
<li>suffix：在 SQL 语句结尾添加的字符串。</li>
<li>prefixOverrides：需要去除的 SQL 语句开头的字符串。</li>
<li>suffixOverrides：需要去除的 SQL 语句结尾的字符串。</li>
</ul>
<p><trim> 标签的语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;trim prefix=&quot;&quot; suffix=&quot;&quot; prefixOverrides=&quot;&quot; suffixOverrides=&quot;&quot;&gt;</span><br><span class="line">  SQL statement</span><br><span class="line">&lt;/trim&gt;</span><br></pre></td></tr></table></figure>
<p>其中，prefix 和 suffix 属性用于添加前缀和后缀，prefixOverrides 和 suffixOverrides 属性用于去除开头和结尾的字符串。<br>
下面是一个使用 <trim> 标签的示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;findUsersByCondition&quot; resultType=&quot;User&quot;&gt;</span><br><span class="line">  SELECT * FROM user</span><br><span class="line">  &lt;where&gt;</span><br><span class="line">    &lt;trim prefix=&quot;AND&quot; prefixOverrides=&quot;AND (&quot;&gt;</span><br><span class="line">      &lt;if test=&quot;username != null&quot;&gt;</span><br><span class="line">        username = #&#123;username&#125;</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;age != null&quot;&gt;</span><br><span class="line">        AND age = #&#123;age&#125;</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">    &lt;/trim&gt;</span><br><span class="line">  &lt;/where&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<p>在这个示例中，<trim> 标签用于去除 SQL 语句中多余的 AND 关键字。如果 username 或者 age 参数不为空，则会生成类似于 AND username = #{username} AND age = #{age} 的 SQL 语句，否则只会生成 SELECT * FROM user 的 SQL 语句。</p>
<h6 id="choose-when-otherwise等标签">choose,when,otherwise等标签</h6>
<p><img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688384511573-607a6751-25cb-46ca-b1f5-51cc3930e8c8.png#averageHue=%23f7f5ef&amp;clientId=u8aa2d897-50f1-4&amp;from=paste&amp;height=60&amp;id=u0073258c&amp;originHeight=75&amp;originWidth=360&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=25763&amp;status=done&amp;style=none&amp;taskId=ucb5a20f8-c3ba-4791-91b7-5e77c316ed1&amp;title=&amp;width=288" alt="image.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;findUsers&quot; resultType=&quot;User&quot;&gt;</span><br><span class="line">  SELECT * FROM users</span><br><span class="line">  &lt;where&gt;</span><br><span class="line">    &lt;choose&gt;</span><br><span class="line">      &lt;when test=&quot;username != null&quot;&gt;</span><br><span class="line">        AND username = #&#123;username&#125;</span><br><span class="line">      &lt;/when&gt;</span><br><span class="line">      &lt;when test=&quot;email != null&quot;&gt;</span><br><span class="line">        AND email = #&#123;email&#125;</span><br><span class="line">      &lt;/when&gt;</span><br><span class="line">      &lt;otherwise&gt;</span><br><span class="line">        AND status = 1</span><br><span class="line">      &lt;/otherwise&gt;</span><br><span class="line">    &lt;/choose&gt;</span><br><span class="line">  &lt;/where&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<p>在这个示例中，<choose> 标签用于选择一个条件分支，如果 username 参数不为空，则会生成 AND username = #{username} 的 SQL 语句，否则如果 email 参数不为空，则会生成 AND email = #{email} 的 SQL 语句，否则会生成 AND status = 1 的 SQL 语句。<br>
<choose> 标签通常与 <when> 和 <otherwise> 标签配合使用。<when> 标签用于定义一个条件分支，<otherwise> 标签定义了一个默认的条件分支，它会在所有其他条件都不成立时执行。</p>
<h6 id="foreach">foreach:</h6>
<p>批量添加：注意<foreach>标签中的#{emp.empName}中的emp不能省略</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--如果以List传递过来，底层仍旧是map只不过是以list为键,如果以@Parame注解的参数，传递给@Parame的参数就是底层map的键--&gt;</span><br><span class="line">  &lt;insert id=&quot;insertMoreEmp&quot; &gt;</span><br><span class="line">      insert  into  t_emp values</span><br><span class="line">                              &lt;foreach collection=&quot;emps&quot; item=&quot;emp&quot; separator=&quot;,&quot;&gt;</span><br><span class="line">                                  (null,#&#123;emp.empName&#125;,#&#123;emp.age&#125;,#&#123;emp.gender&#125;,null)</span><br><span class="line">                              &lt;/foreach&gt;</span><br><span class="line">  &lt;/insert&gt;</span><br></pre></td></tr></table></figure>
<h4 id="Param">@Param</h4>
<p>@Param 是 MyBatis 中用于指定方法参数名称的注解。在 MyBatis 中，如果一个方法有多个参数，则必须使用 @Param 注解来指定每个参数的名称，以便 MyBatis 可以正确地将参数传递给 SQL 语句。<br>
@Param 注解有一个可选的 value 属性，用于指定参数的名称。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public interface UserMapper &#123;</span><br><span class="line">  List&lt;User&gt; findUsersByUsernameAndEmail(</span><br><span class="line">    @Param(&quot;username&quot;) String username,</span><br><span class="line">    @Param(&quot;email&quot;) String email);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在这个示例中，findUsersByUsernameAndEmail 方法有两个参数，分别是 username 和 email，并且使用 @Param 注解指定了它们的名称。在 SQL 语句中，可以使用 #{username} 和 #{email} 占位符来引用这两个参数。<br>
需要注意的是，如果方法只有一个参数，并且这个参数是一个简单类型（如 int、String 等），则可以不使用 @Param 注解。在这种情况下，MyBatis 会将参数默认命名为 arg0、arg1 等。但是，为了代码的可读性和可维护性，建议在所有情况下都使用 @Param 注解来指定参数名称。<br>
在 XML 映射文件中，可以使用 parameterType 属性来指定方法参数的类型，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;findUsersByUsernameAndEmail&quot; resultType=&quot;User&quot;&gt;</span><br><span class="line">  SELECT * FROM users</span><br><span class="line">  WHERE username = #&#123;username&#125; AND email = #&#123;email&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<p>在这个示例中，parameterType 属性指定了方法参数的类型为 java.util.Map，并且在 SQL 语句中使用了 #{username} 和 #{email} 占位符来引用参数。如果使用了 @Param 注解，则可以省略 parameterType 属性。</p>
<h4 id="List-Emp-list-Arrays-asList-emp1-emp2-emp3">List<Emp> list = Arrays.asList(emp1,emp2,emp3);</h4>
<p>这段代码使用了 Java 的 Arrays.asList() 方法将多个 Emp 对象封装成一个 List<Emp> 对象。<br>
Arrays.asList() 方法是 Java 中一个常用的工具方法，它可以将一个数组转换为一个 List 对象。在这个示例中，Arrays.asList() 方法将多个 Emp 对象封装成一个 List<Emp> 对象，并将这个 List<Emp> 对象赋给了变量 list。<br>
需要注意的是，Arrays.asList() 方法返回的 List 对象是一个固定大小的 List 对象，不能进行添加或删除操作。如果需要进行添加或删除操作，可以使用 ArrayList 等可变大小的 List 实现类来创建 List 对象。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Emp&gt; list = new ArrayList&lt;&gt;();</span><br><span class="line">list.add(emp1);</span><br><span class="line">list.add(emp2);</span><br><span class="line">list.add(emp3);</span><br></pre></td></tr></table></figure>
<p>在这个示例中，使用 ArrayList 来创建 List<Emp> 对象，并分别添加了三个 Emp 对象。ArrayList 是一个可变大小的 List 实现类，可以进行添加和删除操作。</p>
<h4 id="foreach标签实现批量删除（通过数组）：">foreach标签实现批量删除（通过数组）：</h4>
<p><img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688389747602-947eb4c7-4bfd-4da1-a301-37291e46e86d.png#averageHue=%23f8f7f3&amp;clientId=u8aa2d897-50f1-4&amp;from=paste&amp;height=109&amp;id=ub9b07fed&amp;originHeight=136&amp;originWidth=495&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=50545&amp;status=done&amp;style=none&amp;taskId=u814a3966-0855-45ff-951d-b2b8fbff284&amp;title=&amp;width=396" alt="image.png"><br>
方法1:<img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688389723082-9bb1dfaa-9058-436c-9232-69886af988cf.png#averageHue=%23f4e8be&amp;clientId=u8aa2d897-50f1-4&amp;from=paste&amp;height=88&amp;id=udc12c1a4&amp;originHeight=110&amp;originWidth=598&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=44948&amp;status=done&amp;style=none&amp;taskId=uf6b698b0-12f4-479a-a3af-4344566010d&amp;title=&amp;width=478.4" alt="image.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;delete id=&quot;deleteMoreEmp&quot;&gt;</span><br><span class="line">     delete  from t_emp where emp_id in </span><br><span class="line"></span><br><span class="line">                            &lt;foreach collection=&quot;empIds&quot; item=&quot;empId&quot; separator=&quot;,&quot; open=&quot;(&quot; close=&quot;)&quot;&gt;</span><br><span class="line">                                #&#123;empId&#125;</span><br><span class="line">                            &lt;/foreach&gt;</span><br><span class="line"></span><br><span class="line"> &lt;/delete&gt;</span><br></pre></td></tr></table></figure>
<p>在 <delete> 标签中使用了 <foreach> 标签，将 empIds 集合中的多个 empId 值循环插入到 SQL 语句中。其中，collection 属性指定了要循环遍历的集合，item 属性指定了集合中的每个 empId 值在 SQL 语句中的占位符名称。，separator 属性的值为逗号 ,，表示在循环遍历 empIds 集合时，每个 empId 值之间会使用逗号作为分隔符分隔。这样，在 SQL 语句中生成的 IN 子句就会以逗号分隔 emp_id 值。open 属性的值为左括号 (，close 属性的值为右括号 )，表示在循环遍历 empIds 集合时，会在 emp_id 值的前后分别添加一个左括号和一个右括号，以便生成正确的 IN 子句。</p>
<h4 id="数据库中的某条数据不为空但是利用mybatis中的mapper查询的时候返回的部分属性为null的原因：">数据库中的某条数据不为空但是利用mybatis中的mapper查询的时候返回的部分属性为null的原因：</h4>
<p>1，返回为null的属性没有正确的get和set方法或者返回的类没有无参构造方法。<br>
2.数据库中的列的数据类型和类中的数据类型不一致<br>
3.<strong>有get和set方法但是类中的属性和数据库列中的名字（不区分大小写）不一样（可以通过resultMap重新映射或者设置别名解决</strong><br>
4。查询语句正确指定数据库列的别名（可以通过在 SQL 语句中使用 SELECT 子句并为列指定别名来指定列的别名。例如，假设要查询 employees 表中的 emp_id 和 emp_name 两列，可以使用以下 SQL 语句：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT emp_id AS empId, emp_name AS empName FROM employees</span><br></pre></td></tr></table></figure>
<p>在这个 SQL 语句中，使用 AS 关键字为 emp_id 和 emp_name 列指定了别名 empId 和 empName。这样，在 MyBatis 将查询结果映射为 Emp 对象时，就会将 empId 列的值映射到 Emp 对象的 empId 属性中，将 empName 列的值映射到 Emp 对象的 empName 属性中。<br>
如果使用 MyBatis 提供的 Mapper XML 文件来编写 SQL 语句，可以在 <resultMap> 标签中使用 <result> 标签来指定列的别名。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;resultMap id=&quot;empResultMap&quot; type=&quot;Emp&quot;&gt;</span><br><span class="line">  &lt;result column=&quot;emp_id&quot; property=&quot;empId&quot;/&gt;</span><br><span class="line">  &lt;result column=&quot;emp_name&quot; property=&quot;empName&quot;/&gt;</span><br><span class="line">&lt;/resultMap&gt;</span><br><span class="line"></span><br><span class="line">&lt;select id=&quot;selectEmps&quot; resultMap=&quot;empResultMap&quot;&gt;</span><br><span class="line">  SELECT emp_id, emp_name FROM employees</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<p>在这个示例中，使用 <result> 标签为 emp_id 和 emp_name 列指定了别名 empId 和 empName。在 <select> 标签中，使用 resultMap 属性指定了要使用的结果映射规则。这样，在 MyBatis 映射查询结果时，就会将 empId 列的值映射到 Emp 对象的 empId 属性中，将 empName 列的值映射到 Emp 对象的 empName 属性中。）</p>
<h4 id="sql标签：">sql标签：</h4>
<p><img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688389907859-50743d07-8203-4331-88fa-a19ddf64a86e.png#averageHue=%23f7f8f3&amp;clientId=u8aa2d897-50f1-4&amp;from=paste&amp;height=110&amp;id=ubc3e8d00&amp;originHeight=137&amp;originWidth=492&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=46143&amp;status=done&amp;style=none&amp;taskId=u491a6728-31dc-42f3-80fb-0e67c23ee9c&amp;title=&amp;width=393.6" alt="image.png"><br>
MyBatis 中的 <sql> 标签用于定义可重用的 SQL 片段，可以在 Mapper XML 文件中定义 <sql> 标签，并在需要使用这些 SQL 片段的地方引用它们。<br>
例如，可以在 Mapper XML 文件中定义一个 <sql> 标签，用于定义一个可重用的 SQL 片段：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;sql id=&quot;selectColumns&quot;&gt;</span><br><span class="line">  emp_id, emp_name, emp_salary</span><br><span class="line">&lt;/sql&gt;</span><br></pre></td></tr></table></figure>
<p>在这个示例中，<sql> 标签的 id 属性指定了 SQL 片段的名称为 selectColumns，<sql> 标签的内容为 SQL 片段的内容，包括查询的列名。<br>
在需要使用这个 SQL 片段的地方，可以使用 ${} 占位符来引用它。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;selectEmp&quot; resultType=&quot;Emp&quot;&gt;</span><br><span class="line">  select &lt;include refid=&quot;selectColumns&quot;/&gt; from t_emp</span><br><span class="line">  where emp_id = #&#123;empId&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<p>在这个示例中，使用 <include> 标签引用了之前定义的 SQL 片段，refid 属性指定了 SQL 片段的名称为 selectColumns。这样，在生成 SQL 语句时，MyBatis 会将 <include> 标签替换为 SQL 片段的内容，生成完整的 SQL 语句。<br>
使用 <sql> 标签可以避免在 Mapper XML 文件中重复编写相同的 SQL 片段，提高了代码的重用性和可维护性。同时，使用 <sql> 标签还可以将复杂的 SQL 语句拆分为多个可重用的 SQL 片段，使 SQL 语句更加清晰易懂。</p>
<h4 id="Mybatis的一级缓存：">Mybatis的一级缓存：</h4>
<p>MyBatis 的一级缓存是指在同一个 SqlSession 中，对于相同的查询语句和查询条件，MyBatis 可以将查询结果缓存起来，以便后续的查询可以直接使用缓存中的数据，而不需要再次执行 SQL 查询。<br>
一级缓存是 MyBatis 默认开启的，它存储在 SqlSession 中，可以提高查询效率，减少与数据库的交互次数。在同一个 SqlSession 中，如果多次查询相同的数据，那么只有第一次查询会触发 SQL 查询，后续的查询都会从缓存中获取数据，从而提高查询效率。<br>
一级缓存的实现方式是将查询结果存储在一个 Map 对象中，Map 的键值是查询语句和查询条件的组合，Map 的值是查询结果。在同一个 SqlSession 中，如果执行了更新、插入或删除操作，那么 MyBatis 会自动清空一级缓存，以保证缓存中的数据与数据库保持一致。<br>
需要注意的是，一级缓存的作用范围仅限于同一个 SqlSession 中，如果使用多个 SqlSession 进行查询，那么每个 SqlSession 都会独立地维护自己的一级缓存。因此，在某些情况下，如果需要共享缓存，可以考虑使用 MyBatis 的二级缓存。<br>
另外，MyBatis 还提供了一些配置选项，可以对一级缓存进行调整或禁用。例如，可以通过设置 localCacheScope 属性为 STATEMENT 来禁用一级缓存，或者通过设置 flushCache=“true” 属性来强制清空一级缓存。<br>
<img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688396424415-687b36d7-e3c3-4a5f-9f23-a02fb1b58f9b.png#averageHue=%23f8f6f2&amp;clientId=u8aa2d897-50f1-4&amp;from=paste&amp;height=73&amp;id=u8026bf37&amp;originHeight=91&amp;originWidth=652&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=41428&amp;status=done&amp;style=none&amp;taskId=uc01ff294-247e-46ce-8889-263a6b86699&amp;title=&amp;width=521.6" alt="image.png"></p>
<h4 id="一级缓存失效的方法：">一级缓存失效的方法：</h4>
<p><img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688396541434-1cd69218-c8aa-41cf-aaf4-5a5c0eef141d.png#averageHue=%23f3f0e3&amp;clientId=u8aa2d897-50f1-4&amp;from=paste&amp;height=76&amp;id=uefa3461d&amp;originHeight=95&amp;originWidth=539&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=52768&amp;status=done&amp;style=none&amp;taskId=u3b11ab90-74ff-40ea-879d-d74e672b542&amp;title=&amp;width=431.2" alt="image.png"><img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688396659083-f001f90c-23d1-4c6a-9a20-94fbd5b384b3.png#averageHue=%230c105a&amp;clientId=u8aa2d897-50f1-4&amp;from=paste&amp;height=26&amp;id=u1fa572bb&amp;originHeight=33&amp;originWidth=430&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=5630&amp;status=done&amp;style=none&amp;taskId=uc3449976-cac5-4456-b241-d26d5e2d19b&amp;title=&amp;width=344" alt="image.png"><img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688396689464-0d97e285-c710-4b7a-a84d-259467bc55ae.png#averageHue=%230a0806&amp;clientId=u8aa2d897-50f1-4&amp;from=paste&amp;height=186&amp;id=u2d7e60d4&amp;originHeight=233&amp;originWidth=1205&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=58398&amp;status=done&amp;style=none&amp;taskId=u0dedc2b5-5b5e-4488-b223-9360949ed46&amp;title=&amp;width=964" alt="image.png"><br>
执行结果的日志有2次sql语句，表示从数据库中进行了2次操作</p>
<h4 id="Mybatis的二级缓存：">Mybatis的二级缓存：</h4>
<p>MyBatis 的二级缓存是指在多个 SqlSession 之间共享查询结果的缓存机制。与一级缓存不同，二级缓存的作用范围不仅限于同一个 SqlSession，而是可以跨越多个 SqlSession，甚至是多个应用程序实例。使用二级缓存可以减少与数据库的交互次数，提高应用程序的性能。<br>
二级缓存的实现方式是将查询结果存储在一个可插拔的缓存实现中，可以选择使用 Ehcache、Redis 等第三方缓存框架，也可以使用 MyBatis 内置的缓存实现。在同一个应用程序实例中，多个 SqlSession 可以共享同一个缓存实现，从而实现数据的共享。<br>
开启二级缓存需要在 Mapper XML 文件中配置 <cache> 标签，并在 MyBatis 配置文件中开启二级缓存功能。例如，可以在 MyBatis 配置文件中添加以下配置：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">  &lt;settings&gt;</span><br><span class="line">    &lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">  &lt;/settings&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>
<p>在 Mapper XML 文件中，可以添加 <cache> 标签来配置二级缓存的相关属性。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;cache</span><br><span class="line">    eviction=&quot;LRU&quot;</span><br><span class="line">    flushInterval=&quot;60000&quot;</span><br><span class="line">    size=&quot;1024&quot;</span><br><span class="line">    readOnly=&quot;true&quot;/&gt;</span><br></pre></td></tr></table></figure>
<p>在这个示例中，eviction 属性指定了缓存的清除策略为 LRU（Least Recently Used），flushInterval 属性指定了缓存的自动刷新时间为 60 秒，size 属性指定了缓存的最大大小为 1024，readOnly 属性指定了缓存是否只读。这些属性的含义和配置方式可以参考 MyBatis 的官方文档。<br>
需要注意的是，二级缓存有一些限制和注意事项。例如，二级缓存中存储的数据是序列化后的对象，可能会导致性能下降；同时，如果数据被频繁地更新，那么缓存的命中率会降低，甚至会出现脏数据。因此，在使用二级缓存时，需要根据具体的业务场景进行适当的配置和调整。<br>
<img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688397300290-7655560e-531b-452a-ac89-479a70cb3094.png#averageHue=%23f2eee3&amp;clientId=u8aa2d897-50f1-4&amp;from=paste&amp;height=150&amp;id=u7faa80f9&amp;originHeight=187&amp;originWidth=724&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=119020&amp;status=done&amp;style=none&amp;taskId=u450db797-c8a8-4f62-abea-2d36114a7a2&amp;title=&amp;width=579.2" alt="image.png"><img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688397344021-b232c95d-45e8-4f83-b402-09c4fa5359ed.png#averageHue=%23efebdc&amp;clientId=u8aa2d897-50f1-4&amp;from=paste&amp;height=49&amp;id=u2cf0333d&amp;originHeight=61&amp;originWidth=524&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=30065&amp;status=done&amp;style=none&amp;taskId=u93b7c066-d641-44c1-9212-6c90f53913d&amp;title=&amp;width=419.2" alt="image.png"></p>
<h4 id="Mybatis缓存查询顺序：">Mybatis缓存查询顺序：</h4>
<p>一级缓存只有在关闭或者提交的时候才会在二级缓存中生成数据。</p>
<h4 id="整合第三方缓存：">整合第三方缓存：</h4>
<p>是在二级缓存的基础上存在的。</p>
<h4 id="Mybatis的逆向工程：">Mybatis的逆向工程：</h4>
<p>1.在pom.xml增加插件的配置文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;plugin&gt;</span><br><span class="line">                &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;mybatis-generator-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">                &lt;version&gt;1.3.0&lt;/version&gt;</span><br><span class="line"></span><br><span class="line">                &lt;!-- 插件的依赖    --&gt;</span><br><span class="line">                &lt;dependencies&gt;</span><br><span class="line">                &lt;!-- 逆向工程的核心依赖    --&gt;</span><br><span class="line">                &lt;dependency&gt;</span><br><span class="line">               &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;mybatis-generator-core&lt;/artifactId&gt;</span><br><span class="line">                &lt;version&gt;1.3.2&lt;/version&gt;</span><br><span class="line">                &lt;/dependency&gt;</span><br><span class="line">                &lt;!-- MySQL驱动    --&gt;</span><br><span class="line">                &lt;dependency&gt;</span><br><span class="line">                &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">               &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">                &lt;version&gt;8.0.16&lt;/version&gt;</span><br><span class="line">              &lt;/dependency&gt;</span><br><span class="line">               &lt;/dependencies&gt;</span><br><span class="line">                &lt;/plugin&gt;</span><br></pre></td></tr></table></figure>
<p>2.新增generatoeConfig.xml配置文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE generatorConfiguration</span><br><span class="line">       PUBLIC &quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</span><br><span class="line">        &quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;&gt;</span><br><span class="line">        &lt;generatorConfiguration&gt;</span><br><span class="line">        &lt;!--</span><br><span class="line">targetRuntime: 执行生成的逆向工程的版本</span><br><span class="line">MyBatis3Simple: 生成基本的CRUD（清新简洁版）</span><br><span class="line">MyBatis3: 生成带条件的CRUD（奢华尊享版）</span><br><span class="line"> --&gt;</span><br><span class="line">        &lt;context id=&quot;DB2Tables&quot; targetRuntime=&quot;MyBatis3&quot;&gt;</span><br><span class="line">        &lt;!-- 数据库的连接信息    --&gt;</span><br><span class="line">        &lt;jdbcConnection driverClass=&quot;com.mysql.cj.jdbc.Driver&quot;</span><br><span class="line">        connectionURL=&quot;jdbc:mysql://localhost:3306/myemployees?serverTimezone=UTC&quot;</span><br><span class="line">        userId=&quot;root&quot;</span><br><span class="line">       password=&quot;A86789234&quot;&gt;</span><br><span class="line">        &lt;/jdbcConnection&gt;</span><br><span class="line">        &lt;!-- javaBean的生成策略targetPackage是javaBean生成的目标包，targetProject是生成的路径，.表示</span><br><span class="line">        项目根目录路径，..表示上一级路径,配置这种类似的时候注意路径--&gt;</span><br><span class="line">      &lt;javaModelGenerator targetPackage=&quot;com.example.demo.pojo&quot;</span><br><span class="line">        targetProject=&quot;.\src\main\java&quot;&gt;</span><br><span class="line">          &lt;!--能否使用子包--&gt;</span><br><span class="line">       &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">          &lt;!--把当前字段的前后空格字符去掉生成实体类的属性--&gt;</span><br><span class="line">      &lt;property name=&quot;trimStrings&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">       &lt;/javaModelGenerator&gt;</span><br><span class="line">       &lt;!-- SQL映射文件的生成策略 生成在com.example.mybatis.mapper包中的.\src\main\resources路径下   --&gt;</span><br><span class="line">        &lt;sqlMapGenerator targetPackage=&quot;com.example.demo.mapper&quot;</span><br><span class="line">        targetProject=&quot;.\src\main\resources&quot;&gt;</span><br><span class="line">       &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">        &lt;/sqlMapGenerator&gt;</span><br><span class="line">       &lt;!-- Mapper接口的生成策略    --&gt;</span><br><span class="line">        &lt;javaClientGenerator type=&quot;XMLMAPPER&quot;</span><br><span class="line">        targetPackage=&quot;com.example.demo.mapper&quot; targetProject=&quot;.\src\main\java&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">        &lt;/javaClientGenerator&gt;</span><br><span class="line">        &lt;!-- 逆向分析的表    --&gt;</span><br><span class="line">       &lt;!-- tableName设置为*号，可以对应所有表，此时不写domainObjectName --&gt;</span><br><span class="line">        &lt;!-- domainObjectName属性指定生成出来的实体类的类名    --&gt;</span><br><span class="line">        &lt;table tableName=&quot;t_emp&quot; domainObjectName=&quot;Emp&quot;/&gt;</span><br><span class="line">        &lt;table tableName=&quot;t_dept&quot; domainObjectName=&quot;Dept&quot;/&gt;</span><br><span class="line">        &lt;/context&gt;</span><br><span class="line">        &lt;/generatorConfiguration&gt;</span><br></pre></td></tr></table></figure>
<p><img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688456443867-c4b537bf-6dc4-4261-90a3-20cb0e92b210.png#averageHue=%23faf9f5&amp;clientId=u378e3c4c-7292-4&amp;from=paste&amp;height=164&amp;id=ue439f11f&amp;originHeight=205&amp;originWidth=396&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=49632&amp;status=done&amp;style=none&amp;taskId=u384443b0-43f4-4288-a120-e26c7288230&amp;title=&amp;width=316.8" alt="image.png">insert和insertSelective的区别：如果某个属性为null的时候，insert是给改属性对应的列赋值为null,(如果该列有默认值就不会把改列赋值为默认值）,insertSelective是当某个属性为null的时候，不会把该属性对应的列插入数据，使其为默认值（如果有默认值的话）</p>
<h6 id="3-生成的特殊EmpExample类和EmpMapper接口的分析：">3.生成的特殊EmpExample类和EmpMapper接口的分析：</h6>
<p>MyBatis3 逆向工程生成的 EmpExample 类是用于封装 MyBatis 查询条件的一个实例。EmpExample 类主要包含以下属性和方法：<br>
<strong>属性：</strong></p>
<ul>
<li>oredCriteria：一个 List<Criteria> 类型的属性，用于存放多个 Criteria 对象，每个 Criteria 对象代表一个查询条件。</li>
<li>orderByClause：一个 String 类型的属性，用于存放查询结果的排序方式。相当于 SQL 中的 order by 子句。</li>
<li>distinct：一个 boolean 类型的属性，用于指定查询结果是否去重。相当于 SQL 中的 distinct 关键字。</li>
</ul>
<p><strong>方法：</strong></p>
<ul>
<li>EmpExample()：无参构造方法，用于创建一个 EmpExample 对象。</li>
<li>createCriteria()：创建一个 Criteria 对象，并将该对象添加到 oredCriteria 列表中。</li>
<li>getOredCriteria()：获取 oredCriteria 列表，用于设置多个查询条件的情况。</li>
<li>setOrderByClause(String orderByClause)：设置查询结果的排序方式。</li>
<li>getOrderByClause()：获取查询结果的排序方式。</li>
<li>setDistinct(boolean distinct)：设置查询结果是否去重。</li>
<li>isDistinct()：获取查询结果是否去重。</li>
<li>clear()：清空查询条件。</li>
</ul>
<p>通过 EmpExample 类，可以方便地构建查询条件，实现更加灵活的查询操作。可以通过 createCriteria() 方法创建一个 Criteria 对象，然后通过 Criteria 对象的方法设置查询条件，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">EmpExample example = new EmpExample();</span><br><span class="line">Criteria criteria = example.createCriteria();</span><br><span class="line">criteria.andNameEqualTo(&quot;Tom&quot;);</span><br><span class="line">criteria.andAgeGreaterThan(20);</span><br></pre></td></tr></table></figure>
<p>这个示例代码中，首先创建一个 EmpExample 对象，然后调用 createCriteria() 方法创建一个 Criteria 对象，使用 andNameEqualTo(“Tom”) 方法和 andAgeGreaterThan(20) 方法设置查询条件，表示查询名称为 Tom 并且年龄大于 20 的数据。其中Criteria是内部类。<br>
除了设置查询条件之外，还可以通过 setOrderByClause() 方法设置查询结果的排序方式，通过 setDistinct() 方法设置查询结果是否去重。最后，可以通过调用 empMapper.selectByExample(example) 方法执行查询操作，获取查询结果列表。<br>
<img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688472828411-60ffd7e0-98c9-44f1-a245-fe4adad4e778.png#averageHue=%233c4144&amp;clientId=u25015969-4d62-4&amp;from=paste&amp;height=362&amp;id=ub36475a5&amp;originHeight=453&amp;originWidth=551&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=40207&amp;status=done&amp;style=none&amp;taskId=ufcf6ef16-df2c-4ba8-a361-5f1d5ed75b9&amp;title=&amp;width=440.8" alt="image.png">其实还有一些内部类，在使用的时候可以通过图来快速查看。<br>
<img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688472719439-4c5f8b0a-b6f8-47f9-af20-38bb50934042.png#averageHue=%233c4242&amp;clientId=u25015969-4d62-4&amp;from=paste&amp;height=375&amp;id=ubc2c4168&amp;originHeight=469&amp;originWidth=558&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=47881&amp;status=done&amp;style=none&amp;taskId=u0162f579-9579-4c01-aa03-7b36c40064f&amp;title=&amp;width=446.4" alt="image.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.int insertSelective(Emp record)：选择性地插入一条记录到 Emp 表中，只插入指定属性不为 null 的字段。</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">EmpMapper empMapper = sqlSession.getMapper(EmpMapper.class);</span><br><span class="line"></span><br><span class="line">// 查询操作</span><br><span class="line">EmpExample example = new EmpExample();</span><br><span class="line">example.createCriteria().andNameEqualTo(&quot;Tom&quot;);</span><br><span class="line">List&lt;Emp&gt; empList = empMapper.selectByExample(example);</span><br><span class="line"></span><br><span class="line">// 插入操作</span><br><span class="line">Emp emp = new Emp();</span><br><span class="line">emp.setName(&quot;Jerry&quot;);</span><br><span class="line">emp.setAge(30);</span><br><span class="line">int rows = empMapper.insert(emp);</span><br><span class="line"></span><br><span class="line">// 更新操作</span><br><span class="line">Emp emp = new Emp();</span><br><span class="line">emp.setId(1);</span><br><span class="line">emp.setName(&quot;Tom&quot;);</span><br><span class="line">int rows = empMapper.updateByPrimaryKey(emp);</span><br><span class="line"></span><br><span class="line">// 删除操作</span><br><span class="line">int rows = empMapper.deleteByPrimaryKey(1);</span><br></pre></td></tr></table></figure>
<h4 id="分页功能；">分页功能；</h4>
<p><img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688467784015-e3f4255f-74c4-4104-b1c0-4d6d725cc6af.png#averageHue=%23fbfbfa&amp;clientId=u378e3c4c-7292-4&amp;from=paste&amp;height=98&amp;id=u21bfceb8&amp;originHeight=123&amp;originWidth=305&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=24673&amp;status=done&amp;style=none&amp;taskId=u0e79f71a-6dd2-4a0c-896c-ffe26862945&amp;title=&amp;width=244" alt="image.png"><br>
在pom.xml中添加分页插件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;plugins&gt;</span><br><span class="line">        &lt;plugin interceptor=&quot;com.github.pagehelper.PageInterceptor&quot;&gt;&lt;/plugin&gt;</span><br><span class="line">    &lt;/plugins&gt;</span><br></pre></td></tr></table></figure>
<p>可以通过IDEA搜索获取插件的地址<img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688468705713-fca2e56f-8e44-439f-8706-467ae1d38c42.png#averageHue=%23c1b040&amp;clientId=u378e3c4c-7292-4&amp;from=paste&amp;height=98&amp;id=ud86358a9&amp;originHeight=122&amp;originWidth=862&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=15158&amp;status=done&amp;style=none&amp;taskId=uf8a27513-52c4-4f2b-9024-a2ac900ba32&amp;title=&amp;width=689.6" alt="image.png"></p>
<h4 id="开启分页查询：PageHelper-startPage-1-4">开启分页查询：PageHelper.startPage(1,4);</h4>
<p><strong>PageHelper.startPage(1,4) 是一个 Mybatis 分页插件的方法，它的作用是在执行查询之前设置分页参数，表示从第 1 页开始，每页显示 4 条记录。PageHelper 会自动拦截查询语句，添加 limit 子句，实现物理分页</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public  void  testPage() throws IOException &#123;</span><br><span class="line">       InputStream is =  Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;);</span><br><span class="line">       SqlSessionFactoryBuilder sqlSessionFactoryBuilder = new</span><br><span class="line">               SqlSessionFactoryBuilder();</span><br><span class="line">       SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.build(is);</span><br><span class="line">       SqlSession sqlSession = sqlSessionFactory.openSession(true);</span><br><span class="line">       EmpMapper emp = sqlSession.getMapper(EmpMapper.class);</span><br><span class="line">       //查询功能前开启分页</span><br><span class="line">       Page&lt;Object&gt; page = PageHelper.startPage(1,4);</span><br><span class="line">       List&lt;Emp&gt; list = emp.selectByExample(null);</span><br><span class="line">       System.out.println(list);</span><br><span class="line">       System.out.println(page);</span><br><span class="line"></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p><strong>显示的结果为：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">19:36:56.157 [main] DEBUG org.apache.ibatis.datasource.pooled.PooledDataSource - Checked out connection 417301556 from pool.</span><br><span class="line">19:36:56.159 [main] DEBUG com.example.demo.mapper.EmpMapper.selectByExample_COUNT - ==&gt;  Preparing: SELECT count(0) FROM t_emp</span><br><span class="line">19:36:56.180 [main] DEBUG com.example.demo.mapper.EmpMapper.selectByExample_COUNT - ==&gt; Parameters: </span><br><span class="line">19:36:56.197 [main] DEBUG com.example.demo.mapper.EmpMapper.selectByExample_COUNT - &lt;==      Total: 1</span><br><span class="line">19:36:56.199 [main] DEBUG com.example.demo.mapper.EmpMapper.selectByExample - ==&gt;  Preparing: select emp_id, emp_name, age, gender, dept_id from t_emp LIMIT ?</span><br><span class="line">19:36:56.199 [main] DEBUG com.example.demo.mapper.EmpMapper.selectByExample - ==&gt; Parameters: 4(Integer)</span><br><span class="line">19:36:56.202 [main] DEBUG com.example.demo.mapper.EmpMapper.selectByExample - &lt;==      Total: 4</span><br><span class="line">Page&#123;count=true, pageNum=1, pageSize=4, startRow=0, endRow=4, total=4, pages=1, reasonable=false, pageSizeZero=false&#125;[Emp&#123;empId=1, empName=&#x27;张三&#x27;, age=20, gender=&#x27;男&#x27;, deptId=1&#125;, Emp&#123;empId=2, empName=&#x27;李四&#x27;, age=21, gender=&#x27;女&#x27;, deptId=2&#125;, Emp&#123;empId=3, empName=&#x27;王五&#x27;, age=22, gender=&#x27;男&#x27;, deptId=3&#125;, Emp&#123;empId=4, empName=&#x27;赵六&#x27;, age=23, gender=&#x27;女&#x27;, deptId=1&#125;]</span><br><span class="line">Page&#123;count=true, pageNum=1, pageSize=4, startRow=0, endRow=4, total=4, pages=1, reasonable=false, pageSizeZero=false&#125;[Emp&#123;empId=1, empName=&#x27;张三&#x27;, age=20, gender=&#x27;男&#x27;, deptId=1&#125;, Emp&#123;empId=2, empName=&#x27;李四&#x27;, age=21, gender=&#x27;女&#x27;, deptId=2&#125;, Emp&#123;empId=3, empName=&#x27;王五&#x27;, age=22, gender=&#x27;男&#x27;, deptId=3&#125;, Emp&#123;empId=4, empName=&#x27;赵六&#x27;, age=23, gender=&#x27;女&#x27;, deptId=1&#125;]</span><br><span class="line"></span><br><span class="line">进程已结束,退出代码0</span><br><span class="line">//可以看出显示的list被分页显示了。</span><br><span class="line">//查询结果通过 selectByExample() 方法获取，这个方法的参数是一个空的 Example 对象，表示查询所有数据。查询结果是一个 Emp 对象列表。</span><br><span class="line">//最后，分页信息可以通过输出 Page 对象来获取。Page 是 PageHelper 插件提供的一个分页信息类，它包含了当前页码、每页数据条数、总数据条数等分页信息。在这个示例代码中，通过输出 page 对象来获取分页信息。</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>为什么输出的list会有多余的Pagr信息<br>
在这个示例代码中，输出的 list 中包含了多余的 Page 信息，是因为 PageHelper.startPage() 方法返回的是一个 Page 对象，这个 Page 对象包含了分页信息和查询结果列表。<br>
因此，在查询操作完成之后，如果直接输出查询结果列表，会同时输出 Page 对象的信息和查询结果列表的信息。如果只想输出查询结果列表，可以通过调用 Page 对象的 getList() 方法来获取查询结果列表，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Emp&gt; list = emp.selectByExample(null);</span><br><span class="line">Page&lt;Object&gt; page = PageHelper.startPage(1, 4);</span><br><span class="line">List&lt;Emp&gt; resultList = page.getResult();</span><br><span class="line">System.out.println(resultList);</span><br></pre></td></tr></table></figure>
<p>在这个示例代码中，先调用 emp.selectByExample(null) 方法获取查询结果列表，然后再调用 Page 对象的 getResult() 方法获取查询结果列表。这样就可以避免输出多余的 Page 信息。</p>
<h4 id="PageInfo">PageInfo&lt;&gt;</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">PageInfo&lt;T&gt; 是 MyBatis 分页插件 PageHelper 提供的一个分页信息类，用于封装分页信息和查询结果列表。</span><br><span class="line"></span><br><span class="line">PageInfo&lt;T&gt; 类包含以下属性：</span><br><span class="line"></span><br><span class="line">pageNum：当前页码。</span><br><span class="line"></span><br><span class="line">pageSize：每页显示的数据条数。</span><br><span class="line"></span><br><span class="line">size：当前页的实际数据条数。</span><br><span class="line"></span><br><span class="line">startRow：当前页第一条数据的行号。</span><br><span class="line"></span><br><span class="line">endRow：当前页最后一条数据的行号。</span><br><span class="line"></span><br><span class="line">total：总数据条数。</span><br><span class="line"></span><br><span class="line">pages：总页数。</span><br><span class="line"></span><br><span class="line">list：查询结果列表。</span><br><span class="line"></span><br><span class="line">prePage：上一页页码。</span><br><span class="line"></span><br><span class="line">nextPage：下一页页码。</span><br><span class="line"></span><br><span class="line">isFirstPage：是否为第一页。</span><br><span class="line"></span><br><span class="line">isLastPage：是否为最后一页。</span><br><span class="line"></span><br><span class="line">hasPreviousPage：是否有上一页。</span><br><span class="line"></span><br><span class="line">hasNextPage：是否有下一页。</span><br><span class="line"></span><br><span class="line">navigatePages：导航页码数。</span><br><span class="line"></span><br><span class="line">navigatepageNums：所有导航页号。</span><br><span class="line"></span><br><span class="line">PageInfo&lt;T&gt; 类常用的方法有：</span><br><span class="line"></span><br><span class="line">PageInfo(List&lt;T&gt; list, int navigatePages)：构造方法，用于创建一个 PageInfo 对象。</span><br><span class="line"></span><br><span class="line">getPageNum()：获取当前页码。</span><br><span class="line"></span><br><span class="line">getPageSize()：获取每页显示的数据条数。</span><br><span class="line"></span><br><span class="line">getSize()：获取当前页的实际数据条数。</span><br><span class="line"></span><br><span class="line">getStartRow()：获取当前页第一条数据的行号。</span><br><span class="line"></span><br><span class="line">getEndRow()：获取当前页最后一条数据的行号。</span><br><span class="line"></span><br><span class="line">getTotal()：获取总数据条数。</span><br><span class="line"></span><br><span class="line">getPages()：获取总页数。</span><br><span class="line"></span><br><span class="line">getList()：获取查询结果列表。</span><br><span class="line"></span><br><span class="line">getPrePage()：获取上一页页码。</span><br><span class="line"></span><br><span class="line">getNextPage()：获取下一页页码。</span><br><span class="line"></span><br><span class="line">isFirstPage()：判断是否为第一页。</span><br><span class="line"></span><br><span class="line">isLastPage()：判断是否为最后一页。</span><br><span class="line"></span><br><span class="line">hasPreviousPage()：判断是否有上一页。</span><br><span class="line"></span><br><span class="line">hasNextPage()：判断是否有下一页。</span><br><span class="line"></span><br><span class="line">getNavigatePages()：获取导航页码数。</span><br><span class="line"></span><br><span class="line">getNavigatepageNums()：获取所有导航页号。</span><br></pre></td></tr></table></figure>
<p>输出的信息”</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">PageInfo&#123;pageNum=1, pageSize=4, size=4, startRow=1, endRow=4, total=4, pages=1,</span><br><span class="line">list=Page&#123;count=true, pageNum=1, pageSize=4, startRow=0, endRow=4, total=4, pages=1,</span><br><span class="line">reasonable=false, pageSizeZero=false&#125;</span><br><span class="line">[Emp&#123;empId=1, empName=&#x27;张三&#x27;, age=20, gender=&#x27;男&#x27;, deptId=1&#125;,</span><br><span class="line">Emp&#123;empId=2, empName=&#x27;李四&#x27;, age=21, gender=&#x27;女&#x27;, deptId=2&#125;, Emp&#123;empId=3, </span><br><span class="line">empName=&#x27;王五&#x27;, age=22, gender=&#x27;男&#x27;, deptId=3&#125;, Emp&#123;empId=4, empName=&#x27;赵六&#x27;,</span><br><span class="line">age=23, gender=&#x27;女&#x27;, deptId=1&#125;], prePage=0, nextPage=0, isFirstPage=true, </span><br><span class="line">isLastPage=true, hasPreviousPage=false, hasNextPage=false, navigatePages=5, </span><br><span class="line">navigateFirstPage=1, navigateLastPage=1, navigatepageNums=[1]&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1>Spring:</h1>
<h4 id="spring-Framework简介：">spring Framework简介：</h4>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_46081816/article/details/123116901">SpringFramework教程_springframework的教程在官网哪里_疯了的程序员的博客-CSDN博客</a><br>
<a target="_blank" rel="noopener" href="https://blog.csdn.net/pedro7k/article/details/115415675">Java中的面向切面编程（AOP）_切面java_pedro7k的博客-CSDN博客</a></p>
<h4 id="Spring-IOC简介：">Spring IOC简介：</h4>
<p>Spring IOC 是 Spring 框架的核心，它是一种实现了 IoC（Inversion of Control，控制反转）原则的容器，负责创建、配置、管理和装配应用程序中的对象（称为 bean）<br>
<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/3.2.x/spring-framework-reference/html/beans.html">5. The IoC container</a><br>
。IoC 原则是指将对象的依赖关系（即它们需要协作的其他对象）交由外部容器或框架来设置，而不是由对象自己控制，从而实现对象之间的松耦合和动态绑定<br>
<a target="_blank" rel="noopener" href="https://www.baeldung.com/inversion-control-and-dependency-injection-in-spring">Just a moment…</a><br>
Spring IOC 容器有两种类型：BeanFactory 和 ApplicationContext。BeanFactory 是最基本的容器，提供了依赖注入（Dependency Injection，DI）的功能，即根据配置元数据（可以是 XML、注解或 Java 代码）来注入 bean 的属性或构造参数<br>
<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/3.2.x/spring-framework-reference/html/beans.html">5. The IoC container</a><br>
。ApplicationContext 是 BeanFactory 的子接口，提供了更多的高级功能，如 AOP 集成、消息资源处理、事件发布等<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/3.2.x/spring-framework-reference/html/beans.html">5. The IoC container</a>。</p>
<h4 id="Spring-DI-简介：">Spring DI 简介：</h4>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6959753065297608711">Spring Boot注解全攻略(四)：@Autowired - 掘金</a><br>
Spring DI（Dependency Injection，依赖注入）是 Spring Framework 的核心之一，它是实现 Spring IOC 的一种方式，用于解决对象之间的依赖关系。Spring DI 通过将对象之间的依赖关系的控制权反转给容器，来解决这些问题。具体来说，它在对象中定义依赖关系的接口，容器则负责实现这些接口并将实现注入到对象中</p>
<h4 id="Autowired注解详解">@Autowired注解详解</h4>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45755816/article/details/118654961">@Autowired注解详解——超详细易懂_子时不睡的博客-CSDN博客</a><br>
<a target="_blank" rel="noopener" href="https://juejin.cn/post/6959753065297608711">Spring Boot注解全攻略(四)：@Autowired - 掘金</a></p>
<h4 id="IOC容器在Spirng中的实现：">IOC容器在Spirng中的实现：</h4>
<p>基于XML的实现<br>
<img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688519520570-48f60a06-3c87-4d24-8461-0d81d7aaded3.png#averageHue=%23faf9f6&amp;clientId=u25015969-4d62-4&amp;from=paste&amp;height=108&amp;id=uadf55962&amp;originHeight=135&amp;originWidth=454&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=31539&amp;status=done&amp;style=none&amp;taskId=ucf41a50b-9c9b-4f1d-a0e9-16f546edf4c&amp;title=&amp;width=363.2" alt="image.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ClassPathXmlApplicationContext ioc = new ClassPathXmlApplicationContext(&quot;application.xml&quot;);</span><br></pre></td></tr></table></figure>
<p>解释：<br>
ClassPathXmlApplicationContext 类是 Spring 框架提供的一个实现类，它实现了 ApplicationContext 接口，用于创建和管理 Spring 容器。ClassPathXmlApplicationContext 类的构造器接受一个或多个字符串参数，表示要加载的 XML 配置文件的路径。这些路径是相对于类路径（classpath）的根目录的路径（也就是下图中的classes目录），如果以 / 开头，则表示相对于类路径的根目录，否则表示相对于当前类所在的包。在这行代码中，传入了一个字符串参数 “application.xml”，表示要加载类路径根目录下的 application.xml 文件，该文件定义了 Spring 容器中的 bean。通过这样的方式，就可以创建一个 Spring 容器，并根据 XML 配置文件来初始化和管理 bean。<br>
<img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688521560666-80ac8ae4-d4a3-4d2d-8c91-334fe069e83b.png#averageHue=%23412105&amp;clientId=u25015969-4d62-4&amp;from=paste&amp;height=165&amp;id=u376387fd&amp;originHeight=206&amp;originWidth=334&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=8596&amp;status=done&amp;style=none&amp;taskId=ub730a5b6-c25f-4fb1-9908-28be2b46f06&amp;title=&amp;width=267.2" alt="image.png"><br>
其实上面的代码可以改成下面的也可以正常运行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ClassPathXmlApplicationContext ioc = new ClassPathXmlApplicationContext(&quot;/ application.xml&quot;);</span><br></pre></td></tr></table></figure>
<h4 id="理解相对路径：">理解相对路径：</h4>
<p>在 Java 项目中，相对路径是指相对于某个参照点的路径，而不是绝对路径。相对路径的好处是可以避免硬编码文件的位置，使得代码更加灵活和可移植。相对路径的参照点可以有以下几种：</p>
<p>•  当前工作目录（working directory），即启动 Java 程序时所在的目录，或者通过 System.setProperty(“user.dir”, path) 方法设置的目录。如果使用 new File(path) 方法来访问文件，那么 path 就是相对于当前工作目录的路径。</p>
<p>•  当前类所在的包（package），即当前类的源文件所在的目录。如果使用 Class.getResource(path) 或 Class.getResourceAsStream(path) 方法来访问文件，那么 path 就是相对于当前类所在的包的路径，如果以 / 开头，则表示相对于类路径（classpath）的根目录。</p>
<p>•  类路径（classpath）的根目录，即 Java 程序加载类和资源的根目录。如果使用 ClassLoader.getResource(path) 或 ClassLoader.getResourceAsStream(path) 方法来访问文件，那么 path 就是相对于类路径的根目录的路径。</p>
<p>•  web 工程（web project）的根目录，即 web 工程部署到服务器上的根目录。如果使用 ServletContext.getResource(path) 或 ServletContext.getResourceAsStream(path) 方法来访问文件，那么 path 就是相对于 web 工程的根目录的路径。<br>
也就是相对路径也不一定是相对与当前类所在的目录。</p>
<h4 id="获取bean的三种方法：">获取bean的三种方法：</h4>
<p><img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688524352145-bbed48c4-4b9f-49fd-bc03-d572a3027197.png#averageHue=%23f9f8f4&amp;clientId=u25015969-4d62-4&amp;from=paste&amp;height=129&amp;id=uda18b195&amp;originHeight=161&amp;originWidth=665&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=78699&amp;status=done&amp;style=none&amp;taskId=u7546ee82-c37d-4698-81dd-fac681e2239&amp;title=&amp;width=532" alt="image.png"><br>
<img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688524508058-a35f1e6a-8385-4dc9-b2fe-35f006b386f9.png#averageHue=%23f7f4e4&amp;clientId=u25015969-4d62-4&amp;from=paste&amp;height=60&amp;id=uc187c925&amp;originHeight=75&amp;originWidth=510&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=45670&amp;status=done&amp;style=none&amp;taskId=ue427ec23-92d3-40b9-bcc6-bd086110dbb&amp;title=&amp;width=408" alt="image.png">person是Student实现的接口，可以根据接口获取bean,当然这个接口只能有一个实现类。<img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688524591560-ec1e07ae-2a22-40a0-beb4-3a0381331b21.png#averageHue=%23f6f5f1&amp;clientId=u25015969-4d62-4&amp;from=paste&amp;height=83&amp;id=u1459a351&amp;originHeight=104&amp;originWidth=678&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=63103&amp;status=done&amp;style=none&amp;taskId=ua96d2c56-915b-4fc7-93b1-8eab6045021&amp;title=&amp;width=542.4" alt="image.png"></p>
<h4 id="依赖注入setter注入：">依赖注入setter注入：</h4>
<h6 id="什么是依赖注入：">什么是依赖注入：</h6>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/taijianyu/article/details/2338311">什么是依赖注入_taijianyu的博客-CSDN博客</a><br>
。在 Spring 中，依赖注入是指 Spring 容器负责创建和管理 bean（即 Spring 容器中管理的对象），并根据 bean 之间的依赖关系，将依赖的 bean 注入到需要它的 bean 中，从而实现控制反转（Inversion of Control，IoC），即控制权由原来的 bean 转移到了 Spring 容器，从而降低了 bean 之间的耦合度，提高了代码的可维护性和可测试性。Spring 支持基于 XML、注解和 Java 代码的三种依赖注入方式，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    &lt;bean id=&quot;studentTwo&quot; class=&quot;com.example.demo.pojo.Student&quot;&gt;</span><br><span class="line">               &lt;constructor-arg value=&quot;1002&quot;&gt;&lt;/constructor-arg&gt;</span><br><span class="line">               &lt;constructor-arg value=&quot;李四&quot;&gt;&lt;/constructor-arg&gt;</span><br><span class="line">               &lt;constructor-arg value=&quot;33&quot;&gt;&lt;/constructor-arg&gt;</span><br><span class="line">               &lt;constructor-arg value=&quot;女&quot;&gt;&lt;/constructor-arg&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">&lt;!--只有一个 &lt;constructor-arg &gt;匹配的只有一个有参构造的构造器--&gt;</span><br></pre></td></tr></table></figure>
<h4 id="通过属性赋值，赋值为空：">通过属性赋值，赋值为空：</h4>
<p><property name="sex" value="null"></property>这给sex属性赋值为null字符串；<br>
<property name="sex" ><null/></property>这给sex属性赋值为空。</p>
<h4 id="array-标签"><array>标签</h4>
<p>在 Spring Framework 的 XML 配置文件中，可以使用 <array> 标签来定义一个数组类型的属性值。<array> 标签可以包含多个 <value> 或 <ref> 子标签，每个子标签表示数组中的一个元素。<br>
例如，假设我们有一个 Person 类，它包含一个 hobbies 属性，表示一个人的爱好。hobbies 属性是一个字符串数组类型的属性。我们可以在 XML 配置文件中使用 <array> 标签来定义这个数组类型的属性值：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;person&quot; class=&quot;com.example.Person&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;hobbies&quot;&gt;</span><br><span class="line">        &lt;array&gt;</span><br><span class="line">            &lt;value&gt;篮球&lt;/value&gt;</span><br><span class="line">            &lt;value&gt;足球&lt;/value&gt;</span><br><span class="line">            &lt;value&gt;游泳&lt;/value&gt;</span><br><span class="line">        &lt;/array&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<p>这个配置将会创建一个 Person 实例，并将 “篮球”、“足球” 和 “游泳” 作为 hobbies 属性的值。在这个配置中，<array> 标签包含了三个 <value> 子标签，每个子标签表示一个字符串类型的数组元素。<br>
除了 <value> 子标签外，<array> 标签还可以包含 <ref> 子标签，用于引用其他 Bean 的实例作为数组元素。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;basketball&quot; class=&quot;com.example.Hobby&quot; /&gt;</span><br><span class="line">&lt;bean id=&quot;football&quot; class=&quot;com.example.Hobby&quot; /&gt;</span><br><span class="line">&lt;bean id=&quot;swimming&quot; class=&quot;com.example.Hobby&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=&quot;person&quot; class=&quot;com.example.Person&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;hobbies&quot;&gt;</span><br><span class="line">        &lt;array&gt;</span><br><span class="line">            &lt;ref bean=&quot;basketball&quot; /&gt;</span><br><span class="line">            &lt;ref bean=&quot;football&quot; /&gt;</span><br><span class="line">            &lt;ref bean=&quot;swimming&quot; /&gt;</span><br><span class="line">        &lt;/array&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<p>这个配置定义了三个 Hobby 类型的 Bean，并将它们分别命名为 “basketball”、“football” 和 “swimming”。然后，它又在 <array> 标签中使用了三个 <ref> 子标签，分别引用了这三个 Bean 的实例，作为 Person 类的 hobbies 属性的值。</p>
<h4 id="集合类型的依赖注入：依赖注入中util标签的引用和List和Map集和的使用：其实所缺的命名空间的绑定可以在IDEA中自动补充的">集合类型的依赖注入：依赖注入中util标签的引用和List和Map集和的使用：其实所缺的命名空间的绑定可以在IDEA中自动补充的</h4>
<p>util 是 Spring 框架提供的一个命名空间，用于提供一些常用的工具和辅助类。在 Spring 的 XML 配置文件中，我们可以使用 <a href="util:*">util:*</a> 标签来引用 util 命名空间中的定义，并将其应用到 Bean 的定义中。<br>
在 Spring Framework 的 XML 配置文件中，可以使用 <list> 标签来定义一个列表类型的属性值。<list> 标签可以包含多个 <value> 或 <ref> 子标签，每个子标签表示列表中的一个元素。<br>
例如，假设我们有三个 Student 类型的 Bean，分别命名为 “studentOne”、“studentTwo” 和 “studentThree”。我们可以在 XML 配置文件中使用 <a href="util:list">util:list</a> 标签来定义这三个 Bean 实例的列表：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;studentOne&quot; class=&quot;com.example.Student&quot; /&gt;</span><br><span class="line">&lt;bean id=&quot;studentTwo&quot; class=&quot;com.example.Student&quot; /&gt;</span><br><span class="line">&lt;bean id=&quot;studentThree&quot; class=&quot;com.example.Student&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;util:list id=&quot;students&quot;&gt;</span><br><span class="line">    &lt;ref bean=&quot;studentOne&quot; /&gt;</span><br><span class="line">    &lt;ref bean=&quot;studentTwo&quot; /&gt;</span><br><span class="line">    &lt;ref bean=&quot;studentThree&quot; /&gt;</span><br><span class="line">&lt;/util:list&gt;</span><br></pre></td></tr></table></figure>
<p>这个配置将会创建一个列表类型的 Bean，将 “studentOne”、“studentTwo” 和 “studentThree” 作为列表元素。在这个配置中，<a href="util:list">util:list</a> 标签包含了三个 <ref> 子标签，每个子标签表示一个引用类型的列表元素。<br>
除了 <ref> 子标签外，<a href="util:list">util:list</a> 标签还可以包含 <value> 子标签，用于定义值类型的列表元素。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;util:list id=&quot;numbers&quot;&gt;</span><br><span class="line">    &lt;value&gt;1&lt;/value&gt;</span><br><span class="line">    &lt;value&gt;2&lt;/value&gt;</span><br><span class="line">    &lt;value&gt;3&lt;/value&gt;</span><br><span class="line">&lt;/util:list&gt;</span><br></pre></td></tr></table></figure>
<p>这个配置将会创建一个列表类型的 Bean，将 1、2 和 3 作为列表元素，它们都是整数类型的值。在这个配置中，<a href="util:list">util:list</a> 标签包含了三个 <value> 子标签，每个子标签表示一个整数类型的值类型的列表元素。<br>
<a href="util:list">util:list</a> 是 Spring Framework 中的一个实用工具标签，用于定义列表类型的 Bean。为了使用 <a href="util:list">util:list</a> 标签，我们需要在 XML 配置文件中导入 Spring 的 util 命名空间。具体方法是在 XML 文件的根标签中添加xmlns:util=“<a target="_blank" rel="noopener" href="http://www.springframework.org/schema/util">http://www.springframework.org/schema/util</a>” 命名空间声明，同时在<br>
xsi:schemaLocation中添加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://www.springframework.org/schema/util</span><br><span class="line">                           http://www.springframework.org/schema/util/spring-util.xsd&quot;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">       xmlns:util=&quot;http://www.springframework.org/schema/util&quot;</span><br><span class="line">       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span><br><span class="line">                           http://www.springframework.org/schema/util</span><br><span class="line">                           http://www.springframework.org/schema/util/spring-util.xsd&quot;</span><br><span class="line">       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;</span><br><span class="line">       </span><br><span class="line">    &lt;!-- 这里可以定义 Bean --&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;util:list id=&quot;students&quot;&gt;</span><br><span class="line">        &lt;ref bean=&quot;studentOne&quot; /&gt;</span><br><span class="line">        &lt;ref bean=&quot;studentTwo&quot; /&gt;</span><br><span class="line">        &lt;ref bean=&quot;studentThree&quot; /&gt;</span><br><span class="line">    &lt;/util:list&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/lengxiao1993/article/details/77914155?spm=1001.2101.3001.6650.5&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-5-77914155-blog-114280229.235%5Ev38%5Epc_relevant_yljh&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-5-77914155-blog-114280229.235%5Ev38%5Epc_relevant_yljh&amp;utm_relevant_index=10">详解 xml 文件头部的 xmlns:xsi_萧萧九宸的博客-CSDN博客</a><br>
xml：命名空间，防止命名冲突<br>
xsi是XML Schema Instance的缩写，它是一个预定义的命名空间前缀，用于引用XML Schema的实例。 xsi:schemaLocation是一个预定义的属性，用于指定XML文档所引用的XML Schema的位置。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">       public  void TestList() &#123;</span><br><span class="line">           ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(&quot;application.xml&quot;);</span><br><span class="line">           List&lt;Student&gt; students = (List&lt;Student&gt;) context.getBean(&quot;students&quot;);</span><br><span class="line">           for (Student student : students) &#123;</span><br><span class="line">               System.out.println(student);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
<p>测试结果：<br>
<img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688540312902-5751d031-2dfb-4087-9bc5-4e3d96105748.png#averageHue=%23130f0c&amp;clientId=ua77d9b4f-0672-4&amp;from=paste&amp;height=62&amp;id=u3c89fbd3&amp;originHeight=77&amp;originWidth=946&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=20364&amp;status=done&amp;style=none&amp;taskId=u268ab9a1-10cb-469d-b722-3809d789332&amp;title=&amp;width=756.8" alt="image.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--map集合类型的bean--&gt;</span><br><span class="line">&lt;util:map id=&quot;teacherMap&quot;&gt;</span><br><span class="line">   &lt;entry&gt;</span><br><span class="line">       &lt;key&gt;</span><br><span class="line">           &lt;value&gt;10010&lt;/value&gt;</span><br><span class="line">       &lt;/key&gt;</span><br><span class="line">       &lt;ref bean=&quot;teacherOne&quot;&gt;&lt;/ref&gt;</span><br><span class="line">   &lt;/entry&gt;</span><br><span class="line">   &lt;entry&gt;</span><br><span class="line">       &lt;key&gt;</span><br><span class="line">           &lt;value&gt;10086&lt;/value&gt;</span><br><span class="line">       &lt;/key&gt;</span><br><span class="line">       &lt;ref bean=&quot;teacherTwo&quot;&gt;&lt;/ref&gt;</span><br><span class="line">   &lt;/entry&gt;</span><br><span class="line">&lt;/util:map&gt;</span><br></pre></td></tr></table></figure>
<p>总结：其实<map>中的键值对还可以这样写：  <entry key="1" value="游泳"/>（当值为字符串的时候）<br>
由于<value> 标签中的内容会被解析为字符串类型，当值不为字符串的时候用<ref >或者<br>
<value-ref/>标签， <ref bean="teacherOne"></ref>和&lt;value-ref=“teacherOne”/&gt;是等价的。</p>
<h4 id="依赖注入之p命名空间：">依赖注入之p命名空间：</h4>
<p><img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688542214770-39434523-eeeb-46d1-8208-8ddb7d9a11ec.png#averageHue=%23121923&amp;clientId=ua77d9b4f-0672-4&amp;from=paste&amp;height=182&amp;id=u43edee01&amp;originHeight=228&amp;originWidth=1077&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=38429&amp;status=done&amp;style=none&amp;taskId=u7cb701c5-f79b-40f4-8d4b-c1bd9d68933&amp;title=&amp;width=861.6" alt="image.png"><br>
p:前缀是一个命名空间前缀，用于简化property元素的写法，它表示该属性是一个property元素的简写形式。<br>
添加后配置文件新增的内容：（红线部分）<br>
<img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688542371493-97cb2579-faf2-413e-ad5b-ef52d389f4b6.png#averageHue=%23121220&amp;clientId=ua77d9b4f-0672-4&amp;from=paste&amp;height=214&amp;id=u2eb14b9f&amp;originHeight=267&amp;originWidth=824&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=56931&amp;status=done&amp;style=none&amp;taskId=u0d593b70-ed69-4948-9bf4-15d8c4918b6&amp;title=&amp;width=659.2" alt="image.png"><br>
依赖注入：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id = &quot;studentSix&quot; class=&quot;com.example.demo.pojo.Student&quot; p:id=&quot;1005&quot; p:name=&quot;小明&quot;</span><br><span class="line">          p:sex=&quot;女&quot; p:clazz-ref=&quot;clazzOne&quot; p:hobbies=&quot;游泳,跑步,阅读&quot; &gt;&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<p>测试：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">   public  void TestP() &#123;</span><br><span class="line">       ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(&quot;application.xml&quot;);</span><br><span class="line">       Student studentSix = context.getBean(&quot;studentSix&quot;, Student.class);</span><br><span class="line">       System.out.println(studentSix);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Student&#123;id=1005, name=&#x27;小明&#x27;, age=null, sex=&#x27;女&#x27;, clazz=Clazz&#123;clazzId=3333, clazzName=&#x27;最强王者班&#x27;, students=null&#125;, hobbies=[游泳, 跑步, 阅读], teacherMap=null&#125;</span><br><span class="line">//没有赋值的属性都是null</span><br></pre></td></tr></table></figure>
<h4 id="特殊情况p语法糖配置的属性为List或者Map的情况：">特殊情况p语法糖配置的属性为List或者Map的情况：</h4>
<p>如果 p:hobbies 是一个 List 或 Map 类型的属性，我们可以使用 <a href="util:list">util:list</a> 或 <a href="util:map">util:map</a> 标签来配置它的属性值。例如，假设 com.example.demo.pojo.Student 类中的 hobbies 属性是一个 List<String> 类型的列表，我们可以将 <bean> 标签修改为以下形式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;studentSix&quot; class=&quot;com.example.demo.pojo.Student&quot;</span><br><span class="line">      p:id=&quot;1005&quot; p:name=&quot;小明&quot; p:sex=&quot;女&quot; p:clazz-ref=&quot;clazzOne&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;hobbies&quot;&gt;</span><br><span class="line">        &lt;list&gt;</span><br><span class="line">            &lt;value&gt;游泳&lt;/value&gt;</span><br><span class="line">            &lt;value&gt;跑步&lt;/value&gt;</span><br><span class="line">            &lt;value&gt;阅读&lt;/value&gt;</span><br><span class="line">        &lt;/list&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<p>在这个例子中，我们使用了 <property> 标签来设置 Student 类中的 hobbies 属性。<property> 标签中的 name 属性指定了要设置的属性名，而 <a href="util:list">util:list</a> 标签中包含了若干个 <value> 标签，每个 <value> 标签的文本内容即为列表中的一个元素。在这个例子中，<a href="util:list">util:list</a> 标签中包含了三个 <value> 标签，分别设置了 hobbies 列表的三个元素为 “游泳”、“跑步” 和 “阅读”。<br>
如果 p:hobbies 是一个 Map 类型的属性，我们可以使用 <a href="util:map">util:map</a> 标签来配置它的属性值。例如，假设 com.example.demo.pojo.Student 类中的 hobbies 属性是一个 Map&lt;String, String&gt; 类型的映射表，我们可以将 <bean> 标签修改为以下形式：<br>
在这个例子中，我们同样使用了 <property> 标签来设置 Student 类中的 hobbies 属性。<a href="util:map">util:map</a> 标签中包含了若干个 <entry> 标签，每个 <entry> 标签分别表示一个键值对。在这个例子中，我们设置了 hobbies 映射表中的三个键值对，分别为 “1”-“游泳”、“2”-“跑步” 和 “3”-“阅读”。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;studentSix&quot; class=&quot;com.example.demo.pojo.Student&quot;</span><br><span class="line">      p:id=&quot;1005&quot; p:name=&quot;小明&quot; p:sex=&quot;女&quot; p:clazz-ref=&quot;clazzOne&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;hobbies&quot;&gt;</span><br><span class="line">        &lt;map&gt;</span><br><span class="line">            &lt;entry key=&quot;1&quot; value=&quot;游泳&quot;/&gt;</span><br><span class="line">            &lt;entry key=&quot;2&quot; value=&quot;跑步&quot;/&gt;</span><br><span class="line">            &lt;entry key=&quot;3&quot; value=&quot;阅读&quot;/&gt;</span><br><span class="line">        &lt;/map&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<h4 id="Spring管理数据源：druid事例">Spring管理数据源：druid事例</h4>
<p>导入依赖：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- MySQL驱动    --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">   &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">   &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">   &lt;version&gt;8.0.16&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!-- 数据源    --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">   &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">   &lt;artifactId&gt;druid&lt;/artifactId&gt;</span><br><span class="line">   &lt;version&gt;1.0.31&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<p>在您提供的代码片段中，包含了两个 Maven 依赖项，分别是 mysql-connector-java 和 druid，它们用于在 Java 应用程序中使用 MySQL 数据库和数据源。<br>
具体来说，mysql-connector-java 是 MySQL 官方提供的 Java JDBC 驱动程序，用于连接 MySQL 数据库。在 Maven 项目中添加该依赖项后，我们可以在 Java 代码中使用 com.mysql.cj.jdbc.Driver 类来加载 MySQL JDBC 驱动程序，从而连接到 MySQL 数据库。<br>
druid 是阿里巴巴提供的一个高性能 JDBC 连接池框架，它提供了许多高级功能，例如连接池缓存、连接池监控、SQL 防火墙等。在 Maven 项目中添加该依赖项后，我们可以在 Java 代码中使用 com.alibaba.druid.pool.DruidDataSource 类来创建一个 Druid 数据源，从而在应用程序中管理 JDBC 连接池。<br>
设置配置文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;datasource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;driverClassName&quot;  value=&quot;com.mysql.cj.jdbc.Driver&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;property name=&quot;url&quot;  value=&quot;jdbc:mysql://localhost:3306/myemployees?serverTimezone=UTC&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;property name=&quot;username&quot;  value=&quot;root&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;property name=&quot;password&quot;  value=&quot;A86789234&quot;&gt;&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<p>配置文件都是关于数据库连接的文件，一般这些是放在一个数据库配置文件中的。其实可以通过jdbc资源配置文件配置：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jdbc.user=root</span><br><span class="line">jdbc.password=A86789234</span><br><span class="line">jdbc.url=jdbc:mysql://localhost:3306/myemployees?serverTimezone=UTC</span><br><span class="line">jdbc.driver=com.mysql.cj.jdbc.Driver</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span><br><span class="line">       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;</span><br><span class="line">    &lt;context:property-placeholder location=&quot;jdbc.properties&quot;&gt;&lt;/context:property-placeholder&gt;</span><br><span class="line">    &lt;bean id=&quot;datasource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;driverClassName&quot;  value=&quot;$&#123;jdbc.driver&#125;&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;property name=&quot;url&quot;  value=&quot;$&#123;jdbc.url&#125;&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;property name=&quot;username&quot;  value=&quot;$&#123;jdbc.user&#125;&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;property name=&quot;password&quot;  value=&quot;$&#123;jdbc.password&#125;&quot;&gt;&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">   @Test</span><br><span class="line">    public  void  testDatasource() throws SQLException &#123;</span><br><span class="line">        ClassPathXmlApplicationContext ioc= new ClassPathXmlApplicationContext(&quot;spring-datasource.xml&quot;);</span><br><span class="line">        //也可以通过其父类或者所实现的接口</span><br><span class="line">//        DataSource dataSource = ioc.getBean(DataSource.class);</span><br><span class="line">        DruidDataSource druidDataSource = ioc.getBean(DruidDataSource.class);</span><br><span class="line">        System.out.println(druidDataSource.getConnection());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">//输出结果：</span><br><span class="line">//com.mysql.cj.jdbc.ConnectionImpl@3e694b3f</span><br></pre></td></tr></table></figure>
<h4 id="bean的作用域：">bean的作用域：</h4>
<p>在 Spring 容器中，Bean 的作用域决定了 Bean 实例的生命周期和可见范围。Spring 提供了以下五种 Bean 作用域：</p>
<ol>
<li>singleton：单例模式。在整个 Spring 容器中，只会创建一个 Bean 实例，并在需要时共享该实例。默认情况下，所有未显式指定作用域的 Bean 都会使用单例模式。</li>
<li>prototype：原型模式。每次从容器中获取该 Bean 时，都会创建一个新的实例，并返回给调用者。</li>
<li>request：Web 应用程序中的请求作用域。在一次 HTTP 请求中，容器会为每个请求创建一个新的实例，并在请求结束时销毁该实例。</li>
<li>session：Web 应用程序中的会话作用域。在用户会话期间，容器会为每个会话创建一个新的实例，并在会话结束时销毁该实例。</li>
<li>global session：Web 应用程序中的全局会话作用域。与 session 作用域类似，但仅适用于 Portlet 环境。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;myBean&quot; class=&quot;com.example.MyBean&quot; scope=&quot;prototype&quot;&gt;</span><br><span class="line">    &lt;!-- Bean 的配置信息 --&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<h4 id="1-在IOC容器中默认为单例-也即是scope默认为singleton">1.在IOC容器中默认为单例,也即是scope默认为singleton</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id = &quot;student&quot; class=&quot;com.example.demo.pojo.Student&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;id&quot; value=&quot;1009&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;property name=&quot;name&quot; value=&quot;钱九&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;property name=&quot;age&quot; value=&quot;29&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;property name=&quot;sex&quot; value=&quot;女&quot;&gt;&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">  @Test</span><br><span class="line">    public void  testScope()</span><br><span class="line">    &#123;</span><br><span class="line">        ClassPathXmlApplicationContext ioc = new ClassPathXmlApplicationContext(&quot;spring-scope.xml&quot;);</span><br><span class="line">        Student student1 = ioc.getBean(Student.class);</span><br><span class="line">        Student student2 = ioc.getBean(Student.class);</span><br><span class="line">        System.out.println(student1);</span><br><span class="line">        System.out.println(&quot;-----------&quot;);</span><br><span class="line">        System.out.println(student2);</span><br><span class="line">        System.out.println(student1==student2);</span><br><span class="line">    &#125;</span><br><span class="line">//Student&#123;id=1009, name=&#x27;钱九&#x27;, age=29, sex=&#x27;女&#x27;, clazz=null, hobbies=null, teacherMap=null&#125;</span><br><span class="line">//-----------</span><br><span class="line">//Student&#123;id=1009, name=&#x27;钱九&#x27;, age=29, sex=&#x27;女&#x27;, clazz=null, hobbies=null, teacherMap=null&#125;</span><br><span class="line">//true</span><br></pre></td></tr></table></figure>
<p>2.设置为scope=“prototype”</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id = &quot;student&quot; class=&quot;com.example.demo.pojo.Student&quot; scope=&quot;prototype&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;id&quot; value=&quot;1009&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;property name=&quot;name&quot; value=&quot;钱九&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;property name=&quot;age&quot; value=&quot;29&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;property name=&quot;sex&quot; value=&quot;女&quot;&gt;&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Student&#123;id=1009, name=&#x27;钱九&#x27;, age=29, sex=&#x27;女&#x27;, clazz=null, hobbies=null, teacherMap=null&#125;</span><br><span class="line">-----------</span><br><span class="line">Student&#123;id=1009, name=&#x27;钱九&#x27;, age=29, sex=&#x27;女&#x27;, clazz=null, hobbies=null, teacherMap=null&#125;</span><br><span class="line">false</span><br></pre></td></tr></table></figure>
<h4 id="bean的生命周期：">bean的生命周期：</h4>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6866075598184906766">一篇文章让你彻底搞懂Bean后置处理器及执行时机 - 掘金</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">package com.example.demo.pojo;</span><br><span class="line"></span><br><span class="line">public class User &#123;</span><br><span class="line">   private Integer id;</span><br><span class="line">   private String username;</span><br><span class="line">   private String password;</span><br><span class="line">   private Integer age;</span><br><span class="line">   public User() &#123;</span><br><span class="line">       System.out.println(&quot;生命周期1：实例化&quot;);</span><br><span class="line"> &#125;</span><br><span class="line">   public User(Integer id, String username, String password, Integer age) &#123;</span><br><span class="line">       this.id = id;</span><br><span class="line">       this.username = username;</span><br><span class="line">       this.password = password; </span><br><span class="line">       this.age = age;</span><br><span class="line"> &#125;</span><br><span class="line">   public Integer getId() &#123; </span><br><span class="line">       return id;</span><br><span class="line"> &#125;</span><br><span class="line">   public void setId(Integer id) &#123;</span><br><span class="line">       System.out.println(&quot;生命周期2：依赖注入&quot;);</span><br><span class="line">       this.id = id;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line">   public String getUsername() &#123; </span><br><span class="line">       return username;</span><br><span class="line"> &#125;</span><br><span class="line">   public void setUsername(String username) &#123; </span><br><span class="line">       this.username = username;</span><br><span class="line"> &#125;</span><br><span class="line">   public String getPassword() &#123; </span><br><span class="line">       return password;</span><br><span class="line"> &#125;</span><br><span class="line">   public void setPassword(String password) &#123; </span><br><span class="line">       this.password = password;</span><br><span class="line"> &#125;</span><br><span class="line">   public Integer getAge() &#123; </span><br><span class="line">       return age;</span><br><span class="line"> &#125;</span><br><span class="line">   public void setAge(Integer age) &#123; </span><br><span class="line">       this.age = age;</span><br><span class="line"> &#125;</span><br><span class="line">   @Override</span><br><span class="line">   public String toString() &#123; </span><br><span class="line">       return &quot;User&#123;&quot; +</span><br><span class="line">               &quot;id=&quot; + id +</span><br><span class="line">               &quot;, username=&#x27;&quot; + username + &#x27;\&#x27;&#x27; + </span><br><span class="line">               &quot;, password=&#x27;&quot; + password + &#x27;\&#x27;&#x27; + </span><br><span class="line">               &quot;, age=&quot; + age +</span><br><span class="line">               &#x27;&#125;&#x27;;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"> public void  initMethod()</span><br><span class="line"> &#123;</span><br><span class="line">     System.out.println(&quot;生命周期3：初始化！&quot;);</span><br><span class="line"> &#125;</span><br><span class="line">    public void  destroyMethod()</span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(&quot;生命周期4：销毁！&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;</span><br><span class="line">    &lt;!-- scope属性：取值singleton（默认值），bean在IOC容器中只有一个实例，IOC容器初始化时创建</span><br><span class="line">    对象   init-method 和destroy-method分别表示初始化和摧毁时调用的方法--&gt;</span><br><span class="line">    &lt;!-- scope属性：取值prototype，bean在IOC容器中可以有多个实例，getBean()时创建对象    --&gt;</span><br><span class="line">    &lt;bean class=&quot;com.example.demo.pojo.User&quot; scope=&quot;prototype&quot; init-method=&quot;initMethod&quot; destroy-method=&quot;destroyMethod&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;id&quot; value=&quot;1009&quot;&gt;&lt;/property&gt;</span><br><span class="line">        &lt;property name=&quot;username&quot; value=&quot;钱九&quot;&gt;&lt;/property&gt;</span><br><span class="line">        &lt;property name=&quot;age&quot; value=&quot;29&quot;&gt;&lt;/property&gt;</span><br><span class="line">        &lt;property name=&quot;password&quot; value=&quot;123456&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">  @Test</span><br><span class="line">    public  void  testLife()</span><br><span class="line">    &#123;</span><br><span class="line">        ClassPathXmlApplicationContext ac = new ClassPathXmlApplicationContext(&quot;spring-lifetime.xml&quot;);</span><br><span class="line">            User user1 = ac.getBean(User.class);</span><br><span class="line">            User user2 = ac.getBean(User.class);</span><br><span class="line">            System.out.println(user1==user2);</span><br><span class="line">            ac.close();//刷新关闭容器关闭刷新</span><br><span class="line">    &#125;</span><br><span class="line">//生命周期1：实例化</span><br><span class="line">//生命周期2：依赖注入</span><br><span class="line">//生命周期3：初始化！</span><br><span class="line">//生命周期1：实例化</span><br><span class="line">//生命周期2：依赖注入</span><br><span class="line">//生命周期3：初始化！</span><br><span class="line">//false</span><br><span class="line">//20:52:59.913 [main] DEBUG org.springframework.context.support.ClassPathXmlApplicationContext - Closing org.springframework.context.support.ClassPathXmlApplicationContext@6b2fad11, started on Wed Jul 05 20:52:59 CST 2023</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>那什么时候实例化呢？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- scope属性：取值prototype，bean在IOC容器中可以有多个实例，getBean()时创建对象    --&gt;</span><br><span class="line">&lt;bean id=&quot;user&quot; class=&quot;com.example.demo.pojo.User&quot; scope=&quot;prototype&quot; init-method=&quot;initMethod&quot; destroy-method=&quot;destroyMethod&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;id&quot; value=&quot;1009&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;property name=&quot;username&quot; value=&quot;钱九&quot;&gt;&lt;/property&gt;</span><br><span class="line">     &lt;property name=&quot;age&quot; value=&quot;29&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;property name=&quot;password&quot; value=&quot;123456&quot;&gt;&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> @Test</span><br><span class="line">    public  void  testLife()</span><br><span class="line">    &#123;</span><br><span class="line">        ConfigurableApplicationContext ac = new ClassPathXmlApplicationContext(&quot;spring-lifetime.xml&quot;);</span><br><span class="line">//            User user1 = ac.getBean(User.class);</span><br><span class="line">           /* User user2 = ac.getBean(User.class);</span><br><span class="line">            System.out.println(user1==user2);</span><br><span class="line">            ac.close();*/</span><br><span class="line">    &#125;</span><br><span class="line">//无输出结果</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> @Test</span><br><span class="line">    public  void  testLife()</span><br><span class="line">    &#123;</span><br><span class="line">        ConfigurableApplicationContext ac = new ClassPathXmlApplicationContext(&quot;spring-lifetime.xml&quot;);</span><br><span class="line">          User user1 = ac.getBean(User.class);</span><br><span class="line">           /* User user2 = ac.getBean(User.class);</span><br><span class="line">            System.out.println(user1==user2);</span><br><span class="line">            ac.close();*/</span><br><span class="line">    &#125;</span><br><span class="line">//生命周期1：实例化</span><br><span class="line">//生命周期2：依赖注入</span><br><span class="line">//生命周期3：初始化</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">  @Test</span><br><span class="line">    public  void  testLife()</span><br><span class="line">    &#123;</span><br><span class="line">        ConfigurableApplicationContext ac = new ClassPathXmlApplicationContext(&quot;spring-lifetime.xml&quot;);</span><br><span class="line">          User user1 = ac.getBean(User.class);</span><br><span class="line">            User user2 = ac.getBean(User.class);</span><br><span class="line">            System.out.println(user1==user2);</span><br><span class="line">            ac.close();</span><br><span class="line">    &#125;</span><br><span class="line">//生命周期1：实例化</span><br><span class="line">//生命周期2：依赖注入</span><br><span class="line">//生命周期3：初始化！</span><br><span class="line">//生命周期1：实例化</span><br><span class="line">//生命周期2：依赖注入</span><br><span class="line">//生命周期3：初始化！</span><br><span class="line">//false</span><br><span class="line">//21:51:58.077 [main] DEBUG org.springframework.context.support.ClassPathXmlApplicationContext - Closing org.springframework.context.support.ClassPathXmlApplicationContext@6b2fad11, started on Wed Jul 05 21:51:57 CST 2023</span><br><span class="line"></span><br><span class="line">//进程已结束,退出代码0</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>可以看出多例模式（scope=“prototype”）是在或者bean对象时实例化</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;user&quot; class=&quot;com.example.demo.pojo.User&quot; scope=&quot;singleton&quot; init-method=&quot;initMethod&quot; destroy-method=&quot;destroyMethod&quot;&gt;</span><br><span class="line">       &lt;property name=&quot;id&quot; value=&quot;1009&quot;&gt;&lt;/property&gt;</span><br><span class="line">       &lt;property name=&quot;username&quot; value=&quot;钱九&quot;&gt;&lt;/property&gt;</span><br><span class="line">        &lt;property name=&quot;age&quot; value=&quot;29&quot;&gt;&lt;/property&gt;</span><br><span class="line">       &lt;property name=&quot;password&quot; value=&quot;123456&quot;&gt;&lt;/property&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">  @Test</span><br><span class="line">    public  void  testLife()</span><br><span class="line">    &#123;</span><br><span class="line">        ConfigurableApplicationContext ac = new ClassPathXmlApplicationContext(&quot;spring-lifetime.xml&quot;);</span><br><span class="line">//          User user1 = ac.getBean(User.class);</span><br><span class="line">           /* User user2 = ac.getBean(User.class);</span><br><span class="line">            System.out.println(user1==user2);</span><br><span class="line">            ac.close();*/</span><br><span class="line">    &#125;</span><br><span class="line">//生命周期1：实例化</span><br><span class="line">//生命周期2：依赖注入</span><br><span class="line">//生命周期3：初始化！</span><br></pre></td></tr></table></figure>
<p>总结：这里可以看出单例为啥后面创建的类和第一个类的地址一样,单例模式在创建容器的时候实例化，依赖注入，初始化，随着容器的关闭而摧毁，多例模式在创建对象的时候实例化，依赖注入，初始化，容器关闭不会摧毁bean<br>
<img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688565300195-fa73648e-ab3b-4fa5-a716-6c21979c83f1.png#averageHue=%23f2eedf&amp;clientId=u03b8032e-d2db-4&amp;from=paste&amp;height=42&amp;id=uacbe958a&amp;originHeight=53&amp;originWidth=637&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=36090&amp;status=done&amp;style=none&amp;taskId=u94654dea-0468-4695-99d0-cfddb2aae05&amp;title=&amp;width=509.6" alt="image.png"></p>
<p><img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688561711858-4f5b5480-aec5-4dc9-9308-83fc4912b1d7.png#averageHue=%23f9f8f5&amp;clientId=u03b8032e-d2db-4&amp;from=paste&amp;height=93&amp;id=u11602db8&amp;originHeight=116&amp;originWidth=620&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=45923&amp;status=done&amp;style=none&amp;taskId=u60a7bcae-e924-4b64-a56c-5b04cbe6a6c&amp;title=&amp;width=496" alt="image.png"><br>
在 Spring 容器中，每个 Bean 的生命周期包括以下三个阶段：</p>
<ol>
<li>实例化阶段：在这个阶段，容器会使用 Bean 的构造函数或工厂方法创建一个新的 Bean 实例。</li>
<li>初始化阶段：在这个阶段，容器会对 Bean 进行属性注入和其他初始化操作，例如调用 Bean 的 init-method 方法。</li>
<li>销毁阶段：在这个阶段，容器会销毁 Bean 实例，并在销毁前调用 Bean 的 destroy-method 方法进行清理操作。</li>
</ol>
<h4 id="bean的后置处理器：">bean的后置处理器：</h4>
<p>bean的后置处理器可以在生命周期的初始化前后添加额外的操作，需要实现BeanPostProcessor接口（有2个默认方法），<br>
且配置到IOC容器中，需要注意的是，bean后置处理器不是单独针对某一个bean生效，而是针对IOC容<br>
器中所有bean都会执行<br>
<img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688566339927-81ed4340-966a-4a88-bedb-26c8d44fcf24.png#averageHue=%23eeebdd&amp;clientId=u03b8032e-d2db-4&amp;from=paste&amp;height=71&amp;id=u546492a2&amp;originHeight=89&amp;originWidth=635&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=61617&amp;status=done&amp;style=none&amp;taskId=u420ac884-47e3-4240-b82d-184ac46a1f3&amp;title=&amp;width=508" alt="image.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import org.springframework.beans.BeansException;</span><br><span class="line">import org.springframework.beans.factory.config.BeanPostProcessor;</span><br><span class="line"></span><br><span class="line">public class MybeanPostProcessor implements BeanPostProcessor &#123;</span><br><span class="line">    //初始化之前执行</span><br><span class="line">    @Override</span><br><span class="line">    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException &#123;</span><br><span class="line">        System.out.println(&quot;☆☆☆&quot; + beanName + &quot; = &quot; + bean);</span><br><span class="line">        return bean;</span><br><span class="line">    &#125;</span><br><span class="line">    //初始化之后执行</span><br><span class="line">    @Override</span><br><span class="line">    public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException &#123;</span><br><span class="line">        System.out.println(&quot;★★★&quot; + beanName + &quot; = &quot; + bean);</span><br><span class="line">        return bean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- bean的后置处理器要放入IOC容器才能生效    --&gt;</span><br><span class="line">&lt;bean id=&quot;myBeanProcessor&quot; class=&quot;com.example.demo.pojo.MybeanPostProcessor&quot;/&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">    @Test</span><br><span class="line">    public  void  testProcessor()</span><br><span class="line">    &#123;</span><br><span class="line">        ConfigurableApplicationContext ac = new ClassPathXmlApplicationContext(&quot;spring-lifetime.xml&quot;);</span><br><span class="line">        User user1 = ac.getBean(User.class);</span><br><span class="line">        System.out.println(user1);</span><br><span class="line">        ac.close();</span><br><span class="line">    &#125;</span><br><span class="line">  /*  生命周期1：实例化</span><br><span class="line">    生命周期2：依赖注入</span><br><span class="line">☆☆☆user = User&#123;id=1009, username=&#x27;钱九&#x27;, password=&#x27;123456&#x27;, age=29&#125;</span><br><span class="line">    生命周期3：初始化！</span><br><span class="line">        ★★★user = User&#123;id=1009, username=&#x27;钱九&#x27;, password=&#x27;123456&#x27;, age=29&#125;</span><br><span class="line">    User&#123;id=1009, username=&#x27;钱九&#x27;, password=&#x27;123456&#x27;, age=29&#125;</span><br><span class="line">22:13:39.564 [main] DEBUG org.springframework.context.support.ClassPathXmlApplicationContext - Closing org.springframework.context.support.ClassPathXmlApplicationContext@73f792cf, started on Wed Jul 05 22:13:39 CST 2023</span><br><span class="line"></span><br><span class="line">    进程已结束,退出代码0</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>
<h4 id="接口的默认方法">接口的默认方法</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public interface MyInterface &#123;</span><br><span class="line">    // 抽象方法</span><br><span class="line">    void myMethod();</span><br><span class="line"></span><br><span class="line">    // 默认方法</span><br><span class="line">    default void myDefaultMethod() &#123;</span><br><span class="line">        // 方法体</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>默认方法使用default关键字进行声明， 接口的默认方法可以访问接口中的静态变量和静态方法，但是不能访问实现类中的成员变量和成员方法。当一个类实现了多个接口并且这些接口中都有相同名称的默认方法时，编译器会报错。此时需要在实现类中覆盖默认方法并指定具体的实现。接口的默认方法可以被实现类直接使用，也可以被实现类重写。  接口的默认方法可以被继承，如果一个子接口继承了一个父接口，并且重写了父接口中的默认方法，那么子接口中的默认方法会覆盖父接口中的默认方法。 接口的默认方法可以被多继承，如果一个类实现了多个接口，并且这些接口中有相同签名的默认方法，那么这个类必须重写这个默认方法，或者使用super关键字来指定使用哪个接口中的默认方法。</p>
<h4 id="FactoryBean">FactoryBean:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">package com.example.demo.pojo;</span><br><span class="line"></span><br><span class="line">import org.springframework.beans.factory.FactoryBean;</span><br><span class="line"></span><br><span class="line">public class UserFactoryBean implements FactoryBean&lt;User&gt; &#123;</span><br><span class="line">   @Override</span><br><span class="line">   public User getObject() throws Exception &#123; </span><br><span class="line">       return new User();</span><br><span class="line"> &#125;</span><br><span class="line">   @Override</span><br><span class="line">   public Class&lt;?&gt; getObjectType() &#123; </span><br><span class="line">       return User.class;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;user&quot; class=&quot;com.example.demo.pojo.UserFactoryBean&quot;&gt;&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">  @Test</span><br><span class="line">    public  void  factoryTest()</span><br><span class="line">    &#123;</span><br><span class="line">        //获取IOC容器</span><br><span class="line">        ApplicationContext ac = new ClassPathXmlApplicationContext(&quot;spring-factory.xml&quot;);</span><br><span class="line">        //因为交给IOC容器管理的是user对象</span><br><span class="line">        User user = (User) ac.getBean(&quot;user&quot;);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">/*    生命周期1：实例化</span><br><span class="line">    User&#123;id=null, username=&#x27;null&#x27;, password=&#x27;null&#x27;, age=null&#125;*/</span><br></pre></td></tr></table></figure>
<p><img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688568299407-d1351508-cd00-4d10-bf82-8f32b10b3ddd.png#averageHue=%23f8f7f4&amp;clientId=u03b8032e-d2db-4&amp;from=paste&amp;height=114&amp;id=uf226db02&amp;originHeight=143&amp;originWidth=713&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=75650&amp;status=done&amp;style=none&amp;taskId=uf5053da9-4cfc-42d5-8eab-0f6bcf536ed&amp;title=&amp;width=570.4" alt="image.png"></p>
<h4 id="基于XML的自动装配：">基于XML的自动装配：</h4>
<p><strong>简单来说就是要装配的bean的中，其中有属性为类（可以创建bean的），这个时候可以不用指定ref或者vaule，指定寻找IOC中的bean</strong></p>
<h6 id="写在前面：">写在前面：</h6>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_45067620/article/details/118274014">【Spring】使用xml文件实现自动装配；使用注解@Autowired和@Resource实现自动装配_StudiousTiger的博客-CSDN博客</a><br>
基于xml的自动装配是Spring框架提供的一种简化Bean依赖注入的方式，它可以让Spring容器根据Bean的名称或类型自动查找并注入相应的属性值，而不需要手动指定ref或value属性。在Spring配置文件中，为需要自动装配的Bean添加autowire属性，并指定其值为byName、byType、constructor、default或no。</p>
<p>•  byName表示根据Bean的名称进行自动装配，要求Bean的id与被注入属性的名称相同。</p>
<p>•  byType表示根据Bean的类型进行自动装配，要求Bean的类型与被注入属性的类型相同，且在容器中只有一个该类型的Bean。</p>
<p>•  constructor表示根据构造器参数进行自动装配，要求容器中有与构造器参数类型和顺序相匹配的Bean。</p>
<p>•  default表示使用容器默认的自动装配策略，通常是no，即不进行自动装配。</p>
<p>•  no表示不进行自动装配，需要手动指定ref或value属性。</p>
<p>下面举一个简单的例子来说明基于xml的自动装配。假设我们有一个Person类，它有一个name属性和一个Car属性：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class Person &#123;</span><br><span class="line">private String name;</span><br><span class="line">private Car car;</span><br><span class="line"></span><br><span class="line">// 省略构造器、getter和setter</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class Car &#123;</span><br><span class="line">private String brand;</span><br><span class="line">private double price;</span><br><span class="line"></span><br><span class="line">// 省略构造器、getter和setter</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们想要让Spring容器自动为Person对象注入Car对象，而不需要手动指定ref属性。我们可以在Spring配置文件中，为Person Bean添加autowire属性，并设置其值为byName或byType：</p>
<bean id="car" class="com.example.Car">
<property name="brand" value="BMW"/>
<property name="price" value="300000"/>
</bean>
<bean id="person" class="com.example.Person" autowire="byName">
<property name="name" value="Tom"/>
</bean>
<p>或者</p>
<bean id="car" class="com.example.Car">
<property name="brand" value="BMW"/>
<property name="price" value="300000"/>
</bean>
<bean id="person" class="com.example.Person" autowire="byType">
<property name="name" value="Tom"/>
</bean>
#### xml的自动装配开始：
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public class UserController &#123;</span><br><span class="line">   private UserService userService;</span><br><span class="line">   public void setUserService(UserService userService) &#123;</span><br><span class="line">       this.userService = userService;</span><br><span class="line"> &#125;</span><br><span class="line">   public void saveUser()&#123;</span><br><span class="line">       userService.saveUser();</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public interface UserService &#123;</span><br><span class="line">     void saveUser();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class UserServiceImpl implements UserService &#123;</span><br><span class="line">   private UserDao userDao;</span><br><span class="line">   public void setUserDao(UserDao userDao) &#123;</span><br><span class="line">         this.userDao = userDao; </span><br><span class="line"> &#125;</span><br><span class="line">   @Override</span><br><span class="line">   public void saveUser() &#123; </span><br><span class="line">       userDao.saveUser(); </span><br><span class="line"> &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public interface UserDao &#123;</span><br><span class="line">    void saveUser();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class UserDaoImpl implements UserDao &#123;</span><br><span class="line">   @Override</span><br><span class="line">   public void saveUser() &#123;</span><br><span class="line">       System.out.println(&quot;保存成功&quot;); </span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
上面的类和接口有一环一环的依赖，controller依赖server，server依赖Dap
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;userController&quot; class=&quot;com.example.demo.controller.UserController&quot; &gt;</span><br><span class="line">    &lt;property name=&quot;userService&quot; ref=&quot;userService&quot;&gt;&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line">    &lt;bean id=&quot;userService&quot; class=&quot;com.example.demo.service.impl.UserServiceImpl&quot; &gt;</span><br><span class="line">        &lt;property name=&quot;userDao&quot; ref=&quot;userDao&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">    &lt;bean id=&quot;userDao&quot; class=&quot;com.example.demo.UserDao.impl.UserDaoImpl&quot; &gt;</span><br><span class="line">    &lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line"> public  void  testAutowire ()</span><br><span class="line"> &#123;</span><br><span class="line">     ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(&quot;spring-autowire.xml&quot;);</span><br><span class="line">     UserController userController = context.getBean(UserController.class);</span><br><span class="line">    userController.saveUser();</span><br><span class="line"> &#125;</span><br><span class="line"> //输出</span><br><span class="line"> //保存成功</span><br></pre></td></tr></table></figure>
###### 修改配置文件自动装配：byType
使用bean标签的autowire属性设置自动装配效果 
自动装配方式：byType
byType：根据类型匹配IOC容器中的某个兼容类型的bean，为属性自动赋值
若在IOC中，没有任何一个兼容类型的bean能够为属性赋值，则该属性不装配，即值为默认值 
null
若在IOC中，有多个兼容类型的bean能够为属性赋值，则抛出异常 
NoUniqueBeanDefinitionException
自动装配方式：byName byName：将自动装配的属性的属性名，作为bean的id在IOC容器中匹配相对应的bean进行赋值
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;userController&quot;</span><br><span class="line">          class=&quot;com.example.demo.controller.UserController&quot; autowire=&quot;byType&quot;&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">    &lt;bean id=&quot;userService&quot;</span><br><span class="line">          class=&quot;com.example.demo.service.impl.UserServiceImpl&quot; autowire=&quot;byType&quot;&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">    &lt;bean id=&quot;userDao&quot; class=&quot;com.example.demo.UserDao.impl.UserDaoImpl&quot;&gt;&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
###### 总结：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/28066124/1688572395284-7fc48f55-6850-4e8f-9b82-148eb630de6a.png#averageHue=%23ede9d9&clientId=u03b8032e-d2db-4&from=paste&height=49&id=u8f11fe5c&originHeight=61&originWidth=687&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=34049&status=done&style=none&taskId=ub921892a-9e64-42ec-bee0-6b2bc914922&title=&width=549.6)**（自动装配只能装配那些接口，类等属性，也就是要用ref标签引用的属性，其他的不能，需要手动设置属性）**
![image.png](https://cdn.nlark.com/yuque/0/2023/png/28066124/1688572942220-8d320593-000c-45a1-b796-a434a5b204c4.png#averageHue=%23edeada&clientId=u03b8032e-d2db-4&from=paste&height=62&id=u7f7b0613&originHeight=77&originWidth=690&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=58220&status=done&style=none&taskId=u87b52934-0a7f-4080-a642-a755a0a4fe8&title=&width=552)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/28066124/1688573407060-7980193b-507e-44a1-8659-d909df492fab.png#averageHue=%23f5f4ef&clientId=u03b8032e-d2db-4&from=paste&height=93&id=u6ed64cfc&originHeight=116&originWidth=682&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=85159&status=done&style=none&taskId=u128337dc-3339-46fa-bb84-27541f90112&title=&width=545.6)
###### 自动装配byName:
byName自动装配它的作用是根据bean的属性名和xml中定义的bean的id进行匹配，如果匹配成功，则将对应的bean注入到属性中。
#### 基于注解的bean管理：
基于xml的管理常用于第三方提供的bean
①注解
和 XML 配置文件一样，注解本身并不能执行，注解本身仅仅只是做一个标记，具体的功能是框架检测 
到注解标记的位置，然后针对这个位置按照注解标记的功能来执行具体操作。
本质上：所有一切的操作都是Java代码来完成的，XML和注解只是告诉框架中的Java代码如何执行。
**注意：基于注解管理bean的时候，注解是要加到实现类的，不能加到接口的**
#### 相关注解：
@Component：将类标识为普通组件  @Controller：将类标识为控制层组件  @Service：将类标 
识为业务层组件  @Repository：将类标识为持久层组件（这4个注解功能都是将类标记为组件，只不过他们各自的含义不一样。对应spring管理ioc的时候，这4个注解是等效的，也就是说这4个注解可以替换，但是对于开发人员来说，他们是有各自不同的含义的）
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">@Component注解是标记一个类为Spring管理的组件的基本注解。被@Component注解标记的类会被自动扫描并创建为Bean对象，可以通过IoC容器进行管理和使用。通常情况下，使用@Component注解被标记的类都是一些通用的Bean类，没有特别的业务逻辑。</span><br><span class="line">@Component还有一些扩展的注解，如@Repository, @Service, @Controller等，它们都是@Component的元注解（注解注解的注解），具有相同的功能，但是在不同的层次上有不同的含义。@Component还可以配合@PostConstruct和@PreDestroy注解来指定bean的初始化和销毁方法。</span><br><span class="line"></span><br><span class="line">@Controller</span><br><span class="line">@Controller注解是标记一个类为Spring MVC中的控制器的注解。被@Controller注解标记的类会被自动扫描并创建为Bean对象，并且会被Spring MVC框架用作请求处理器。@Controller注解通常用于处理用户请求，并返回相应的视图。</span><br><span class="line"></span><br><span class="line">@Service</span><br><span class="line">@Service注解是标记一个类为服务层组件的注解。被@Service注解标记的类会被自动扫描并创建为Bean对象，并且通常用于业务逻辑的处理，例如数据的处理、计算等。@Service注解通常被用作一个服务类的标志。</span><br><span class="line"></span><br><span class="line">@Repository</span><br><span class="line">@Repository注解是标记一个类为数据访问层组件的注解。被@Repository注解标记的类会被自动扫描并创建为Bean对象，并且通常用于数据的访问和持久化操作，例如数据库的访问、文件的读写等。</span><br><span class="line"></span><br><span class="line">@Autowired</span><br><span class="line">@Autowired注解是自动装配的注解，它可以自动将一个Bean注入到另一个Bean中。它可以用于属性、构造函数和方法上。当一个Bean需要使用其他Bean时，可以使用@Autowired注解将需要的Bean注入到当前Bean中，完成依赖注入。</span><br><span class="line">当用在构造器上时，Spring会自动查找与构造器参数类型匹配的Bean，并将它们注入到相应的位置。如果存在多个类型匹配的Bean，Spring会抛出一个异常。在这种情况下，我们可以使用@Qualifier注解来指定要注入的Bean。</span><br><span class="line">@Qualifier</span><br><span class="line">@Qualifier注解是用于注入特定Bean的注解。当一个接口有多个实现类时，可以使用@Qualifier注解指定需要注入的实现类，避免自动装配出现歧义。</span><br><span class="line"></span><br><span class="line">@Value</span><br><span class="line">@Value注解是用于注入属性值的注解，可以将配置文件中的属性值注入到Bean中。@Value注解可以用于属性、构造函数和方法上。</span><br><span class="line"></span><br><span class="line">@PostConstruct</span><br><span class="line">@PostConstruct注解是在Bean初始化之后执行的方法级别注解。当Bean初始化完成后，@PostConstruct注解的方法会被自动调用，可以在该方法中进行一些初始化操作。</span><br><span class="line"></span><br><span class="line">@PreDestroy</span><br><span class="line">@PreDestroy注解是在Bean销毁之前执行的方法级别注解。当Bean销毁之前，@PreDestroy注解的方法会被自动调用，可以在该方法中进行一些清理操作。</span><br></pre></td></tr></table></figure>
#### 扫描组件：
###### 最基本的：
为了让spring能够扫描到注解，需要在spring的配置文件添加关于扫描的配置，和在pom文件中添加相关的依赖
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.example&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">   &lt;!-component-scan:组件扫描，base-package:通过包来扫描，包名写的越精确扫描的时间越短-&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 基于Maven依赖传递性，导入spring-context依赖即可导入当前所需所有jar包    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
###### 指定排除的：
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.atguigu&quot;</span>&gt;</span> </span><br><span class="line">   <span class="comment">&lt;!-- context:exclude-filter标签：指定排除规则    --&gt;</span> </span><br><span class="line">   <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">type：设置排除或包含的依据</span></span><br><span class="line"><span class="comment">type=&quot;annotation&quot;，根据注解排除，expression中设置要排除的注解的全类名</span></span><br><span class="line"><span class="comment">type=&quot;assignable&quot;，根据类型排除，expression中设置要排除的类型的全类名</span></span><br><span class="line"><span class="comment">在IDE中，可以使用快捷键或右键菜单来复制类的全类名，</span></span><br><span class="line"><span class="comment">例如在IDEA中，可以选中一个类名，然后右键选择Copy Reference，</span></span><br><span class="line"><span class="comment">  或者使用Ctrl+Alt+Shift+C快捷键。--&gt;</span></span><br><span class="line">expression=&quot;org.springframework.stereotype.Controller&quot;/&gt; </span><br><span class="line">       <span class="comment">&lt;!--&lt;context:exclude-filter type=&quot;assignable&quot; </span></span><br><span class="line"><span class="comment">expression=&quot;com.atguigu.controller.UserController&quot;/&gt;--&gt;</span></span><br><span class="line">&lt;/context:component-scan</span><br></pre></td></tr></table></figure>
###### 只扫描指定的：
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.atguigu&quot;</span> <span class="attr">use-default-filters</span>=<span class="string">&quot;false&quot;</span>&gt;</span> </span><br><span class="line">   <span class="comment">&lt;!-- context:include-filter标签：指定在原有扫描规则的基础上追加的规则    --&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- use-default-filters属性：取值false表示关闭默认扫描规则    --&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- 此时必须设置use-default-filters=&quot;false&quot;，因为默认规则即扫描指定包下所有类    --&gt;</span> </span><br><span class="line">   <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">type：设置排除或包含的依据</span></span><br><span class="line"><span class="comment">type=&quot;annotation&quot;，根据注解排除，expression中设置要排除的注解的全类名</span></span><br><span class="line"><span class="comment">type=&quot;assignable&quot;，根据类型排除，expression中设置要排除的类型的全类名</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> </span></span><br><span class="line"><span class="tag"><span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;context:include-filter type=&quot;assignable&quot; </span></span><br><span class="line"><span class="comment">expression=&quot;com.atguigu.controller.UserController&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>
#### bean的id:
在Spring中，Bean ID可以通过多种方式指定，包括：
<ol>
<li>默认规则:扫描加注解<br>
当使用@Component等注解标记一个类时，如果没有显式指定Bean ID，则默认使用类名的首字母小写作为Bean ID。例如，一个名为UserService的类，其默认的Bean ID为userService。</li>
<li>使用@Bean注解<br>
当使用@Bean注解在配置类中定义一个Bean时，可以显式指定Bean ID。例如：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@Configuration</span><br><span class="line">public class AppConfig &#123;</span><br><span class="line">    @Bean(&quot;userService&quot;)</span><br><span class="line">    public UserService userService() &#123;</span><br><span class="line">        return new UserServiceImpl();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在这个例子中，@Bean注解用于定义一个Bean，并指定了Bean ID为userService。<br>
3.使用注解的value属性自定义id：<br>
<img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688795689516-49cc89a8-1ca6-44a3-8e53-f23746ed1356.png#averageHue=%23141124&amp;clientId=u2b1598f3-93fd-4&amp;from=paste&amp;height=163&amp;id=u564574e3&amp;originHeight=204&amp;originWidth=519&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=26990&amp;status=done&amp;style=none&amp;taskId=u2fc2ea09-7a87-43f5-a45b-cb706c12abf&amp;title=&amp;width=415.2" alt="image.png"></p>
<ol>
<li>使用XML配置<br>
在XML配置文件中，可以使用<bean>元素来定义一个Bean，并指定Bean ID。例如：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;userService&quot; class=&quot;com.example.demo.UserService&quot;&gt;</span><br><span class="line">    &lt;!-- 配置其他属性 --&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<p>在这个例子中，使用<bean>元素定义了一个名为userService的Bean，并指定其类为com.example.demo.UserService。<br>
<img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688795401819-1715b01b-338a-4464-a56a-efc65c120801.png#averageHue=%23191529&amp;clientId=u2b1598f3-93fd-4&amp;from=paste&amp;height=205&amp;id=u2e8de501&amp;originHeight=256&amp;originWidth=823&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=49167&amp;status=done&amp;style=none&amp;taskId=u46321d7e-f1a1-4c67-b479-65d93cf66c6&amp;title=&amp;width=658.4" alt="image.png"></p>
<h4 id="基于注解的自动装配：">基于注解的自动装配：</h4>
<h6 id="注意：">注意：</h6>
<p><strong>基于注解的自动装配，不需要在本类中为该属性设置get和set方法</strong></p>
<h6 id="Autowired">@Autowired:</h6>
<p>用法：在基于注解的自动装配中用于将一个Bean注入到另一个Bean中。<br>
1.可以标识在成员变量上，这个时候该成员方法可以不用在它所在的类中设置相关的get和set方法。<br>
2.当我们使用@Autowired注解时，Spring会自动查找与被注入的属性或方法参数类型匹配的Bean，并将它们注入到相应的位置。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">public class UserServiceImpl implements UserService &#123;</span><br><span class="line">    @Autowired</span><br><span class="line">    private UserDao userDao;</span><br><span class="line"></span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在这个例子中，我们使用@Autowired注解将UserDao注入到了UserServiceImpl中的userDao属性中。当Spring容器启动时，它会自动找到一个类型为UserDao的Bean，并将它注入到userDao属性中。<br>
@Autowired注解可以用在构造器、属性、方法上。当用在构造器上时，Spring会自动查找与构造器参数类型匹配的Bean，并将它们注入到相应的位置。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">public class UserController &#123;</span><br><span class="line">    private UserService userService;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    public UserController(UserService userService) &#123;</span><br><span class="line">        this.userService = userService;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在这个例子中，我们使用@Autowired注解将userService注入到了构造器中。当Spring容器启动时，它会自动查找一个类型为UserService的Bean，并将它注入到构造器中。<br>
需要注意的是，如果存在多个类型匹配的Bean，Spring会抛出一个异常。在这种情况下，我们可以使用@Qualifier注解来指定要注入的Bean。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">public class UserServiceImpl implements UserService &#123;</span><br><span class="line">    @Autowired</span><br><span class="line">    @Qualifier(&quot;userDaoImpl&quot;)</span><br><span class="line">    private UserDao userDao;</span><br><span class="line"></span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在这个例子中，我们使用@Qualifier注解指定了要注入的Bean的名称为&quot;userDaoImpl&quot;。这样，当存在多个类型为UserDao的Bean时，Spring会查找名称为&quot;userDaoImpl&quot;的Bean并将它注入到userDao属性中。<br>
required: 这个属性可以指定是否必须存在一个匹配的bean。默认值是true，如果没有找到匹配的bean，会抛出异常。如果设置为false，那么当没有找到匹配的bean时，字段或者参数会被设置为null。</p>
<h6 id="原理：">原理：</h6>
<p><img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688861603142-9afafff6-f7cc-4ea5-a103-a6bdfff4f5cb.png#averageHue=%23efebdf&amp;clientId=u581d0f14-5c03-4&amp;from=paste&amp;height=136&amp;id=u7388e55c&amp;originHeight=170&amp;originWidth=743&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=137106&amp;status=done&amp;style=none&amp;taskId=u13fb6161-b3c4-4948-aa03-ec4476286a9&amp;title=&amp;width=594.4" alt="image.png"></p>
<h4 id="代理模式的介绍：">代理模式的介绍：</h4>
<p>二十三种设计模式中的一种，属于结构型模式。它的作用就是通过提供一个代理类，让我们在调用目标<br>
方法的时候，不再是直接对目标方法进行调用，而是通过代理类间接调用。让不属于目标方法核心逻辑<br>
的代码从目标方法中剥离出来——解耦。调用目标方法时先调用代理对象的方法，减少对目标方法的调<br>
用和打扰，同时让附加功能能够集中在一起也有利于统一维护。<strong>（简单来说就是在调用目标对象之前进行额外的操作，这个时候就需要进行代理，用代理对象来调用目标对象的操作，并且在代理对象中实现额外操作。可能是使用到代理的情况：<strong>当创建一个对象的开销很大时，可以使用代理来延迟对象的创建，只有在需要访问对象时才会创建对象，从而减少了开销。当需要控制对对象的访问时，可以使用代理来限制对对象的访问。代理可以检查调用者的权限，从而保护对象的安全性。</strong>）</strong><br>
<img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688864926855-30f62a2a-4dab-4cf2-a6ad-c34cd7061f78.png#averageHue=%23ececec&amp;clientId=u581d0f14-5c03-4&amp;from=paste&amp;height=418&amp;id=u74fd2868&amp;originHeight=522&amp;originWidth=733&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=128453&amp;status=done&amp;style=none&amp;taskId=ub1d549b4-1699-4c3b-802d-de767a3e791&amp;title=&amp;width=586.4" alt="image.png"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">public interface UserService &#123;</span><br><span class="line">    void save(User user);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class UserServiceImpl implements UserService &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void save(User user) &#123;</span><br><span class="line">        // 保存用户信息</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class UserProxy implements UserService &#123;</span><br><span class="line">    private UserService userService = new UserServiceImpl();</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void save(User user) &#123;</span><br><span class="line">        // 在保存用户信息之前进行一些操作，例如记录日志等</span><br><span class="line">        userService.save(user);</span><br><span class="line">        // 在保存用户信息之后进行一些操作，例如发送消息等</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在这个示例中，UserProxy类是UserService接口的实现类，它包含一个UserService类型的成员变量userService。在UserProxy类的save方法中，我们可以在调用userService的save方法之前和之后执行其他操作。这样，我们就可以通过UserProxy类来控制对UserServiceImpl对象的访问，从而实现代理模式。</p>
<h4 id="静态代理：">静态代理：</h4>
<p>静态代理确实实现了解耦，但是由于代码都写死了，完全不具备任何的灵活性。就拿日志功能来<br>
说，将来其他地方也需要附加日志，那还得再声明更多个静态代理类，那就产生了大量重复的代<br>
码，日志功能还是分散的，没有统一管理。<br>
提出进一步的需求：将日志功能集中到一个代理类中，将来有任何日志需求，都通过这一个代理<br>
类来实现。这就需要使用动态代理技术了</p>
<h4 id="动态代理：">动态代理：</h4>
<p><img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688867552440-d719ebc6-8e68-4af2-81ab-88259681a121.png#averageHue=%23faf9f7&amp;clientId=u280da01d-7a94-4&amp;from=paste&amp;height=126&amp;id=u3d72dfb1&amp;originHeight=157&amp;originWidth=617&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=56798&amp;status=done&amp;style=none&amp;taskId=u47a084bc-7dd2-4269-a126-54af38e5a40&amp;title=&amp;width=493.6" alt="image.png"></p>
<h6 id="jdk动态代理">jdk动态代理</h6>
<p>JDK动态代理是Java提供的一种动态代理实现方式，它基于接口实现，通过反射机制在运行时生成代理类，实现对接口方法的代理。JDK动态代理的代理对象名称是由Proxy类的静态方法newProxyInstance动态生成的，它的格式是$Proxy+数字，其中的数字是随机生成的，所以其名称是不可预测的。<br>
JDK动态代理需要实现InvocationHandler接口，该接口只有一个方法invoke，该方法会在代理对象调用方法时被调用，从而实现对被代理方法的增强逻辑。<br>
下面是一个简单的JDK动态代理示例，假设有一个UserService接口和一个UserServiceImpl类，我们可以使用JDK动态代理来对UserServiceImpl对象进行代理：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">public interface UserService &#123;</span><br><span class="line">    void save(User user);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class UserServiceImpl implements UserService &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void save(User user) &#123;</span><br><span class="line">        // 保存用户信息</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class MyInvocationHandler implements InvocationHandler &#123;</span><br><span class="line">    private Object target;</span><br><span class="line"></span><br><span class="line">    public MyInvocationHandler(Object target) &#123;</span><br><span class="line">        this.target = target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123;</span><br><span class="line">        // 在调用被代理对象的方法之前执行一些操作，例如记录日志等</span><br><span class="line">        Object result = method.invoke(target, args);</span><br><span class="line">        // 在调用被代理对象的方法之后执行一些操作，例如发送消息等</span><br><span class="line">        return result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class Demo &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        UserService userService = new UserServiceImpl();</span><br><span class="line">        MyInvocationHandler handler = new MyInvocationHandler(userService);</span><br><span class="line">        UserService proxy = (UserService) Proxy.newProxyInstance(</span><br><span class="line">            userService.getClass().getClassLoader(),</span><br><span class="line">            userService.getClass().getInterfaces(),</span><br><span class="line">            handler</span><br><span class="line">        );</span><br><span class="line">        proxy.save(new User());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在这个示例中，我们创建了一个MyInvocationHandler类来实现对UserServiceImpl对象的代理。在MyInvocationHandler类中，我们通过反射调用被代理对象的方法，并在调用之前和之后执行一些操作。然后，我们使用Proxy类的静态方法newProxyInstance来创建代理对象，并将其强制转换为UserService类型。最后，我们调用代理对象的save方法来保存用户信息。</p>
<h4 id="AOP介绍：">AOP介绍：</h4>
<p>简单来说就是我们要调用目标对象方法的之前或者之后，我们要进行额外的操作，我们不通过修改目标对象的方法来实现，而是通过其他方法实现这就是AOP要解决的问题。<br>
见尚硅谷笔记</p>
<h4 id="基于注解的AOP：">基于注解的AOP：</h4>
<h6 id="准备：">准备：</h6>
<p>配置pom文件依赖：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 基于Maven依赖传递性，导入spring-context依赖(是IOC的依赖)即可导入当前所需所有jar包    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- junit测试    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688871638743-64ecae28-865e-4cac-8ce2-bcf7ea27d0e4.png#averageHue=%230e0c09&amp;clientId=u280da01d-7a94-4&amp;from=paste&amp;height=209&amp;id=u6578205b&amp;originHeight=261&amp;originWidth=618&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=30999&amp;status=done&amp;style=none&amp;taskId=u5e2c5f5b-a607-45c4-b493-f27fd006994&amp;title=&amp;width=494.4" alt="image.png"><br>
配置Spring配置文件：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment"> 基于注解的AOP的实现：</span></span><br><span class="line"><span class="comment"> 1、将目标对象和切面交给IOC容器管理（注解+扫描）</span></span><br><span class="line"><span class="comment"> 2、开启AspectJ的自动代理，为目标对象自动生成代理</span></span><br><span class="line"><span class="comment"> 3、将切面类通过注解@Aspect标识</span></span><br><span class="line"><span class="comment"> &lt;context:component-scan&gt;标签用于自动扫描指定包及其子包下的类，并将其注册为bean。</span></span><br><span class="line"><span class="comment">     在启用基于注解的AOP时，我们需要使用该标签来扫描所有带有@Aspect注解的类，并将其转换为切面</span></span><br><span class="line"><span class="comment">&lt;aop:aspectj-autoproxy /&gt;元素表示开启基于AspectJ注解的AOP自动代理，</span></span><br><span class="line"><span class="comment">让Spring容器能够识别@Aspect注解标注的切面类，并根据切面类中的通知和切入点配置为目标对象生成</span></span><br><span class="line"><span class="comment">代理对象。</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.example&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">package com.example;</span><br><span class="line"></span><br><span class="line">public interface Calculator &#123;</span><br><span class="line">int add(int i, int j);</span><br><span class="line">int sub(int i, int j);</span><br><span class="line">int mul(int i, int j);</span><br><span class="line">int div(int i, int j);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">package com.example;</span><br><span class="line"></span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">public class CalculatorPureImpl implements Calculator &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public int add(int i, int j) &#123;</span><br><span class="line">        int result = i + j;</span><br><span class="line">        System.out.println(&quot;方法内部    result = &quot; + result);</span><br><span class="line">        return result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public int sub(int i, int j) &#123;</span><br><span class="line">        int result = i - j;</span><br><span class="line">        System.out.println(&quot;方法内部    result = &quot; + result);</span><br><span class="line">        return result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public int mul(int i, int j) &#123;</span><br><span class="line">        int result = i * j;</span><br><span class="line">              System.out.println(&quot;方法内部    result = &quot; + result);</span><br><span class="line">       return result;</span><br><span class="line"> &#125;</span><br><span class="line">   </span><br><span class="line">    @Override</span><br><span class="line">   </span><br><span class="line"></span><br><span class="line">    public int div(int i, int j) &#123;</span><br><span class="line">       int result = i / j;</span><br><span class="line">       System.out.println(&quot;方法内部    result = &quot; + result);</span><br><span class="line">       return result;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">package com.example;</span><br><span class="line"></span><br><span class="line">import org.aspectj.lang.JoinPoint;</span><br><span class="line">import org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line">import org.aspectj.lang.annotation.*;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">import java.util.Arrays;</span><br><span class="line">//在切面中需要通过指定的注解，将方法标识为通知方法</span><br><span class="line">// @Aspect表示这个类是一个切面类</span><br><span class="line">@Aspect</span><br><span class="line">// @Component注解保证这个切面类能够放入IOC容器，切面类必须要做IOC容器中 </span><br><span class="line">@Component</span><br><span class="line">public class LogAspect &#123;</span><br><span class="line">    //@Before前置通知，在方法执行之前执行,下面的*表示当前类中的所有方法，..表示任意参数</span><br><span class="line">   @Before(&quot;execution(public int  CalculatorPureImpl.* (..))&quot;)</span><br><span class="line">   //JoinPoint连接点</span><br><span class="line">               public void beforeMethod(JoinPoint joinPoint)&#123;</span><br><span class="line">       //joinPoint.getSignature()获取当前连接点方法的签名信息，getName()获取连接点方法的方法名</span><br><span class="line">       String methodName = joinPoint.getSignature().getName();</span><br><span class="line">       //joinPoint.getArgs()获取连接点方法的参数列表</span><br><span class="line">       String args = Arrays.toString(joinPoint.getArgs());</span><br><span class="line">       System.out.println(&quot;Logger--&gt;前置通知，方法名：&quot;+methodName+&quot;，参数：&quot;+args);</span><br><span class="line">                 &#125;</span><br><span class="line">     //@After后置通知，也就是方法返回值返回之后才直接执行。</span><br><span class="line">   @After(&quot;execution(*  com.example.CalculatorPureImpl.*(..))&quot;)</span><br><span class="line">   public void afterMethod(JoinPoint joinPoint)&#123;</span><br><span class="line">       String methodName = joinPoint.getSignature().getName();</span><br><span class="line">       System.out.println(&quot;Logger--&gt;后置通知，方法名：&quot;+methodName);</span><br><span class="line"> &#125;</span><br><span class="line">    //在返回通知中若要获取目标对象的返回值，只需要通过 @AfterReturning注解的returning属性，</span><br><span class="line">//    returning：参数名称，用于指定返回结果的变量名。在通知方法中，可以使用该变量来访问返回结果。这里的返回结果变量名为result。</span><br><span class="line">//    throwing：参数名称，用于指定抛出的异常变量名。在通知方法中，可以使用该变量来访问抛出的异常。这里的异常变量名为ex。</span><br><span class="line">    @AfterReturning(value = &quot;execution(* com.example.CalculatorPureImpl.*(..))&quot;, returning = &quot;result&quot;)</span><br><span class="line">               public void afterReturningMethod(JoinPoint joinPoint, Object result)&#123;</span><br><span class="line">       String methodName = joinPoint.getSignature().getName();</span><br><span class="line">       System.out.println(&quot;Logger--&gt;返回通知，方法名：&quot;+methodName+&quot;，结 果：&quot;+result);</span><br><span class="line">                 &#125;</span><br><span class="line">//环绕通知（前面几种通知的集合）：ProceedingJoinPoint继承自JoinPoint接口。相对于JoinPoint，</span><br><span class="line">//ProceedingJoinPoint多了一个proceed()方法，用于手动调用目标方法并获取返回值。</span><br><span class="line">//环绕通知必须有返回值，返回值的类型是proceed方法返回的类型</span><br><span class="line"></span><br><span class="line">   @Around(&quot;execution(*  com.example.CalculatorPureImpl.*(..))&quot;)</span><br><span class="line">   public Object aroundMethod(ProceedingJoinPoint joinPoint)&#123;</span><br><span class="line">             String methodName = joinPoint.getSignature().getName(); </span><br><span class="line">       String args = Arrays.toString(joinPoint.getArgs());</span><br><span class="line">       Object result = null; </span><br><span class="line">       try &#123;</span><br><span class="line"></span><br><span class="line">           System.out.println(&quot;环绕通知--&gt;目标对象方法执行之前&quot;); </span><br><span class="line">   //目标对象（连接点）方法的执行，只有下面这条语句执行后才能在目标对象方法中添加额外的操作</span><br><span class="line">           result = joinPoint.proceed();</span><br><span class="line">           System.out.println(&quot;环绕通知--&gt;目标对象方法返回值之后&quot;); </span><br><span class="line">       &#125; catch (Throwable throwable) &#123;//捕获目标对象方法的异常</span><br><span class="line">           throwable.printStackTrace();</span><br><span class="line">           System.out.println(&quot;环绕通知--&gt;目标对象方法出现异常时&quot;); </span><br><span class="line">       &#125; finally &#123;</span><br><span class="line">           System.out.println(&quot;环绕通知--&gt;目标对象方法执行完毕&quot;); </span><br><span class="line">     &#125;</span><br><span class="line">       return result; </span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">   public void  test()</span><br><span class="line">   &#123;</span><br><span class="line">       ClassPathXmlApplicationContext ioc = new ClassPathXmlApplicationContext(&quot;aop.annotation.xml&quot;);</span><br><span class="line">       //AOP底层是代理模式，这里我们应该获取代理对象的bean,如果获取的是目标对象会报该对象的bean不可用</span><br><span class="line">       //注意这里的代理对象表示LogAspect,代理对象而是AOP底层JDK动态代理生成的，名称是不可预测的</span><br><span class="line">       //但是它却实现了目标对象的接口，可以通过接口声明</span><br><span class="line">        Calculator logAspect= ioc.getBean(Calculator.class);</span><br><span class="line">        logAspect.add(1,1);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h4 id="切面的优先级：">切面的优先级：</h4>
<p>@Order注解是Spring AOP中用于指定通知顺序的注解。通常情况下，多个切面的通知会按照它们定义的顺序依次执行。但是，如果我们需要显式地指定通知的执行顺序，可以使用@Order注解来实现。<br>
@Order注解可以用于类级别和方法级别，它的值越小，优先级越高</p>
<h4 id="jdbcTemplate">jdbcTemplate:</h4>
<p>Spring 框架对 JDBC 进行封装，使用 JdbcTemplate 方便实现对数据库操作</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- 基于Maven依赖传递性，导入spring-context依赖即可导入当前所需所有jar包    --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- Spring 持久化层支持jar包    --&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- Spring 在执行持久化层操作、与持久化层技术进行整合过程中，需要使用orm、jdbc、tx三个 </span></span><br><span class="line"><span class="comment">jar包    --&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- 导入    orm 包就可以通过    Maven 的依赖传递性把其他两个也导入    --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-orm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- Spring 测试相关 ,后面在引入junit是为了让junit在Spring测试环境中运行   --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- junit测试    --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- MySQL驱动    --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- 数据源    --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.31<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">&lt;/dependencies</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jdbc.username=root</span><br><span class="line">jdbc.password=A86789234</span><br><span class="line">jdbc.url=jdbc:mysql://localhost:3306/myemployees?serverTimezone=UTC</span><br><span class="line">jdbc.driver=com.mysql.cj.jdbc.Driver</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">&lt;!-- 导入外部属性文件 classpath:类路径，web资源中要指定，   --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:jdbc.properties&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 配置数据源    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;druidDataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 配置    JdbcTemplate --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jdbcTemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- 装配数据源    --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;druidDataSource&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//指定当前测试类在Spring的测试环境中执行，此时就可以通过注入的方式直接获取IOC容器的bean</span><br><span class="line">@RunWith(SpringJUnit4ClassRunner.class)</span><br><span class="line">//表示通过类路径的方式配置当前Spring测试环境的配置</span><br><span class="line">@ContextConfiguration(&quot;classpath:springJdbc.xml&quot;)</span><br><span class="line">public class jdbcTest &#123;</span><br><span class="line">        //使用spring的测试环境进行测试，需要将测试中要使用的对象注入spring容器中，这里采用注解自动装配注入</span><br><span class="line">        @Autowired</span><br><span class="line">        private JdbcTemplate jdbcTemplate;</span><br><span class="line">        @Test</span><br><span class="line">        public  void  testInsert()</span><br><span class="line">        &#123;//没有insert插入，可以通过update实现</span><br><span class="line">            jdbcTemplate.update(&quot;insert into t_emp values(5,?,?,?,2)&quot;,&quot;赵士&quot;,29,&quot;女&quot;);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">//查询一条数据为一个实体类对象 </span><br><span class="line">public void testSelectEmpById()&#123;</span><br><span class="line">   String sql = &quot;select * from t_emp where id = ?&quot;;</span><br><span class="line">//BeanPropertyRowMapper将查询结果映射到Emp对象中。</span><br><span class="line">   Emp emp = jdbcTemplate.queryForObject(sql, new BeanPropertyRowMapper<span class="tag">&lt;&gt;</span> </span><br><span class="line">(Emp.class), 1);</span><br><span class="line">   System.out.println(emp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在使用BeanPropertyRowMapper进行映射时，Emp类中的属性需要满足以下要求：</p>
<ol>
<li>Emp类必须有一个无参构造函数，否则会在映射时抛出InstantiationException异常。</li>
</ol>
<p>要映射的类必须有一个默认的或无参的构造方法，不能只有带参的构造方法。要映射的类要有公共的setter和getter方法，不能只有其中一个。 要映射的类必须是一个顶级类或静态内部类，不能是非静态的内部类。</p>
<ol start="2">
<li>Emp类中的属性名必须与数据库表中的列名相对应，也可以可以通过使用“驼峰”大小写将用下划线分隔的部分的名称转换为相同的名称来匹配。比如：first_name可以转换为firstName</li>
<li>Emp类中的属性类型必须与数据库表中相应列的数据类型一致或可以自动转换。例如，如果数据库表中某个列的数据类型为VARCHAR，对应的Emp类中的属性类型可以是String或者其他类型，只要可以进行自动转换即可。</li>
</ol>
<h4 id="声明式事务：">声明式事务：</h4>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/zxlyx/article/details/120446177">详解 spring 声明式事务(@Transactional)_purple.taro的博客-CSDN博客</a><br>
所谓声明式事务，就是通过配置的方式，比如通过配置文件（xml）或者注解的方式，告诉spring，哪些方法需要spring帮忙管理事务，然后开发者只用关注业务代码，而事务的事情spring自动帮我们控制。</p>
<h6 id="基于注解的声明式事务：">基于注解的声明式事务：</h6>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- 基于Maven依赖传递性，导入spring-context依赖即可导入当前所需所有jar包    --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- Spring 持久化层支持jar包    --&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- Spring 在执行持久化层操作、与持久化层技术进行整合过程中，需要使用orm、jdbc、tx三个 </span></span><br><span class="line"><span class="comment">jar包    --&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- 导入    orm 包就可以通过    Maven 的依赖传递性把其他两个也导入    --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-orm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- Spring 测试相关    --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- junit测试    --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- MySQL驱动    --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- 数据源    --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.31<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jdbc.username=root</span><br><span class="line">jdbc.password=A86789234</span><br><span class="line">jdbc.url=jdbc:mysql://localhost:3306/myemployees?serverTimezone=UTC</span><br><span class="line">jdbc.driver=com.mysql.cj.jdbc.Driver</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/tool http://www.springframework.org/schema/tool/spring-tool.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 导入外部属性文件 classpath:类路径，web资源中要指定，   --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:jdbc.properties&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置数据源    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;druidDataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置    JdbcTemplate --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jdbcTemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 装配数据源    --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;druidDataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--这段代码用来告诉Spring框架需要扫描哪个包下的类，并将这些类注册</span></span><br><span class="line"><span class="comment">          为Spring容器中的Bean对象--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.example&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置事务管理器 这里的ref是链接数据源的id这里使用的是druidDataSource数据源--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;druidDataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--开启事务注解驱动(annotion选择tx中的）注意此处的tx要导入的命名空间。</span></span><br><span class="line"><span class="comment">    &lt;tx:annotation-driven&gt;：用来开启Spring的声明式事务支持</span></span><br><span class="line"><span class="comment">    transaction-manager：用来指定事务管理器的bean名称。</span></span><br><span class="line"><span class="comment">    transaction-manager后面的值是事务管理器的id，若事务管理器的id为transactionManager</span></span><br><span class="line"><span class="comment">    那么transaction-manager可以省略不写·</span></span><br><span class="line"><span class="comment">    开启后将可以使用@Transaction注解所标识的的方法或类中的所有方法使用事务管理。</span></span><br><span class="line"><span class="comment">    @Transaction加到方法上，该方法就是连接点，加到类上，该类的所有方法都是连接点。</span></span><br><span class="line"><span class="comment">    这样可以对@Transaction注解方法或者类进行事务性管理--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `t_book` (</span><br><span class="line">`book_id` int(11) NOT NULL AUTO_INCREMENT COMMENT &#x27;主键&#x27;, </span><br><span class="line">`book_name` varchar(20) DEFAULT NULL COMMENT &#x27;图书名称&#x27;, </span><br><span class="line">`price` int(11) DEFAULT NULL COMMENT &#x27;价格&#x27;,</span><br><span class="line">`stock` int(10) unsigned DEFAULT NULL COMMENT &#x27;库存（无符号）&#x27;, </span><br><span class="line">PRIMARY KEY (`book_id`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;</span><br><span class="line">insert  into `t_book`(`book_id`,`book_name`,`price`,`stock`) values (1,&#x27;斗破苍 </span><br><span class="line">穹&#x27;,80,100),(2,&#x27;斗罗大陆&#x27;,50,100);</span><br><span class="line">CREATE TABLE `t_user` (</span><br><span class="line">`user_id` int(11) NOT NULL AUTO_INCREMENT COMMENT &#x27;主键&#x27;, </span><br><span class="line">`username` varchar(20) DEFAULT NULL COMMENT &#x27;用户名&#x27;,</span><br><span class="line">`balance` int(10) unsigned DEFAULT NULL COMMENT &#x27;余额（无符号）&#x27;, </span><br><span class="line">PRIMARY KEY (`user_id`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;</span><br><span class="line">insert  into `t_user`(`user_id`,`username`,`balance`) values (1,&#x27;admin&#x27;,50);</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> @Controller</span><br><span class="line">public class BookController &#123; </span><br><span class="line">   @Autowired</span><br><span class="line">   private BookService bookService;</span><br><span class="line">   public void buyBook(Integer bookId, Integer userId)&#123; </span><br><span class="line">       bookService.buyBook(bookId, userId);</span><br><span class="line"> &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public interface BookService &#123;</span><br><span class="line">   void buyBook(Integer bookId, Integer userId); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">@Service</span><br><span class="line">public class BookServiceImpl implements BookService &#123; </span><br><span class="line">   @Autowired</span><br><span class="line"> @Transactional </span><br><span class="line">   private BookDao bookDao; </span><br><span class="line">   @Override</span><br><span class="line">   public void buyBook(Integer bookId, Integer userId) &#123; </span><br><span class="line">       //查询图书的价格</span><br><span class="line">       Integer price = bookDao.getPriceByBookId(bookId); </span><br><span class="line">       //更新图书的库存</span><br><span class="line">       bookDao.updateStock(bookId); </span><br><span class="line">       //更新用户的余额</span><br><span class="line">       bookDao.updateBalance(userId, price); </span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public interface BookDao &#123;</span><br><span class="line">   Integer getPriceByBookId(Integer bookId); </span><br><span class="line">   void updateStock(Integer bookId);</span><br><span class="line">   void updateBalance(Integer userId, Integer price); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">@Repository</span><br><span class="line">public class BookDaoImpl implements BookDao &#123; </span><br><span class="line">   @Autowired</span><br><span class="line">   private JdbcTemplate jdbcTemplate; </span><br><span class="line">   @Override</span><br><span class="line">   public Integer getPriceByBookId(Integer bookId) &#123;</span><br><span class="line">       String sql = &quot;select price from t_book where book_id = ?&quot;;</span><br><span class="line">       return jdbcTemplate.queryForObject(sql, Integer.class, bookId); </span><br><span class="line"> &#125;</span><br><span class="line">   @Override</span><br><span class="line">   public void updateStock(Integer bookId) &#123;</span><br><span class="line">       String sql = &quot;update t_book set stock = stock - 1 where book_id = ?&quot;; </span><br><span class="line">       jdbcTemplate.update(sql, bookId);</span><br><span class="line"> &#125;</span><br><span class="line">   @Override</span><br><span class="line">   public void updateBalance(Integer userId, Integer price) &#123;</span><br><span class="line">       String sql = &quot;update t_user set balance = balance - ? where user_id = </span><br><span class="line">?&quot;;</span><br><span class="line">       jdbcTemplate.update(sql, price, userId); </span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/tool http://www.springframework.org/schema/tool/spring-tool.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 导入外部属性文件 classpath:类路径，web资源中要指定，   --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:jdbc.properties&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置数据源    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;druidDataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置    JdbcTemplate --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jdbcTemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 装配数据源    --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;druidDataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置事务管理器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;druidDataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--开启事务注解驱动(annotion选择tx中的）注意此处的tx要导入的命名空间。--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:annotation-driven</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@RunWith(SpringJUnit4ClassRunner.class)</span><br><span class="line">@ContextConfiguration(&quot;classpath:tx-annotation.xml&quot;) </span><br><span class="line">public class TxByAnnotationTest &#123;</span><br><span class="line">   @Autowired</span><br><span class="line">   private BookController bookController; </span><br><span class="line">   @Test</span><br><span class="line">   public void testBuyBook()&#123;</span><br><span class="line">       bookController.buyBook(1, 1); </span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="事务的属性：">事务的属性：</h4>
<p>readonly<br>
未完待续。。。。</p>
<h1>SpringMvc:（只包括相关的知识点，相关程序没有走，只是结合老师给的）</h1>
<h4 id="MVC介绍：">MVC介绍：</h4>
<p>MVC是一种软件架构的思想，将软件按照模型、视图、控制器来划分<br>
M：Model，模型层，指工程中的JavaBean，作用是处理数据<br>
JavaBean分为两类：<br>
一类称为实体类Bean：专门存储业务数据的，如 Student、User 等<br>
一类称为业务处理 Bean：指 Service 或 Dao 对象，专门用于处理业务逻辑和数据访问。<br>
V：View，视图层，指工程中的html或jsp等页面，作用是与用户进行交互，展示数据<br>
C：Controller，控制层，指工程中的servlet，作用是接收请求和响应浏览器<br>
MVC的工作流程： 用户通过视图层发送请求到服务器，在服务器中请求被Controller接收，Controller<br>
调用相应的Model层处理请求，处理完毕将结果返回到Controller，Controller再根据请求处理的结果<br>
找到相应的View视图，渲染数据后最终响应给浏览器</p>
<h4 id="SpringMVC的特点：">SpringMVC的特点：</h4>
<p>SpringMVC是Spring的一个后续产品，是Spring的一个子项目<br>
SpringMVC 是 Spring 为表述层开发提供的一整套完备的解决方案。在表述层框架历经 Strust、<br>
WebWork、Strust2 等诸多产品的历代更迭之后，目前业界普遍选择了 SpringMVC 作为 Java EE 项目<br>
表述层开发的首选方案。<br>
注：三层架构分为表述层（或表示层）、业务逻辑层、数据访问层，表述层表示前台页面和后台 servlet<br>
Spring 家族原生产品，与 IOC 容器等基础设施无缝对接基于原生的Servlet，通过了功能强大的前端控制器DispatcherServlet，对请求和响应进行统一 处理。表述层各细分领域需要解决的问题全方位覆盖，提供全面解决方案 。代码清新简洁，大幅度提升开发效率。内部组件化程度高，可插拔式组件即插即用，想要什么功能配置相应组件即可 。性能卓著，尤其适合现代大型、超大型互联网项目要求。</p>
<h4 id="入门案例：（下面方法由于IDEA是2023的有错误的，后面完全是跟着老师的源码）">入门案例：（下面方法由于IDEA是2023的有错误的，后面完全是跟着老师的源码）</h4>
<h6 id="项目创建：">项目创建：</h6>
<p><img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688915710064-4a470bf2-c79f-4ae8-9a17-10668f3fc10c.png#averageHue=%23050403&amp;clientId=ub6a7cc0c-d91b-4&amp;from=paste&amp;height=589&amp;id=u89facdbc&amp;originHeight=983&amp;originWidth=988&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=67634&amp;status=done&amp;style=none&amp;taskId=ub6753472-537f-4f6e-b5e9-caef004519c&amp;title=&amp;width=592" alt="image.png"><br>
<img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688915736077-a7d8e962-2afe-4bdb-98f3-0b9d926ef415.png#averageHue=%230b0a09&amp;clientId=ub6a7cc0c-d91b-4&amp;from=paste&amp;height=710&amp;id=u768996e3&amp;originHeight=888&amp;originWidth=739&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=77930&amp;status=done&amp;style=none&amp;taskId=u5b648a25-7878-4c48-8c30-6dbfb8ca621&amp;title=&amp;width=591.2" alt="image.png"><br>
<img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688915746620-15adf4dc-b3c5-4356-a81a-cd2e9e609314.png#averageHue=%23080605&amp;clientId=ub6a7cc0c-d91b-4&amp;from=paste&amp;height=274&amp;id=uef640c46&amp;originHeight=343&amp;originWidth=584&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=18968&amp;status=done&amp;style=none&amp;taskId=uadfe8256-8bbf-477f-ac5d-b51f95de508&amp;title=&amp;width=467.2" alt="image.png">（选择Web应用程序）</p>
<h6 id="常见新的mvc工程：项目结构图如下">常见新的mvc工程：项目结构图如下</h6>
<p><img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688915793967-5188083d-d94e-44f4-871e-f8e763b3343c.png#averageHue=%230a0807&amp;clientId=ub6a7cc0c-d91b-4&amp;from=paste&amp;height=330&amp;id=ub1889d38&amp;originHeight=412&amp;originWidth=389&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=19311&amp;status=done&amp;style=none&amp;taskId=u4e091b0b-3e7d-46e4-a19e-2519f30c1c3&amp;title=&amp;width=311.2" alt="image.png"></p>
<h6 id="导入相关依赖：">导入相关依赖：</h6>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- SpringMVC --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- 日志    --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- ServletAPI --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- Spring5和Thymeleaf整合包    --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.thymeleaf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-spring5<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.12.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>注：由于 Maven 的传递性，我们不必将所有需要的包全部配置依赖，而是配置最顶端的依赖，其他靠 传递性导入。</p>
<h6 id="配置web-xml">配置web.xml</h6>
<p>注册SpringMVC的前端控制器DispatcherServlet，此配置作用下，SpringMVC的配置文件默认位于WEB-INF下，默认名称为<servlet-name>- servlet.xml，例如，以下配置所对应SpringMVC的配置文件位于WEB-INF下，文件名为springMVC- servlet.xml</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置SpringMVC的前端控制器，对浏览器发送的请求统一进行处理    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet&lt;/servlet- </span><br><span class="line">class&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span> </span><br><span class="line">   <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">       设置springMVC的核心控制器所能处理的请求的请求路径</span></span><br><span class="line"><span class="comment">       /所匹配的请求可以是/login或.html或.js或.css方式的请求路径 </span></span><br><span class="line"><span class="comment">       但是/不能匹配.jsp请求路径的请求</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>扩展配置方式</strong><br>
<strong>可通过init-param标签设置SpringMVC配置文件的位置和名称，通过load-on-startup标签设置 SpringMVC前端控制器DispatcherServlet的初始化时间。</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置SpringMVC的前端控制器，对浏览器发送的请求统一进行处理    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet&lt;/servlet- </span><br><span class="line">class&gt;</span><br><span class="line">   <span class="comment">&lt;!-- 通过初始化参数指定SpringMVC配置文件的位置和名称    --&gt;</span> </span><br><span class="line">   <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- contextConfigLocation为固定值    --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- 使用classpath:表示从类路径查找配置文件，例如maven工程中的 </span></span><br><span class="line"><span class="comment">src/main/resources --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springMVC.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span> </span><br><span class="line">   <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">作为框架的核心组件，在启动过程中有大量的初始化操作要做 </span></span><br><span class="line"><span class="comment">而这些操作放在第一次请求时才执行会严重影响访问速度</span></span><br><span class="line"><span class="comment">因此需要通过此标签将启动控制DispatcherServlet的初始化时间提前到服务器启动时 </span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span> </span><br><span class="line">   <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">       设置springMVC的核心控制器所能处理的请求的请求路径</span></span><br><span class="line"><span class="comment">       /所匹配的请求可以是/login或.html或.js或.css方式的请求路径 </span></span><br><span class="line"><span class="comment">       但是/不能匹配.jsp请求路径的请求</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><url-pattern>标签中使用/和/*的区别：/所匹配的请求可以是/login或.html或.js或.css方式的请求路径，但是/不能匹配.jsp请求路径的请 求.因此就可以避免在访问jsp页面时，该请求被DispatcherServlet处理，从而找不到相应的页面 /*则能够匹配所有请求，例如在使用过滤器时，若需要对所有请求进行过滤，就需要使用/*的写法</p>
<h6 id="创建请求控制器">创建请求控制器</h6>
<p>由于前端控制器对浏览器发送的请求进行了统一的处理，但是具体的请求有不同的处理过程，因此需要 创建处理具体请求的类，即请求控制器.请求控制器中每一个处理请求的方法成为控制器方法,因为SpringMVC的控制器由一个POJO（普通的Java类）担任，因此需要通过@Controller注解将其标识 .为一个控制层组件，交给Spring的IoC容器管理，此时SpringMVC才能够识别控制器的存在.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@Controller</span><br><span class="line">public class HelloController &#123; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="创建SpringMVC的配置文件">创建SpringMVC的配置文件</h6>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 自动扫描包    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.atguigu.mvc.controller&quot;</span>/&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-- 配置Thymeleaf视图解析器：实现视图渲染和页面跳转    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;viewResolver&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.view.ThymeleafViewResolver&quot;</span>&gt;</span> </span><br><span class="line">  <span class="comment">&lt;!--name属性设置为order，value属性设置为1，</span></span><br><span class="line"><span class="comment">  这将设置Thymeleaf视图解析器的顺序为1。在Spring MVC中，</span></span><br><span class="line"><span class="comment">  有多个视图解析器可用，按顺序运行，</span></span><br><span class="line"><span class="comment">  直到找到能够处理请求的视图解析器为止。--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;order&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;characterEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span> </span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateEngine&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.SpringTemplateEngine&quot;</span>&gt;</span> </span><br><span class="line">           <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateResolver&quot;</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">bean</span></span></span><br><span class="line"><span class="tag"><span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver&quot;</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--配置前缀和后缀可以通过路径路径访问--&gt;</span></span><br><span class="line">                 <span class="comment">&lt;!-- 视图前缀    --&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/templates/&quot;</span>/&gt;</span></span><br><span class="line">                   <span class="comment">&lt;!-- 视图后缀    --&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.html&quot;</span>/&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateMode&quot;</span> <span class="attr">value</span>=<span class="string">&quot;HTML5&quot;</span>/&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;characterEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">  处理静态资源，例如html、js、css、jpg</span></span><br><span class="line"><span class="comment"> 若只设置该标签，则只能访问静态资源，其他请求则无法访问</span></span><br><span class="line"><span class="comment">  此时必须设置&lt;mvc:annotation-driven/&gt;解决问题 </span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 开启mvc注解驱动    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- 处理响应中文内容乱码    --&gt;</span> </span><br><span class="line">       <span class="tag">&lt;<span class="name">bean</span></span></span><br><span class="line"><span class="tag"><span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;defaultCharset&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;supportedMediaTypes&quot;</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">value</span>&gt;</span>text/html<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">value</span>&gt;</span>application/json<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688948429310-fa23137f-afe9-4c6a-9852-6d02441450e4.png#averageHue=%23f8f6ef&amp;clientId=ucdf75339-60f9-4&amp;from=paste&amp;height=57&amp;id=u35dc23a1&amp;originHeight=71&amp;originWidth=636&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=36570&amp;status=done&amp;style=none&amp;taskId=u88ce7f1e-3a7f-4d80-b16e-29191bef367&amp;title=&amp;width=508.8" alt="image.png"></p>
<h6 id="测试HelloWorld">测试HelloWorld</h6>
<p>首先配置tomcat服务器<br>
实现对首页的访问,在请求控制器中创建处理请求的方法</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// @RequestMapping注解：处理请求和控制器方法之间的映射关系</span><br><span class="line">// @RequestMapping注解的value属性可以通过请求地址匹配请求，/表示的当前工程的上下文路径 </span><br><span class="line">// localhost:8080/springMVC/</span><br><span class="line">@RequestMapping(&quot;/&quot;) </span><br><span class="line">public String index() &#123; </span><br><span class="line">   //设置视图名称</span><br><span class="line">   return &quot;index&quot;; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>②通过超链接跳转到指定页面<br>
在主页index.html中设置超链接</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">title</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">h1</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/hello&#125;&quot;</span>&gt;</span>HelloWorld<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在请求控制器中创建处理请求的方法</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;/hello&quot;) </span><br><span class="line">public String HelloWorld() &#123; </span><br><span class="line">   return &quot;target&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="RequestMapping注解">@RequestMapping注解</h4>
<p><strong>位置：</strong><br>
<img src= "/images/1.webp" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/28066124/1688991101360-096000ef-2636-40d6-8ac6-97a2a1043b55.png#averageHue=%23111221&amp;clientId=u2b3dc9ad-44f6-4&amp;from=paste&amp;height=142&amp;id=u8fcb248b&amp;originHeight=178&amp;originWidth=650&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=49138&amp;status=done&amp;style=none&amp;taskId=u070b129b-f8c9-4090-8e09-11b33e3afcb&amp;title=&amp;width=520" alt="image.png"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">1、@RequestMapping注解标识的位置</span><br><span class="line">* @RequestMapping标识一个类：设置映射请求的请求路径的初始信息</span><br><span class="line">* @RequestMapping标识一个方法：设置映射请求请求路径的具体信息</span><br><span class="line">* 2、@RequestMapping注解value属性</span><br><span class="line">* 作用：通过请求的请求路径匹配请求</span><br><span class="line">* value属性是数组类型，即当前浏览器所发送请求的请求路径匹配value属性中的任何一个值</span><br><span class="line">* 则当前请求就会被注解所标识的方法进行处理</span><br><span class="line">* 3、@RequestMapping注解的method属性</span><br><span class="line">* 作用：通过请求的请求方式匹配请求</span><br><span class="line">* method属性是RequestMethod类型的数组，即当前浏览器所发送请求的请求方式匹配method属性中的任何一中请求方式</span><br><span class="line">* 则当前请求就会被注解所标识的方法进行处理</span><br><span class="line">* 若浏览器所发送的请求的请求路径和@RequestMapping注解value属性匹配，但是请求方式不匹配</span><br><span class="line">* 此时页面报错：405 - Request method &#x27;xxx&#x27; not supported</span><br><span class="line">* 在@RequestMapping的基础上，结合请求方式的一些派生注解：</span><br><span class="line">* @GetMapping,@PostMapping,@DeleteMapping,@PutMapping</span><br><span class="line">* 4、@RequestMapping注解的params属性</span><br><span class="line">* 作用：通过请求的请求参数匹配请求，即浏览器发送的请求的请求参数必须满足params属性的设置</span><br><span class="line">* params可以使用四种表达式：</span><br><span class="line">* &quot;param&quot;：表示当前所匹配请求的请求参数中必须携带param参数</span><br><span class="line">* &quot;!param&quot;：表示当前所匹配请求的请求参数中一定不能携带param参数</span><br><span class="line">* &quot;param=value&quot;：表示当前所匹配请求的请求参数中必须携带param参数且值必须为value</span><br><span class="line">* &quot;param!=value&quot;：表示当前所匹配请求的请求参数中可以不携带param，若携带值一定不能是value</span><br><span class="line">* 若浏览器所发送的请求的请求路径和@RequestMapping注解value属性匹配，但是请求参数不匹配</span><br><span class="line">* 此时页面报错：400 - Parameter conditions &quot;username&quot; not met for actual request parameters:</span><br><span class="line">* 5、@RequestMapping注解的headers属性</span><br><span class="line">* 作用：通过请求的请求头信息匹配请求，即浏览器发送的请求的请求头信息必须满足headers属性的设置</span><br><span class="line">* 若浏览器所发送的请求的请求路径和@RequestMapping注解value属性匹配，但是请求头信息不匹配</span><br><span class="line">* 此时页面报错：404</span><br><span class="line">* 6、SpringMVC支持ant风格的路径</span><br><span class="line">* 在@RequestMapping注解的value属性值中设置一些特殊字符</span><br><span class="line">* ?:任意的单个字符（不包括?）</span><br><span class="line">* *:任意个数的任意字符（不包括?和/）</span><br><span class="line">* **:任意层数的任意目录，注意使用方式只能**写在双斜线中，前后不能有任何的其他字符</span><br><span class="line">* 7、@RequestMapping注解使用路径中的占位符</span><br><span class="line">* 传统：/deleteUser?id=1</span><br><span class="line">* rest：/user/delete/1</span><br><span class="line">* 需要在@RequestMapping注解的value属性中所设置的路径中，使用&#123;xxx&#125;的方式表示路径中的数据</span><br><span class="line">* 在通过@PathVariable注解，将占位符所标识的值和控制器方法的形参进行绑定</span><br><span class="line">* 获取请求参数的方式：</span><br><span class="line">* 1、通过servletAPI获取</span><br><span class="line">* 只需要在控制器方法的形参位置设置HttpServletRequest类型的形参</span><br><span class="line">* 就可以在控制器方法中使用request对象获取请求参数</span><br><span class="line">* 2、通过控制器方法的形参获取</span><br><span class="line">* 只需要在控制器方法的形参位置，设置一个形参，形参的名字和请求参数的名字一致即可</span><br><span class="line">* 3、@RequestParam：将请求参数和控制器方法的形参绑定</span><br><span class="line">* @RequestParam注解的三个属性：value、required、defaultValue</span><br><span class="line">* value:设置和形参绑定的请求参数的名字</span><br><span class="line">* required:设置是否必须传输value所对应的请求参数</span><br><span class="line">* 默认值为true，表示value所对应的请求参数必须传输，否则页面报错：</span><br><span class="line">* 400 - Required String parameter &#x27;xxx&#x27; is not present</span><br><span class="line">* 若设置为false，则表示value所对应的请求参数不是必须传输，若为传输，则形参值为null</span><br><span class="line">* defaultValue:设置当没有传输value所对应的请求参数时，为形参设置的默认值，此时和required属性值无关</span><br><span class="line">* 4、@RequestHeader：将请求头信息和控制器方法的形参绑定</span><br><span class="line">* 5、@CookieValue：将cookie数据和控制器方法的形参绑定</span><br><span class="line">* 6、通过控制器方法的实体类类型的形参获取请求参数</span><br><span class="line">* 需要在控制器方法的形参位置设置实体类类型的形参，要保证实体类中的属性的属性名和请求参数的名字一致</span><br><span class="line">* 可以通过实体类类型的形参获取请求参数</span><br><span class="line">* 7、解决获取请求此参数的乱码问题</span><br><span class="line">* 在web.xml中配置Spring的编码过滤器CharacterEncodingFilter</span><br><span class="line">* 向域对象共享数据：</span><br><span class="line">* 1、通过ModelAndView向请求域共享数据</span><br><span class="line">* 使用ModelAndView时，可以使用其Model功能向请求域共享数据</span><br><span class="line">* 使用View功能设置逻辑视图，但是控制器方法一定要将ModelAndView作为方法的返回值</span><br><span class="line">* 2、使用Model向请求域共享数据</span><br><span class="line">* 3、使用ModelMap向请求域共享数据</span><br><span class="line">* 4、使用map向请求域共享数据</span><br><span class="line">* 5、Model和ModelMap和map的关系</span><br><span class="line">* 其实在底层中，这些类型的形参最终都是通过BindingAwareModelMap创建</span><br><span class="line">* public class BindingAwareModelMap extends ExtendedModelMap &#123;&#125;</span><br><span class="line">* public class ExtendedModelMap extends ModelMap implements Model &#123;&#125;</span><br><span class="line">* public class ModelMap extends LinkedHashMap&lt;String, Object&gt; &#123;&#125;</span><br></pre></td></tr></table></figure>
<p>表单提交和axios是post请求，超链接和地址栏输出的都是get请求。<br>
请求头和响应头不区分的键不区分大小写，但是值区分。<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Cookies">HTTP Cookie - HTTP | MDN</a><br>
<a target="_blank" rel="noopener" href="https://www.cnblogs.com/blknemo/p/13202619.html">【Web】Servlet三大作用域、JSP四大作用域 - Nemo&amp; - 博客园</a><br>
<a target="_blank" rel="noopener" href="https://blog.csdn.net/lingxiyizhi_ljx/article/details/102514560">form表单中的enctype=“multipart/form-data“什么意思?_夜阑卧听风吹雨，铁马冰河入梦来的博客-CSDN博客</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://www.bojiboqi.fun">山麋一笑</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://www.bojiboqi.fun/2024/02/28/SSM%E3%80%81/">http://www.bojiboqi.fun/2024/02/28/SSM%E3%80%81/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://www.bojiboqi.fun" target="_blank">山麋一笑</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/ssm/">ssm</a></div><div class="post_share"><div class="social-share" data-image="/images/default.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/02/28/Vue_/" title="Vue学习笔记"><img class="cover" src= "/images/1.webp" data-lazy-src="/images/default.webp" onerror="onerror=null;src='/img/404.png'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Vue学习笔记</div></div></a></div><div class="next-post pull-right"><a href="/2024/02/28/spring%E7%9B%B8%E5%85%B3%E6%B3%A8%E8%A7%A3%E7%9A%84%E7%90%86%E8%A7%A3%EF%BC%9A/" title="spring常见注解"><img class="cover" src= "/images/1.webp" data-lazy-src="/images/default.webp" onerror="onerror=null;src='/img/404.png'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">spring常见注解</div></div></a></div></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">Mybits:</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#mybits%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%9A"><span class="toc-number">1.0.0.1.</span> <span class="toc-text">mybits核心配置文件：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#mapper%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6%EF%BC%9A"><span class="toc-number">1.0.0.2.</span> <span class="toc-text">mapper映射文件：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E6%95%B0%E6%8D%AE%E5%BA%93%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C%EF%BC%9A%E5%9C%A8test%E6%96%87%E4%BB%B6%E4%B8%AD%E5%BB%BA%E7%AB%8B%E6%B5%8B%E8%AF%95%E7%B1%BB"><span class="toc-number">1.0.0.3.</span> <span class="toc-text">测试数据库添加数据操作：在test文件中建立测试类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E6%97%A5%E5%BF%97%E5%8A%9F%E8%83%BD%EF%BC%9Alog4j4%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6"><span class="toc-number">1.0.0.4.</span> <span class="toc-text">添加日志功能：log4j4日志框架</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%93%8D%E4%BD%9C%EF%BC%9A"><span class="toc-number">1.0.0.5.</span> <span class="toc-text">查询操作：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%8F%82%E6%95%B0%E7%9A%84%E6%83%85%E5%86%B5%EF%BC%9A"><span class="toc-number">1.0.0.6.</span> <span class="toc-text">获取参数的情况：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#mybatis%E7%9A%84%E6%9F%A5%E8%AF%A2%EF%BC%9A"><span class="toc-number">1.0.0.7.</span> <span class="toc-text">mybatis的查询：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E6%AE%8Asql"><span class="toc-number">1.0.0.8.</span> <span class="toc-text">特殊sql:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E5%A4%9A%E5%AF%B91%E6%98%A0%E5%B0%84%EF%BC%9A%E6%B3%A8%E6%84%8F%E5%9C%A8%E6%98%A0%E5%B0%84%E4%B8%BA%E5%AE%9E%E4%BD%93%E7%B1%BB%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E5%AE%9E%E4%BD%93%E7%B1%BB%E4%B8%AD%E5%BF%85%E9%A1%BB%E8%A6%81%E6%9C%89%E6%97%A0%E5%8F%82%E6%9E%84%E9%80%A0%E5%99%A8"><span class="toc-number">1.0.0.9.</span> <span class="toc-text">处理多对1映射：注意在映射为实体类的时候，实体类中必须要有无参构造器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD%EF%BC%9A"><span class="toc-number">1.0.0.10.</span> <span class="toc-text">延迟加载：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E8%BF%87collection%E5%A4%84%E7%90%86%E4%B8%80%E5%AF%B9%E5%A4%9A%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB%EF%BC%9A"><span class="toc-number">1.0.0.11.</span> <span class="toc-text">通过collection处理一对多映射关系：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E6%AD%A5%E6%9F%A5%E8%AF%A2%E5%A4%84%E7%90%86%E4%B8%80%E5%AF%B9%E5%A4%9A%E7%9A%84%E5%85%B3%E7%B3%BB%EF%BC%9A"><span class="toc-number">1.0.0.12.</span> <span class="toc-text">分步查询处理一对多的关系：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E6%80%81sql"><span class="toc-number">1.0.0.13.</span> <span class="toc-text">动态sql:</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#if%E6%A0%87%E7%AD%BE%EF%BC%9A"><span class="toc-number">1.0.0.13.0.1.</span> <span class="toc-text">if标签：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#where"><span class="toc-number">1.0.0.13.0.2.</span> <span class="toc-text">where:</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#trim%E6%A0%87%E7%AD%BE%EF%BC%9A"><span class="toc-number">1.0.0.13.0.3.</span> <span class="toc-text">trim标签：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#choose-when-otherwise%E7%AD%89%E6%A0%87%E7%AD%BE"><span class="toc-number">1.0.0.13.0.4.</span> <span class="toc-text">choose,when,otherwise等标签</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#foreach"><span class="toc-number">1.0.0.13.0.5.</span> <span class="toc-text">foreach:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Param"><span class="toc-number">1.0.0.14.</span> <span class="toc-text">@Param</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#List-Emp-list-Arrays-asList-emp1-emp2-emp3"><span class="toc-number">1.0.0.15.</span> <span class="toc-text">List list &#x3D; Arrays.asList(emp1,emp2,emp3);</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#foreach%E6%A0%87%E7%AD%BE%E5%AE%9E%E7%8E%B0%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4%EF%BC%88%E9%80%9A%E8%BF%87%E6%95%B0%E7%BB%84%EF%BC%89%EF%BC%9A"><span class="toc-number">1.0.0.16.</span> <span class="toc-text">foreach标签实现批量删除（通过数组）：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E6%9F%90%E6%9D%A1%E6%95%B0%E6%8D%AE%E4%B8%8D%E4%B8%BA%E7%A9%BA%E4%BD%86%E6%98%AF%E5%88%A9%E7%94%A8mybatis%E4%B8%AD%E7%9A%84mapper%E6%9F%A5%E8%AF%A2%E7%9A%84%E6%97%B6%E5%80%99%E8%BF%94%E5%9B%9E%E7%9A%84%E9%83%A8%E5%88%86%E5%B1%9E%E6%80%A7%E4%B8%BAnull%E7%9A%84%E5%8E%9F%E5%9B%A0%EF%BC%9A"><span class="toc-number">1.0.0.17.</span> <span class="toc-text">数据库中的某条数据不为空但是利用mybatis中的mapper查询的时候返回的部分属性为null的原因：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sql%E6%A0%87%E7%AD%BE%EF%BC%9A"><span class="toc-number">1.0.0.18.</span> <span class="toc-text">sql标签：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Mybatis%E7%9A%84%E4%B8%80%E7%BA%A7%E7%BC%93%E5%AD%98%EF%BC%9A"><span class="toc-number">1.0.0.19.</span> <span class="toc-text">Mybatis的一级缓存：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E7%BA%A7%E7%BC%93%E5%AD%98%E5%A4%B1%E6%95%88%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%9A"><span class="toc-number">1.0.0.20.</span> <span class="toc-text">一级缓存失效的方法：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Mybatis%E7%9A%84%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98%EF%BC%9A"><span class="toc-number">1.0.0.21.</span> <span class="toc-text">Mybatis的二级缓存：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Mybatis%E7%BC%93%E5%AD%98%E6%9F%A5%E8%AF%A2%E9%A1%BA%E5%BA%8F%EF%BC%9A"><span class="toc-number">1.0.0.22.</span> <span class="toc-text">Mybatis缓存查询顺序：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B4%E5%90%88%E7%AC%AC%E4%B8%89%E6%96%B9%E7%BC%93%E5%AD%98%EF%BC%9A"><span class="toc-number">1.0.0.23.</span> <span class="toc-text">整合第三方缓存：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Mybatis%E7%9A%84%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B%EF%BC%9A"><span class="toc-number">1.0.0.24.</span> <span class="toc-text">Mybatis的逆向工程：</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#3-%E7%94%9F%E6%88%90%E7%9A%84%E7%89%B9%E6%AE%8AEmpExample%E7%B1%BB%E5%92%8CEmpMapper%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%88%86%E6%9E%90%EF%BC%9A"><span class="toc-number">1.0.0.24.0.1.</span> <span class="toc-text">3.生成的特殊EmpExample类和EmpMapper接口的分析：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E5%8A%9F%E8%83%BD%EF%BC%9B"><span class="toc-number">1.0.0.25.</span> <span class="toc-text">分页功能；</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%90%AF%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2%EF%BC%9APageHelper-startPage-1-4"><span class="toc-number">1.0.0.26.</span> <span class="toc-text">开启分页查询：PageHelper.startPage(1,4);</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PageInfo"><span class="toc-number">1.0.0.27.</span> <span class="toc-text">PageInfo&lt;&gt;</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">Spring:</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#spring-Framework%E7%AE%80%E4%BB%8B%EF%BC%9A"><span class="toc-number">2.0.0.1.</span> <span class="toc-text">spring Framework简介：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Spring-IOC%E7%AE%80%E4%BB%8B%EF%BC%9A"><span class="toc-number">2.0.0.2.</span> <span class="toc-text">Spring IOC简介：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Spring-DI-%E7%AE%80%E4%BB%8B%EF%BC%9A"><span class="toc-number">2.0.0.3.</span> <span class="toc-text">Spring DI 简介：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Autowired%E6%B3%A8%E8%A7%A3%E8%AF%A6%E8%A7%A3"><span class="toc-number">2.0.0.4.</span> <span class="toc-text">@Autowired注解详解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IOC%E5%AE%B9%E5%99%A8%E5%9C%A8Spirng%E4%B8%AD%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%9A"><span class="toc-number">2.0.0.5.</span> <span class="toc-text">IOC容器在Spirng中的实现：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%90%86%E8%A7%A3%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84%EF%BC%9A"><span class="toc-number">2.0.0.6.</span> <span class="toc-text">理解相对路径：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96bean%E7%9A%84%E4%B8%89%E7%A7%8D%E6%96%B9%E6%B3%95%EF%BC%9A"><span class="toc-number">2.0.0.7.</span> <span class="toc-text">获取bean的三种方法：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5setter%E6%B3%A8%E5%85%A5%EF%BC%9A"><span class="toc-number">2.0.0.8.</span> <span class="toc-text">依赖注入setter注入：</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%EF%BC%9A"><span class="toc-number">2.0.0.8.0.1.</span> <span class="toc-text">什么是依赖注入：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BC%EF%BC%8C%E8%B5%8B%E5%80%BC%E4%B8%BA%E7%A9%BA%EF%BC%9A"><span class="toc-number">2.0.0.9.</span> <span class="toc-text">通过属性赋值，赋值为空：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#array-%E6%A0%87%E7%AD%BE"><span class="toc-number">2.0.0.10.</span> <span class="toc-text">标签</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B%E7%9A%84%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%EF%BC%9A%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%E4%B8%ADutil%E6%A0%87%E7%AD%BE%E7%9A%84%E5%BC%95%E7%94%A8%E5%92%8CList%E5%92%8CMap%E9%9B%86%E5%92%8C%E7%9A%84%E4%BD%BF%E7%94%A8%EF%BC%9A%E5%85%B6%E5%AE%9E%E6%89%80%E7%BC%BA%E7%9A%84%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E7%9A%84%E7%BB%91%E5%AE%9A%E5%8F%AF%E4%BB%A5%E5%9C%A8IDEA%E4%B8%AD%E8%87%AA%E5%8A%A8%E8%A1%A5%E5%85%85%E7%9A%84"><span class="toc-number">2.0.0.11.</span> <span class="toc-text">集合类型的依赖注入：依赖注入中util标签的引用和List和Map集和的使用：其实所缺的命名空间的绑定可以在IDEA中自动补充的</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%E4%B9%8Bp%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%EF%BC%9A"><span class="toc-number">2.0.0.12.</span> <span class="toc-text">依赖注入之p命名空间：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E6%83%85%E5%86%B5p%E8%AF%AD%E6%B3%95%E7%B3%96%E9%85%8D%E7%BD%AE%E7%9A%84%E5%B1%9E%E6%80%A7%E4%B8%BAList%E6%88%96%E8%80%85Map%E7%9A%84%E6%83%85%E5%86%B5%EF%BC%9A"><span class="toc-number">2.0.0.13.</span> <span class="toc-text">特殊情况p语法糖配置的属性为List或者Map的情况：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Spring%E7%AE%A1%E7%90%86%E6%95%B0%E6%8D%AE%E6%BA%90%EF%BC%9Adruid%E4%BA%8B%E4%BE%8B"><span class="toc-number">2.0.0.14.</span> <span class="toc-text">Spring管理数据源：druid事例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bean%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F%EF%BC%9A"><span class="toc-number">2.0.0.15.</span> <span class="toc-text">bean的作用域：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%9C%A8IOC%E5%AE%B9%E5%99%A8%E4%B8%AD%E9%BB%98%E8%AE%A4%E4%B8%BA%E5%8D%95%E4%BE%8B-%E4%B9%9F%E5%8D%B3%E6%98%AFscope%E9%BB%98%E8%AE%A4%E4%B8%BAsingleton"><span class="toc-number">2.0.0.16.</span> <span class="toc-text">1.在IOC容器中默认为单例,也即是scope默认为singleton</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%9A"><span class="toc-number">2.0.0.17.</span> <span class="toc-text">bean的生命周期：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bean%E7%9A%84%E5%90%8E%E7%BD%AE%E5%A4%84%E7%90%86%E5%99%A8%EF%BC%9A"><span class="toc-number">2.0.0.18.</span> <span class="toc-text">bean的后置处理器：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E7%9A%84%E9%BB%98%E8%AE%A4%E6%96%B9%E6%B3%95"><span class="toc-number">2.0.0.19.</span> <span class="toc-text">接口的默认方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#FactoryBean"><span class="toc-number">2.0.0.20.</span> <span class="toc-text">FactoryBean:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8EXML%E7%9A%84%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%EF%BC%9A"><span class="toc-number">2.0.0.21.</span> <span class="toc-text">基于XML的自动装配：</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2%EF%BC%9A"><span class="toc-number">2.0.0.21.0.1.</span> <span class="toc-text">写在前面：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E7%9A%84%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%EF%BC%9A"><span class="toc-number">2.0.0.22.</span> <span class="toc-text">基于注解的自动装配：</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%EF%BC%9A"><span class="toc-number">2.0.0.22.0.1.</span> <span class="toc-text">注意：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Autowired"><span class="toc-number">2.0.0.22.0.2.</span> <span class="toc-text">@Autowired:</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%8E%9F%E7%90%86%EF%BC%9A"><span class="toc-number">2.0.0.22.0.3.</span> <span class="toc-text">原理：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E7%9A%84%E4%BB%8B%E7%BB%8D%EF%BC%9A"><span class="toc-number">2.0.0.23.</span> <span class="toc-text">代理模式的介绍：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E4%BB%A3%E7%90%86%EF%BC%9A"><span class="toc-number">2.0.0.24.</span> <span class="toc-text">静态代理：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%EF%BC%9A"><span class="toc-number">2.0.0.25.</span> <span class="toc-text">动态代理：</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#jdk%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86"><span class="toc-number">2.0.0.25.0.1.</span> <span class="toc-text">jdk动态代理</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AOP%E4%BB%8B%E7%BB%8D%EF%BC%9A"><span class="toc-number">2.0.0.26.</span> <span class="toc-text">AOP介绍：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E7%9A%84AOP%EF%BC%9A"><span class="toc-number">2.0.0.27.</span> <span class="toc-text">基于注解的AOP：</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%87%86%E5%A4%87%EF%BC%9A"><span class="toc-number">2.0.0.27.0.1.</span> <span class="toc-text">准备：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%87%E9%9D%A2%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7%EF%BC%9A"><span class="toc-number">2.0.0.28.</span> <span class="toc-text">切面的优先级：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#jdbcTemplate"><span class="toc-number">2.0.0.29.</span> <span class="toc-text">jdbcTemplate:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%EF%BC%9A"><span class="toc-number">2.0.0.30.</span> <span class="toc-text">声明式事务：</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E7%9A%84%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%EF%BC%9A"><span class="toc-number">2.0.0.30.0.1.</span> <span class="toc-text">基于注解的声明式事务：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%B1%9E%E6%80%A7%EF%BC%9A"><span class="toc-number">2.0.0.31.</span> <span class="toc-text">事务的属性：</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">3.</span> <span class="toc-text">SpringMvc:（只包括相关的知识点，相关程序没有走，只是结合老师给的）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#MVC%E4%BB%8B%E7%BB%8D%EF%BC%9A"><span class="toc-number">3.0.0.1.</span> <span class="toc-text">MVC介绍：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SpringMVC%E7%9A%84%E7%89%B9%E7%82%B9%EF%BC%9A"><span class="toc-number">3.0.0.2.</span> <span class="toc-text">SpringMVC的特点：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B%EF%BC%9A%EF%BC%88%E4%B8%8B%E9%9D%A2%E6%96%B9%E6%B3%95%E7%94%B1%E4%BA%8EIDEA%E6%98%AF2023%E7%9A%84%E6%9C%89%E9%94%99%E8%AF%AF%E7%9A%84%EF%BC%8C%E5%90%8E%E9%9D%A2%E5%AE%8C%E5%85%A8%E6%98%AF%E8%B7%9F%E7%9D%80%E8%80%81%E5%B8%88%E7%9A%84%E6%BA%90%E7%A0%81%EF%BC%89"><span class="toc-number">3.0.0.3.</span> <span class="toc-text">入门案例：（下面方法由于IDEA是2023的有错误的，后面完全是跟着老师的源码）</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E5%88%9B%E5%BB%BA%EF%BC%9A"><span class="toc-number">3.0.0.3.0.1.</span> <span class="toc-text">项目创建：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E6%96%B0%E7%9A%84mvc%E5%B7%A5%E7%A8%8B%EF%BC%9A%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E5%9B%BE%E5%A6%82%E4%B8%8B"><span class="toc-number">3.0.0.3.0.2.</span> <span class="toc-text">常见新的mvc工程：项目结构图如下</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5%E7%9B%B8%E5%85%B3%E4%BE%9D%E8%B5%96%EF%BC%9A"><span class="toc-number">3.0.0.3.0.3.</span> <span class="toc-text">导入相关依赖：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEweb-xml"><span class="toc-number">3.0.0.3.0.4.</span> <span class="toc-text">配置web.xml</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%AF%B7%E6%B1%82%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="toc-number">3.0.0.3.0.5.</span> <span class="toc-text">创建请求控制器</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%9B%E5%BB%BASpringMVC%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">3.0.0.3.0.6.</span> <span class="toc-text">创建SpringMVC的配置文件</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95HelloWorld"><span class="toc-number">3.0.0.3.0.7.</span> <span class="toc-text">测试HelloWorld</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RequestMapping%E6%B3%A8%E8%A7%A3"><span class="toc-number">3.0.0.4.</span> <span class="toc-text">@RequestMapping注解</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By 山麋一笑</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><div id="runtime"></div></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.12.0"></script><script src="/js/main.js?v=4.12.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.32/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twik.bojiboqi.fun/',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(init,0)
    else getScript('https://cdn.jsdelivr.net/npm/twikoo@1.6.29/dist/twikoo.all.min.js').then(init)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twik.bojiboqi.fun/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
      
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.7.1/jquery.js"></script><div class="aplayer no-destroy" data-id="2914905159" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="auto" data-autoplay="true" muted></div><script  async data-pjax="" defer="" src="/js/fish.js"></script><script async src="/js/diytitle.js"></script><script async src="/js/runtime.js"></script><script async src="/js/leaf.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/fireworks.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show","#web_bg",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener
  btf.removeGlobalFnEvent('pjax')
  btf.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.12.0"></script></div></div></body></html>